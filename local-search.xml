<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>è€ƒå…¬çŸ¥è¯†</title>
    <link href="/2025/06/19/%E8%80%83%E5%85%AC%E7%9F%A5%E8%AF%86/"/>
    <url>/2025/06/19/%E8%80%83%E5%85%AC%E7%9F%A5%E8%AF%86/</url>
    
    <content type="html"><![CDATA[<p>å…¬åŠ¡å‘˜è€ƒè¯•çš„çŸ¥è¯†ä½“ç³»ç»“æ„æ¸…æ™°ï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹æ ¸å¿ƒæ¨¡å—ï¼š</p><h3 id="ğŸ“š-ä¸€ã€å…¬å…±ç¬”è¯•ç§‘ç›®ï¼ˆæ‰€æœ‰è€ƒç”Ÿå¿…è€ƒï¼‰"><a href="#ğŸ“š-ä¸€ã€å…¬å…±ç¬”è¯•ç§‘ç›®ï¼ˆæ‰€æœ‰è€ƒç”Ÿå¿…è€ƒï¼‰" class="headerlink" title="ğŸ“š ä¸€ã€å…¬å…±ç¬”è¯•ç§‘ç›®ï¼ˆæ‰€æœ‰è€ƒç”Ÿå¿…è€ƒï¼‰"></a>ğŸ“š ä¸€ã€å…¬å…±ç¬”è¯•ç§‘ç›®ï¼ˆæ‰€æœ‰è€ƒç”Ÿå¿…è€ƒï¼‰</h3><ol><li><p><strong>è¡Œæ”¿èŒä¸šèƒ½åŠ›æµ‹éªŒï¼ˆè¡Œæµ‹ï¼‰</strong></p><ul><li><strong>å¸¸è¯†åˆ¤æ–­</strong>ï¼šæ”¿æ²»ã€æ³•å¾‹ã€ç»æµã€ç§‘æŠ€ã€å†å²ã€æ—¶æ”¿ç­‰åŸºç¡€çŸ¥è¯†ï¼Œ2025å¹´æ–°å¢â€œæ•°å­—æ”¿åºœâ€â€œç¢³ä¸­å’Œâ€ç­‰çƒ­ç‚¹19ã€‚</li><li><strong>è¨€è¯­ç†è§£ä¸è¡¨è¾¾</strong>ï¼šé€»è¾‘å¡«ç©ºã€ç‰‡æ®µé˜…è¯»ã€ç¯‡ç« åˆ†æï¼Œä¾§é‡é€»è¾‘åˆ†æä¸å¿«é€Ÿé˜…è¯»14ã€‚</li><li><strong>æ•°é‡å…³ç³»</strong>ï¼šæ•°å­¦è¿ç®—ã€æ•°å­—æ¨ç†ï¼Œéœ€æŒæ¡é€Ÿç®—æŠ€å·§ï¼ˆå¦‚æˆªä½ç›´é™¤æ³•ï¼‰14ã€‚</li><li><strong>åˆ¤æ–­æ¨ç†</strong>ï¼šå›¾å½¢æ¨ç†ã€é€»è¾‘åˆ¤æ–­ã€å®šä¹‰åˆ¤æ–­ï¼Œé¢˜é‡å æ¯”æœ€å¤§18ã€‚</li><li><strong>èµ„æ–™åˆ†æ</strong>ï¼šå›¾è¡¨æ•°æ®è§£è¯»ï¼Œå¼ºè°ƒè®¡ç®—æ•ˆç‡ä¸ä¿¡æ¯ç­›é€‰èƒ½åŠ›15ã€‚</li></ul><p><strong>è€ƒè¯•ç‰¹ç‚¹</strong>ï¼šé¢˜é‡å¤§ï¼ˆå›½è€ƒ130-135é¢˜ï¼Œçœè€ƒ100-120é¢˜ï¼‰ï¼Œæ—¶é—´ç´§ï¼ˆæ¯é¢˜çº¦50ç§’ï¼‰12ã€‚</p></li><li><p><strong>ç”³è®º</strong></p><ul><li><strong>é¢˜å‹åˆ†ç±»</strong>ï¼šå½’çº³æ¦‚æ‹¬ã€ç»¼åˆåˆ†æã€å¯¹ç­–å»ºè®®ã€åº”ç”¨æ–‡å†™ä½œï¼ˆå¦‚è°ƒç ”æŠ¥å‘Šï¼‰ã€å¤§ä½œæ–‡ï¼ˆè®®è®ºæ–‡ï¼‰18ã€‚</li><li><strong>åˆ†ç±»å‘½é¢˜</strong>ï¼š<ul><li><strong>Aç±»ï¼ˆçœçº§ä»¥ä¸Šï¼‰</strong>ï¼šä¾§é‡æ”¿ç­–åˆ†æä¸å®è§‚å†³ç­–13ï¼›</li><li><strong>Bç±»ï¼ˆå¿ä¹¡çº§ï¼‰</strong>ï¼šèšç„¦åŸºå±‚æ²»ç†ä¸æ°‘ç”Ÿé—®é¢˜1ï¼›</li><li><strong>Cç±»ï¼ˆè¡Œæ”¿æ‰§æ³•ï¼‰</strong>ï¼šå¼ºè°ƒä¾æ³•åŠäº‹ä¸æ‰§æ³•å®åŠ¡38ã€‚</li></ul></li><li><strong>2025å¹´å˜åŒ–</strong>ï¼šææ–™å­—æ•°å¢è‡³8000å­—ï¼Œä¸»é¢˜ç´§æ‰£â€œåŸºå±‚æ²»ç†ç°ä»£åŒ–â€ï¼Œæ–°å¢æ™ºæ…§ç¤¾åŒºå»ºè®¾ç­‰åº”ç”¨æ–‡é¢˜å‹12ã€‚</li></ul></li></ol><table><thead><tr><th align="left">è¡Œæµ‹æ¨¡å—</th><th align="left">å†…å®¹è¦ç‚¹</th><th align="left">è€ƒè¯•è¦æ±‚</th></tr></thead><tbody><tr><td align="left"><strong>å¸¸è¯†åˆ¤æ–­</strong></td><td align="left">æ”¿æ²»ã€æ³•å¾‹ã€ç§‘æŠ€ã€å†å²ã€æ—¶æ”¿çƒ­ç‚¹ï¼ˆå¦‚æ•°å­—æ”¿åºœã€ç¢³ä¸­å’Œï¼‰</td><td align="left">æ¯é¢˜30-45ç§’ï¼Œåˆ†å€¼çº¦0.5åˆ†&#x2F;é¢˜</td></tr><tr><td align="left"><strong>è¨€è¯­ç†è§£</strong></td><td align="left">é€»è¾‘å¡«ç©ºã€ç‰‡æ®µé˜…è¯»ã€ç¯‡ç« åˆ†æ</td><td align="left">æ³¨é‡é€»è¾‘åˆ†æä¸å¿«é€Ÿé˜…è¯»èƒ½åŠ›</td></tr><tr><td align="left"><strong>æ•°é‡å…³ç³»</strong></td><td align="left">æ•°å­¦è¿ç®—ã€æ•°å­—æ¨ç†ï¼Œéœ€æŒæ¡é€Ÿç®—æŠ€å·§</td><td align="left">é¢˜é‡è¾ƒå°‘ä½†éš¾åº¦è¾ƒé«˜</td></tr><tr><td align="left"><strong>åˆ¤æ–­æ¨ç†</strong></td><td align="left">å›¾å½¢æ¨ç†ã€é€»è¾‘åˆ¤æ–­ã€å®šä¹‰åˆ¤æ–­</td><td align="left">é¢˜é‡æœ€å¤§ï¼Œå æ¯”çº¦30%</td></tr><tr><td align="left"><strong>èµ„æ–™åˆ†æ</strong></td><td align="left">å›¾è¡¨æ•°æ®è§£è¯»ä¸åˆ†æ</td><td align="left">å¼ºè°ƒè®¡ç®—æ•ˆç‡ä¸ä¿¡æ¯ç­›é€‰</td></tr></tbody></table><table><thead><tr><th align="left">ç”³è®ºåˆ†ç±»</th><th align="left">èƒ½åŠ›ä¾§é‡ç‚¹</th><th align="left">2025å¹´æ–°è¶‹åŠ¿</th></tr></thead><tbody><tr><td align="left"><strong>Aç±»ï¼ˆçœçº§ï¼‰</strong></td><td align="left">æ”¿ç­–åˆ†æã€å®è§‚å†³ç­–ã€ç»¼åˆåè°ƒ</td><td align="left">æ–°å¢â€œæ™ºæ…§æ²»ç†â€æ¡ˆä¾‹åˆ†æé¢˜</td></tr><tr><td align="left"><strong>Bç±»ï¼ˆå¿ä¹¡ï¼‰</strong></td><td align="left">åŸºå±‚æ²»ç†ã€æ°‘ç”Ÿé—®é¢˜è§£å†³ã€æ”¿ç­–è½åœ°</td><td align="left">ææ–™æ›´è´´è¿‘ä¹¡æ‘æŒ¯æ–°å®è·µ</td></tr><tr><td align="left"><strong>Cç±»ï¼ˆæ‰§æ³•ï¼‰</strong></td><td align="left">ä¾æ³•åŠäº‹ã€æ‰§æ³•è§„èŒƒã€åº”æ€¥å¤„ç†</td><td align="left">å¼ºåŒ–æ‰§æ³•æ–‡ä¹¦å†™ä½œï¼ˆå¦‚å¤„ç½šå†³å®šä¹¦ï¼‰</td></tr></tbody></table><h3 id="âš–ï¸-äºŒã€ä¸“ä¸šç§‘ç›®ï¼ˆéƒ¨åˆ†å²—ä½åŠ è¯•ï¼‰"><a href="#âš–ï¸-äºŒã€ä¸“ä¸šç§‘ç›®ï¼ˆéƒ¨åˆ†å²—ä½åŠ è¯•ï¼‰" class="headerlink" title="âš–ï¸ äºŒã€ä¸“ä¸šç§‘ç›®ï¼ˆéƒ¨åˆ†å²—ä½åŠ è¯•ï¼‰"></a>âš–ï¸ äºŒã€ä¸“ä¸šç§‘ç›®ï¼ˆéƒ¨åˆ†å²—ä½åŠ è¯•ï¼‰</h3><ol><li><strong>å…¬å®‰ç±»</strong><ul><li>è€ƒå¯Ÿã€Šå…¬å®‰ä¸“ä¸šçŸ¥è¯†ã€‹ï¼šæ‰§æ³•è§„èŒƒã€åº”æ€¥å¤„ç†ã€è­¦åŠ¡å¤§æ•°æ®åˆ†æï¼Œ2025å¹´æ–°å¢ã€Šåç”µä¿¡ç½‘ç»œè¯ˆéª—æ³•ã€‹å®æ“é¢˜18ã€‚</li></ul></li><li><strong>é‡‘èç›‘ç®¡ç±»</strong>ï¼ˆé“¶ä¿ç›‘ã€è¯ç›‘ä¼šï¼‰<ul><li>å¾®è§‚ç»æµå­¦è®¡ç®—ã€ESGæŠ•èµ„æ¡ˆä¾‹åˆ†æã€ç›‘ç®¡æ³•è§„13ã€‚</li></ul></li><li><strong>å¤–è¯­ç±»</strong>ï¼ˆå¤–äº¤éƒ¨ç­‰ï¼‰<ul><li>éé€šç”¨è¯­æ°´å¹³æµ‹è¯•ï¼šè¯æ±‡è¯­æ³•ã€ç¿»è¯‘ã€é˜…è¯»ç†è§£13ã€‚</li></ul></li></ol><h3 id="ğŸƒâ€â™‚ï¸-ä¸‰ã€ä½“èƒ½æµ‹è¯•ï¼ˆè­¦å¯Ÿ-æ‰§æ³•ç±»å²—ä½ï¼‰"><a href="#ğŸƒâ€â™‚ï¸-ä¸‰ã€ä½“èƒ½æµ‹è¯•ï¼ˆè­¦å¯Ÿ-æ‰§æ³•ç±»å²—ä½ï¼‰" class="headerlink" title="ğŸƒâ€â™‚ï¸ ä¸‰ã€ä½“èƒ½æµ‹è¯•ï¼ˆè­¦å¯Ÿ&#x2F;æ‰§æ³•ç±»å²—ä½ï¼‰"></a>ğŸƒâ€â™‚ï¸ ä¸‰ã€ä½“èƒ½æµ‹è¯•ï¼ˆè­¦å¯Ÿ&#x2F;æ‰§æ³•ç±»å²—ä½ï¼‰</h3><ul><li><strong>é¡¹ç›®</strong>ï¼šå¾€è¿”è·‘ã€é•¿è·‘ï¼ˆç”·å­1000ç±³&#x2F;å¥³å­800ç±³ï¼‰ã€å¼•ä½“å‘ä¸Šç­‰12ã€‚</li><li><strong>2025å¹´æ ‡å‡†</strong>ï¼šä¿®è®¢åæ·˜æ±°ç‡è¶…30%ï¼Œéœ€é’ˆå¯¹æ€§è®­ç»ƒ18ã€‚</li></ul><h3 id="ğŸ’¬-å››ã€é¢è¯•"><a href="#ğŸ’¬-å››ã€é¢è¯•" class="headerlink" title="ğŸ’¬ å››ã€é¢è¯•"></a>ğŸ’¬ å››ã€é¢è¯•</h3><ol><li><strong>å½¢å¼</strong>ï¼š<ul><li>ç»“æ„åŒ–é¢è¯•ï¼ˆå æ¯”80%ï¼‰ï¼šæŒ‰æ ‡å‡†é¢˜åº“ç­”é¢˜17ï¼›</li><li>æ— é¢†å¯¼å°ç»„è®¨è®ºï¼šæ¨¡æ‹Ÿå›¢é˜Ÿå†³ç­–åœºæ™¯ï¼ˆå¦‚å¤„ç†ç¾¤ä¼—æŠ•è¯‰ï¼‰28ã€‚</li></ul></li><li><strong>è€ƒå¯Ÿèƒ½åŠ›</strong>ï¼š<ul><li>ç»¼åˆåˆ†æèƒ½åŠ›ï¼ˆæ”¿ç­–è§£è¯»ï¼‰ã€åº”æ€¥å¤„ç†èƒ½åŠ›ï¼ˆçªå‘äº‹ä»¶åº”å¯¹ï¼‰ã€è¯­è¨€è¡¨è¾¾ä¸é€»è¾‘æ€§78ã€‚</li></ul></li><li><strong>2025å¹´è¶‹åŠ¿</strong>ï¼š<ul><li>å¢åŠ å²—ä½åœºæ™¯æ¨¡æ‹Ÿé¢˜ï¼ˆå¦‚â€œå¦‚ä½•è°ƒè§£ç¤¾åŒºçŸ›ç›¾â€ï¼‰27ã€‚</li></ul></li></ol><h3 id="ğŸ’-æ€»ç»“"><a href="#ğŸ’-æ€»ç»“" class="headerlink" title="ğŸ’ æ€»ç»“"></a>ğŸ’ æ€»ç»“</h3><p>è€ƒå…¬çŸ¥è¯†ä½“ç³»ç»“æ„åŒ–åˆ†ä¸ºå››å—ï¼š</p><ol><li><strong>å…¬å…±ç¬”è¯•</strong>ï¼ˆè¡Œæµ‹+ç”³è®ºï¼Œå åˆ†70%ä»¥ä¸Šï¼‰ï¼›</li><li><strong>ä¸“ä¸šç§‘ç›®</strong>ï¼ˆæŒ‰å²—ä½åŠ è¯•ï¼Œå æ¯”å‡è‡³18.3%ï¼‰2ï¼›</li><li><strong>ä½“èƒ½æµ‹è¯•</strong>ï¼ˆè­¦å¯Ÿå²—å¿…å¤‡ï¼‰ï¼›</li><li><strong>é¢è¯•</strong>ï¼ˆæƒé‡40%ï¼Œæ³¨é‡å®åŠ¡èƒ½åŠ›ï¼‰78ã€‚</li></ol><p>å¤‡è€ƒå»ºè®®ï¼šè¡Œæµ‹é‡æŠ€å·§æé€Ÿï¼ˆå¦‚èµ„æ–™åˆ†ææˆªä½æ³•ï¼‰ï¼Œç”³è®ºéœ€ç´§æ‰£æ”¿ç­–çƒ­ç‚¹ï¼ˆå¦‚åŸºå±‚ç°ä»£åŒ–ï¼‰ï¼Œä¸“ä¸šç§‘ç›®ç»“åˆå²—ä½èŒèƒ½æ·±åŒ–å­¦ä¹ 110ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>è€ƒå…¬</category>
      
    </categories>
    
    
    <tags>
      
      <tag>è€ƒå…¬</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å­¦ä¹ vue3</title>
    <link href="/2025/02/24/%E5%AD%A6%E4%B9%A0vue3/"/>
    <url>/2025/02/24/%E5%AD%A6%E4%B9%A0vue3/</url>
    
    <content type="html"><![CDATA[<h1 id="1-Vue3ç®€ä»‹"><a href="#1-Vue3ç®€ä»‹" class="headerlink" title="1. Vue3ç®€ä»‹"></a>1. Vue3ç®€ä»‹</h1><ul><li><p>2020å¹´9æœˆ18æ—¥ï¼Œ<code>Vue.js</code>å‘å¸ƒç‰ˆ<code>3.0</code>ç‰ˆæœ¬ï¼Œä»£å·ï¼š<code>One Piece</code>ï¼ˆn</p></li><li><p>ç»å†äº†ï¼š<a href="https://github.com/vuejs/core/commits/main">4800+æ¬¡æäº¤</a>ã€<a href="https://github.com/vuejs/rfcs/tree/master/active-rfcs">40+ä¸ªRFC</a>ã€<a href="https://github.com/vuejs/vue-next/pulls?q=is:pr+is:merged+-author:app/dependabot-preview+">600+æ¬¡PR</a>ã€<a href="https://github.com/vuejs/core/graphs/contributors">300+è´¡çŒ®è€…</a></p></li><li><p>å®˜æ–¹å‘ç‰ˆåœ°å€ï¼š<a href="https://github.com/vuejs/core/releases/tag/v3.0.0">Release v3.0.0 One Piece Â· vuejs&#x2F;core</a></p></li><li><p>æˆªæ­¢2023å¹´10æœˆï¼Œæœ€æ–°çš„å…¬å¼€ç‰ˆæœ¬ä¸ºï¼š<code>3.3.4</code></p><img src="images/1695089947298-161c1b47-eb86-42fb-b1f8-d6a4fcab8ee2.png" alt="image.png" style="zoom:30%;" /></li></ul><h2 id="1-1-ã€æ€§èƒ½çš„æå‡ã€‘"><a href="#1-1-ã€æ€§èƒ½çš„æå‡ã€‘" class="headerlink" title="1.1. ã€æ€§èƒ½çš„æå‡ã€‘"></a>1.1. ã€æ€§èƒ½çš„æå‡ã€‘</h2><ul><li><p>æ‰“åŒ…å¤§å°å‡å°‘<code>41%</code>ã€‚</p></li><li><p>åˆæ¬¡æ¸²æŸ“å¿«<code>55%</code>, æ›´æ–°æ¸²æŸ“å¿«<code>133%</code>ã€‚</p></li><li><p>å†…å­˜å‡å°‘<code>54%</code>ã€‚</p></li></ul><h2 id="1-2-ã€-æºç çš„å‡çº§ã€‘"><a href="#1-2-ã€-æºç çš„å‡çº§ã€‘" class="headerlink" title="1.2.ã€ æºç çš„å‡çº§ã€‘"></a>1.2.ã€ æºç çš„å‡çº§ã€‘</h2><ul><li><p>ä½¿ç”¨<code>Proxy</code>ä»£æ›¿<code>defineProperty</code>å®ç°å“åº”å¼ã€‚</p></li><li><p>é‡å†™è™šæ‹Ÿ<code>DOM</code>çš„å®ç°å’Œ<code>Tree-Shaking</code>ã€‚</p></li></ul><h2 id="1-3-ã€æ‹¥æŠ±TypeScriptã€‘"><a href="#1-3-ã€æ‹¥æŠ±TypeScriptã€‘" class="headerlink" title="1.3. ã€æ‹¥æŠ±TypeScriptã€‘"></a>1.3. ã€æ‹¥æŠ±TypeScriptã€‘</h2><ul><li><code>Vue3</code>å¯ä»¥æ›´å¥½çš„æ”¯æŒ<code>TypeScript</code>ã€‚</li></ul><h2 id="1-4-ã€æ–°çš„ç‰¹æ€§ã€‘"><a href="#1-4-ã€æ–°çš„ç‰¹æ€§ã€‘" class="headerlink" title="1.4. ã€æ–°çš„ç‰¹æ€§ã€‘"></a>1.4. ã€æ–°çš„ç‰¹æ€§ã€‘</h2><ol><li><p><code>Composition API</code>ï¼ˆç»„åˆ<code>API</code>ï¼‰ï¼š</p><ul><li><p><code>setup</code></p></li><li><p><code>ref</code>ä¸<code>reactive</code></p></li><li><p><code>computed</code>ä¸<code>watch</code></p><p>â€¦â€¦</p></li></ul></li><li><p>æ–°çš„å†…ç½®ç»„ä»¶ï¼š</p><ul><li><p><code>Fragment</code></p></li><li><p><code>Teleport</code></p></li><li><p><code>Suspense</code></p><p>â€¦â€¦</p></li></ul></li><li><p>å…¶ä»–æ”¹å˜ï¼š</p><ul><li><p>æ–°çš„ç”Ÿå‘½å‘¨æœŸé’©å­</p></li><li><p><code>data</code> é€‰é¡¹åº”å§‹ç»ˆè¢«å£°æ˜ä¸ºä¸€ä¸ªå‡½æ•°</p></li><li><p>ç§»é™¤<code>keyCode</code>æ”¯æŒä½œä¸º<code> v-on</code> çš„ä¿®é¥°ç¬¦</p><p>â€¦â€¦</p></li></ul></li></ol><h1 id="2-åˆ›å»ºVue3å·¥ç¨‹"><a href="#2-åˆ›å»ºVue3å·¥ç¨‹" class="headerlink" title="2. åˆ›å»ºVue3å·¥ç¨‹"></a>2. åˆ›å»ºVue3å·¥ç¨‹</h1><h2 id="2-1-ã€åŸºäº-vue-cli-åˆ›å»ºã€‘"><a href="#2-1-ã€åŸºäº-vue-cli-åˆ›å»ºã€‘" class="headerlink" title="2.1. ã€åŸºäº vue-cli åˆ›å»ºã€‘"></a>2.1. ã€åŸºäº vue-cli åˆ›å»ºã€‘</h2><p>ç‚¹å‡»æŸ¥çœ‹<a href="https://cli.vuejs.org/zh/guide/creating-a-project.html#vue-create">å®˜æ–¹æ–‡æ¡£</a></p><blockquote><p>å¤‡æ³¨ï¼šç›®å‰<code>vue-cli</code>å·²å¤„äºç»´æŠ¤æ¨¡å¼ï¼Œå®˜æ–¹æ¨èåŸºäº <code>Vite</code> åˆ›å»ºé¡¹ç›®ã€‚</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-comment">## æŸ¥çœ‹@vue/cliç‰ˆæœ¬ï¼Œç¡®ä¿@vue/cliç‰ˆæœ¬åœ¨4.5.0ä»¥ä¸Š</span><br>vue <span class="hljs-literal">--version</span><br><br><span class="hljs-comment">## å®‰è£…æˆ–è€…å‡çº§ä½ çš„@vue/cli </span><br>npm install <span class="hljs-literal">-g</span> @vue/<span class="hljs-built_in">cli</span><br><br><span class="hljs-comment">## æ‰§è¡Œåˆ›å»ºå‘½ä»¤</span><br>vue create vue_test<br><br><span class="hljs-comment">##  éšåé€‰æ‹©3.x</span><br><span class="hljs-comment">##  Choose a version of Vue.js that you want to start the project with (Use arrow keys)</span><br><span class="hljs-comment">##  &gt; 3.x</span><br><span class="hljs-comment">##    2.x</span><br><br><span class="hljs-comment">## å¯åŠ¨</span><br><span class="hljs-built_in">cd</span> vue_test<br>npm run serve<br></code></pre></td></tr></table></figure><hr><h2 id="2-2-ã€åŸºäº-vite-åˆ›å»ºã€‘-æ¨è"><a href="#2-2-ã€åŸºäº-vite-åˆ›å»ºã€‘-æ¨è" class="headerlink" title="2.2. ã€åŸºäº vite åˆ›å»ºã€‘(æ¨è)"></a>2.2. ã€åŸºäº vite åˆ›å»ºã€‘(æ¨è)</h2><p><code>vite</code> æ˜¯æ–°ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·ï¼Œå®˜ç½‘åœ°å€ï¼š<a href="https://vitejs.cn/">https://vitejs.cn</a>ï¼Œ<code>vite</code>çš„ä¼˜åŠ¿å¦‚ä¸‹ï¼š</p><ul><li>è½»é‡å¿«é€Ÿçš„çƒ­é‡è½½ï¼ˆ<code>HMR</code>ï¼‰ï¼Œèƒ½å®ç°æé€Ÿçš„æœåŠ¡å¯åŠ¨ã€‚</li><li>å¯¹ <code>TypeScript</code>ã€<code>JSX</code>ã€<code>CSS</code> ç­‰æ”¯æŒå¼€ç®±å³ç”¨ã€‚</li><li>çœŸæ­£çš„æŒ‰éœ€ç¼–è¯‘ï¼Œä¸å†ç­‰å¾…æ•´ä¸ªåº”ç”¨ç¼–è¯‘å®Œæˆã€‚</li><li><code>webpack</code>æ„å»º ä¸ <code>vite</code>æ„å»ºå¯¹æ¯”å›¾å¦‚ä¸‹ï¼š<br><img src="images/1683167182037-71c78210-8217-4e7d-9a83-e463035efbbe.png" alt="webpackæ„å»º" title="webpackæ„å»º" style="zoom:20%;box-shadow:0 0 10px black" /><img src="images/1683167204081-582dc237-72bc-499e-9589-2cdfd452e62f.png" alt="viteæ„å»º" title="viteæ„å»º" style="zoom: 20%;box-shadow:0 0 10px black" /></li></ul><ul><li>å…·ä½“æ“ä½œå¦‚ä¸‹ï¼ˆç‚¹å‡»æŸ¥çœ‹<a href="https://cn.vuejs.org/guide/quick-start.html#creating-a-vue-application">å®˜æ–¹æ–‡æ¡£</a>ï¼‰</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-comment">## 1.åˆ›å»ºå‘½ä»¤</span><br>npm create vue@latest<br><br><span class="hljs-comment">## 2.å…·ä½“é…ç½®</span><br><span class="hljs-comment">## é…ç½®é¡¹ç›®åç§°</span><br>âˆš Project name: vue3_test<br><span class="hljs-comment">## æ˜¯å¦æ·»åŠ TypeScriptæ”¯æŒ</span><br>âˆš Add TypeScript?  Yes<br><span class="hljs-comment">## æ˜¯å¦æ·»åŠ JSXæ”¯æŒ</span><br>âˆš Add JSX Support?  No<br><span class="hljs-comment">## æ˜¯å¦æ·»åŠ è·¯ç”±ç¯å¢ƒ</span><br>âˆš Add Vue Router <span class="hljs-keyword">for</span> Single Page Application development?  No<br><span class="hljs-comment">## æ˜¯å¦æ·»åŠ piniaç¯å¢ƒ</span><br>âˆš Add Pinia <span class="hljs-keyword">for</span> state management?  No<br><span class="hljs-comment">## æ˜¯å¦æ·»åŠ å•å…ƒæµ‹è¯•</span><br>âˆš Add Vitest <span class="hljs-keyword">for</span> Unit Testing?  No<br><span class="hljs-comment">## æ˜¯å¦æ·»åŠ ç«¯åˆ°ç«¯æµ‹è¯•æ–¹æ¡ˆ</span><br>âˆš Add an <span class="hljs-keyword">End</span><span class="hljs-literal">-to-End</span> Testing Solution? Â» No<br><span class="hljs-comment">## æ˜¯å¦æ·»åŠ ESLintè¯­æ³•æ£€æŸ¥</span><br>âˆš Add ESLint <span class="hljs-keyword">for</span> code quality?  Yes<br><span class="hljs-comment">## æ˜¯å¦æ·»åŠ Prettiertä»£ç æ ¼å¼åŒ–</span><br>âˆš Add Prettier <span class="hljs-keyword">for</span> code formatting?  No<br></code></pre></td></tr></table></figure><p>è‡ªå·±åŠ¨æ‰‹ç¼–å†™ä¸€ä¸ªAppç»„ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;app&quot;&gt;<br>    &lt;h1&gt;ä½ å¥½å•Šï¼&lt;/h1&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script lang=&quot;ts&quot;&gt;<br>  export default &#123;<br>    name:&#x27;App&#x27; //ç»„ä»¶å<br>  &#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br>  .app &#123;<br>    background-color: #ddd;<br>    box-shadow: 0 0 10px;<br>    border-radius: 10px;<br>    padding: 20px;<br>  &#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p>å®‰è£…å®˜æ–¹æ¨èçš„<code>vscode</code>æ’ä»¶ï¼š</p><img src="images/volar.png" alt="Snipaste_2023-10-08_20-46-34" style="zoom:50%;" /> <img src="images/image-20231218085906380.png" alt="image-20231218085906380" style="zoom:42%;" /> <p>æ€»ç»“ï¼š</p><ul><li><code>Vite</code> é¡¹ç›®ä¸­ï¼Œ<code>index.html</code> æ˜¯é¡¹ç›®çš„å…¥å£æ–‡ä»¶ï¼Œåœ¨é¡¹ç›®æœ€å¤–å±‚ã€‚</li><li>åŠ è½½<code>index.html</code>åï¼Œ<code>Vite</code> è§£æ <code>&lt;script type=&quot;module&quot; src=&quot;xxx&quot;&gt;</code> æŒ‡å‘çš„<code>JavaScript</code>ã€‚</li><li><code>Vue3</code>**ä¸­æ˜¯é€šè¿‡ **<code>createApp</code> å‡½æ•°åˆ›å»ºä¸€ä¸ªåº”ç”¨å®ä¾‹ã€‚</li></ul><h2 id="2-3-ã€ä¸€ä¸ªç®€å•çš„æ•ˆæœã€‘"><a href="#2-3-ã€ä¸€ä¸ªç®€å•çš„æ•ˆæœã€‘" class="headerlink" title="2.3. ã€ä¸€ä¸ªç®€å•çš„æ•ˆæœã€‘"></a>2.3. ã€ä¸€ä¸ªç®€å•çš„æ•ˆæœã€‘</h2><p><code>Vue3</code>å‘ä¸‹å…¼å®¹<code>Vue2</code>è¯­æ³•ï¼Œä¸”<code>Vue3</code>ä¸­çš„æ¨¡æ¿ä¸­å¯ä»¥æ²¡æœ‰æ ¹æ ‡ç­¾</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;person&quot;&gt;<br>    &lt;h2&gt;å§“åï¼š&#123;&#123;name&#125;&#125;&lt;/h2&gt;<br>    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123;age&#125;&#125;&lt;/h2&gt;<br>    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;<br>    &lt;button @click=&quot;changeAge&quot;&gt;å¹´é¾„+1&lt;/button&gt;<br>    &lt;button @click=&quot;showTel&quot;&gt;ç‚¹æˆ‘æŸ¥çœ‹è”ç³»æ–¹å¼&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script lang=&quot;ts&quot;&gt;<br>  export default &#123;<br>    name:&#x27;App&#x27;,<br>    data() &#123;<br>      return &#123;<br>        name:&#x27;å¼ ä¸‰&#x27;,<br>        age:18,<br>        tel:&#x27;13888888888&#x27;<br>      &#125;<br>    &#125;,<br>    methods:&#123;<br>      changeName()&#123;<br>        this.name = &#x27;zhang-san&#x27;<br>      &#125;,<br>      changeAge()&#123;<br>        this.age += 1<br>      &#125;,<br>      showTel()&#123;<br>        alert(this.tel)<br>      &#125;<br>    &#125;,<br>  &#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h1 id="3-Vue3æ ¸å¿ƒè¯­æ³•"><a href="#3-Vue3æ ¸å¿ƒè¯­æ³•" class="headerlink" title="3. Vue3æ ¸å¿ƒè¯­æ³•"></a>3. Vue3æ ¸å¿ƒè¯­æ³•</h1><h2 id="3-1-ã€OptionsAPI-ä¸-CompositionAPIã€‘"><a href="#3-1-ã€OptionsAPI-ä¸-CompositionAPIã€‘" class="headerlink" title="3.1.  ã€OptionsAPI ä¸ CompositionAPIã€‘"></a>3.1.  ã€OptionsAPI ä¸ CompositionAPIã€‘</h2><ul><li><code>Vue2</code>çš„<code>API</code>è®¾è®¡æ˜¯<code>Options</code>ï¼ˆé…ç½®ï¼‰é£æ ¼çš„ã€‚</li><li><code>Vue3</code>çš„<code>API</code>è®¾è®¡æ˜¯<code>Composition</code>ï¼ˆç»„åˆï¼‰é£æ ¼çš„ã€‚</li></ul><h3 id="Options-API-çš„å¼Šç«¯"><a href="#Options-API-çš„å¼Šç«¯" class="headerlink" title="Options API çš„å¼Šç«¯"></a>Options API çš„å¼Šç«¯</h3><p><code>Options</code>ç±»å‹çš„ <code>API</code>ï¼Œæ•°æ®ã€æ–¹æ³•ã€è®¡ç®—å±æ€§ç­‰ï¼Œæ˜¯åˆ†æ•£åœ¨ï¼š<code>data</code>ã€<code>methods</code>ã€<code>computed</code>ä¸­çš„ï¼Œè‹¥æƒ³æ–°å¢æˆ–è€…ä¿®æ”¹ä¸€ä¸ªéœ€æ±‚ï¼Œå°±éœ€è¦åˆ†åˆ«ä¿®æ”¹ï¼š<code>data</code>ã€<code>methods</code>ã€<code>computed</code>ï¼Œä¸ä¾¿äºç»´æŠ¤å’Œå¤ç”¨ã€‚</p><p><img src="images/1696662197101-55d2b251-f6e5-47f4-b3f1-d8531bbf9279.gif" alt="1.gif" style="zoom:70%;border-radius:20px" /><img src="images/1696662200734-1bad8249-d7a2-423e-a3c3-ab4c110628be.gif" alt="2.gif" style="zoom:70%;border-radius:20px" /></p><h3 id="Composition-API-çš„ä¼˜åŠ¿"><a href="#Composition-API-çš„ä¼˜åŠ¿" class="headerlink" title="Composition API çš„ä¼˜åŠ¿"></a>Composition API çš„ä¼˜åŠ¿</h3><p>å¯ä»¥ç”¨å‡½æ•°çš„æ–¹å¼ï¼Œæ›´åŠ ä¼˜é›…çš„ç»„ç»‡ä»£ç ï¼Œè®©ç›¸å…³åŠŸèƒ½çš„ä»£ç æ›´åŠ æœ‰åºçš„ç»„ç»‡åœ¨ä¸€èµ·ã€‚</p><p><img src="images/1696662249851-db6403a1-acb5-481a-88e0-e1e34d2ef53a.gif" alt="3.gif" style="height:300px;border-radius:10px"  /><img src="images/1696662256560-7239b9f9-a770-43c1-9386-6cc12ef1e9c0.gif" alt="4.gif" style="height:300px;border-radius:10px"  /></p><blockquote><p>è¯´æ˜ï¼šä»¥ä¸Šå››å¼ åŠ¨å›¾åŸåˆ›ä½œè€…ï¼šå¤§å¸…è€çŒ¿</p></blockquote><h2 id="3-2-ã€æ‹‰å¼€åºå¹•çš„-setupã€‘"><a href="#3-2-ã€æ‹‰å¼€åºå¹•çš„-setupã€‘" class="headerlink" title="3.2. ã€æ‹‰å¼€åºå¹•çš„ setupã€‘"></a>3.2. ã€æ‹‰å¼€åºå¹•çš„ setupã€‘</h2><h3 id="setup-æ¦‚è¿°"><a href="#setup-æ¦‚è¿°" class="headerlink" title="setup æ¦‚è¿°"></a>setup æ¦‚è¿°</h3><p><code>setup</code>æ˜¯<code>Vue3</code>ä¸­ä¸€ä¸ªæ–°çš„é…ç½®é¡¹ï¼Œå€¼æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ˜¯ <code>Composition API</code> <strong>â€œè¡¨æ¼”çš„èˆå°</strong>_<strong>â€</strong>_ï¼Œç»„ä»¶ä¸­æ‰€ç”¨åˆ°çš„ï¼šæ•°æ®ã€æ–¹æ³•ã€è®¡ç®—å±æ€§ã€ç›‘è§†â€¦â€¦ç­‰ç­‰ï¼Œå‡é…ç½®åœ¨<code>setup</code>ä¸­ã€‚</p><p>ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p><ul><li><code>setup</code>å‡½æ•°è¿”å›çš„å¯¹è±¡ä¸­çš„å†…å®¹ï¼Œå¯ç›´æ¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ã€‚</li><li><code>setup</code>ä¸­è®¿é—®<code>this</code>æ˜¯<code>undefined</code>ã€‚</li><li><code>setup</code>å‡½æ•°ä¼šåœ¨<code>beforeCreate</code>ä¹‹å‰è°ƒç”¨ï¼Œå®ƒæ˜¯â€œé¢†å…ˆâ€æ‰€æœ‰é’©å­æ‰§è¡Œçš„ã€‚<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;person&quot;&gt;<br>    &lt;h2&gt;å§“åï¼š&#123;&#123;name&#125;&#125;&lt;/h2&gt;<br>    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123;age&#125;&#125;&lt;/h2&gt;<br>    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;<br>    &lt;button @click=&quot;changeAge&quot;&gt;å¹´é¾„+1&lt;/button&gt;<br>    &lt;button @click=&quot;showTel&quot;&gt;ç‚¹æˆ‘æŸ¥çœ‹è”ç³»æ–¹å¼&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script lang=&quot;ts&quot;&gt;<br>  export default &#123;<br>    name:&#x27;Person&#x27;,<br>    setup()&#123;<br>      // æ•°æ®ï¼ŒåŸæ¥å†™åœ¨dataä¸­ï¼ˆæ³¨æ„ï¼šæ­¤æ—¶çš„nameã€ageã€telæ•°æ®éƒ½ä¸æ˜¯å“åº”å¼æ•°æ®ï¼‰<br>      let name = &#x27;å¼ ä¸‰&#x27;<br>      let age = 18<br>      let tel = &#x27;13888888888&#x27;<br><br>      // æ–¹æ³•ï¼ŒåŸæ¥å†™åœ¨methodsä¸­<br>      function changeName()&#123;<br>        name = &#x27;zhang-san&#x27; //æ³¨æ„ï¼šæ­¤æ—¶è¿™ä¹ˆä¿®æ”¹nameé¡µé¢æ˜¯ä¸å˜åŒ–çš„<br>        console.log(name)<br>      &#125;<br>      function changeAge()&#123;<br>        age += 1 //æ³¨æ„ï¼šæ­¤æ—¶è¿™ä¹ˆä¿®æ”¹ageé¡µé¢æ˜¯ä¸å˜åŒ–çš„<br>        console.log(age)<br>      &#125;<br>      function showTel()&#123;<br>        alert(tel)<br>      &#125;<br><br>      // è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ä¸­çš„å†…å®¹ï¼Œæ¨¡æ¿ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨<br>      return &#123;name,age,tel,changeName,changeAge,showTel&#125;<br>    &#125;<br>  &#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure></li></ul><h3 id="setup-çš„è¿”å›å€¼"><a href="#setup-çš„è¿”å›å€¼" class="headerlink" title="setup çš„è¿”å›å€¼"></a>setup çš„è¿”å›å€¼</h3><ul><li>è‹¥è¿”å›ä¸€ä¸ª<strong>å¯¹è±¡</strong>ï¼šåˆ™å¯¹è±¡ä¸­çš„ï¼šå±æ€§ã€æ–¹æ³•ç­‰ï¼Œåœ¨æ¨¡æ¿ä¸­å‡å¯ä»¥ç›´æ¥ä½¿ç”¨<strong>ï¼ˆé‡ç‚¹å…³æ³¨ï¼‰ã€‚</strong></li><li>è‹¥è¿”å›ä¸€ä¸ª<strong>å‡½æ•°</strong>ï¼šåˆ™å¯ä»¥è‡ªå®šä¹‰æ¸²æŸ“å†…å®¹ï¼Œä»£ç å¦‚ä¸‹ï¼š<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>)&#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-function">()=&gt;</span> <span class="hljs-string">&#x27;ä½ å¥½å•Šï¼&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure></li></ul><h3 id="setup-ä¸-Options-API-çš„å…³ç³»"><a href="#setup-ä¸-Options-API-çš„å…³ç³»" class="headerlink" title="setup ä¸ Options API çš„å…³ç³»"></a>setup ä¸ Options API çš„å…³ç³»</h3><ul><li><code>Vue2</code> çš„é…ç½®ï¼ˆ<code>data</code>ã€<code>methos</code>â€¦â€¦ï¼‰ä¸­<strong>å¯ä»¥è®¿é—®åˆ°</strong> <code>setup</code>ä¸­çš„å±æ€§ã€æ–¹æ³•ã€‚</li><li>ä½†åœ¨<code>setup</code>ä¸­<strong>ä¸èƒ½è®¿é—®åˆ°</strong><code>Vue2</code>çš„é…ç½®ï¼ˆ<code>data</code>ã€<code>methos</code>â€¦â€¦ï¼‰ã€‚</li><li>å¦‚æœä¸<code>Vue2</code>å†²çªï¼Œåˆ™<code>setup</code>ä¼˜å…ˆã€‚</li></ul><h3 id="setup-è¯­æ³•ç³–"><a href="#setup-è¯­æ³•ç³–" class="headerlink" title="setup è¯­æ³•ç³–"></a>setup è¯­æ³•ç³–</h3><p><code>setup</code>å‡½æ•°æœ‰ä¸€ä¸ªè¯­æ³•ç³–ï¼Œè¿™ä¸ªè¯­æ³•ç³–ï¼Œå¯ä»¥è®©æˆ‘ä»¬æŠŠ<code>setup</code>ç‹¬ç«‹å‡ºå»ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;person&quot;&gt;<br>    &lt;h2&gt;å§“åï¼š&#123;&#123;name&#125;&#125;&lt;/h2&gt;<br>    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123;age&#125;&#125;&lt;/h2&gt;<br>    &lt;button @click=&quot;changName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;<br>    &lt;button @click=&quot;changAge&quot;&gt;å¹´é¾„+1&lt;/button&gt;<br>    &lt;button @click=&quot;showTel&quot;&gt;ç‚¹æˆ‘æŸ¥çœ‹è”ç³»æ–¹å¼&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script lang=&quot;ts&quot;&gt;<br>  export default &#123;<br>    name:&#x27;Person&#x27;,<br>  &#125;<br>&lt;/script&gt;<br><br>&lt;!-- ä¸‹é¢çš„å†™æ³•æ˜¯setupè¯­æ³•ç³– --&gt;<br>&lt;script setup lang=&quot;ts&quot;&gt;<br>  console.log(this) //undefined<br>  <br>  // æ•°æ®ï¼ˆæ³¨æ„ï¼šæ­¤æ—¶çš„nameã€ageã€teléƒ½ä¸æ˜¯å“åº”å¼æ•°æ®ï¼‰<br>  let name = &#x27;å¼ ä¸‰&#x27;<br>  let age = 18<br>  let tel = &#x27;13888888888&#x27;<br><br>  // æ–¹æ³•<br>  function changName()&#123;<br>    name = &#x27;æå››&#x27;//æ³¨æ„ï¼šæ­¤æ—¶è¿™ä¹ˆä¿®æ”¹nameé¡µé¢æ˜¯ä¸å˜åŒ–çš„<br>  &#125;<br>  function changAge()&#123;<br>    console.log(age)<br>    age += 1 //æ³¨æ„ï¼šæ­¤æ—¶è¿™ä¹ˆä¿®æ”¹ageé¡µé¢æ˜¯ä¸å˜åŒ–çš„<br>  &#125;<br>  function showTel()&#123;<br>    alert(tel)<br>  &#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>æ‰©å±•ï¼šä¸Šè¿°ä»£ç ï¼Œè¿˜éœ€è¦ç¼–å†™ä¸€ä¸ªä¸å†™<code>setup</code>çš„<code>script</code>æ ‡ç­¾ï¼Œå»æŒ‡å®šç»„ä»¶åå­—ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©<code>vite</code>ä¸­çš„æ’ä»¶ç®€åŒ–</p><ol><li><p>ç¬¬ä¸€æ­¥ï¼š<code>npm i vite-plugin-vue-setup-extend -D</code></p></li><li><p>ç¬¬äºŒæ­¥ï¼š<code>vite.config.ts</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; defineConfig &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vite&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">VueSetupExtend</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vite-plugin-vue-setup-extend&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(&#123;<br>  <span class="hljs-attr">plugins</span>: [ <span class="hljs-title class_">VueSetupExtend</span>() ]<br>&#125;)<br></code></pre></td></tr></table></figure></li><li><p>ç¬¬ä¸‰æ­¥ï¼š<code>&lt;script setup lang=&quot;ts&quot; name=&quot;Person&quot;&gt;</code></p></li></ol><h2 id="3-3-ã€ref-åˆ›å»ºï¼šåŸºæœ¬ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘"><a href="#3-3-ã€ref-åˆ›å»ºï¼šåŸºæœ¬ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘" class="headerlink" title="3.3. ã€ref åˆ›å»ºï¼šåŸºæœ¬ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘"></a>3.3. ã€ref åˆ›å»ºï¼šåŸºæœ¬ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘</h2><ul><li><strong>ä½œç”¨ï¼š</strong>å®šä¹‰å“åº”å¼å˜é‡ã€‚</li><li><strong>è¯­æ³•ï¼š</strong><code>let xxx = ref(åˆå§‹å€¼)</code>ã€‚</li><li><strong>è¿”å›å€¼ï¼š</strong>ä¸€ä¸ª<code>RefImpl</code>çš„å®ä¾‹å¯¹è±¡ï¼Œç®€ç§°<code>refå¯¹è±¡</code>æˆ–<code>ref</code>ï¼Œ<code>ref</code>å¯¹è±¡çš„<code>value</code><strong>å±æ€§æ˜¯å“åº”å¼çš„</strong>ã€‚</li><li><strong>æ³¨æ„ç‚¹ï¼š</strong><ul><li><code>JS</code>ä¸­æ“ä½œæ•°æ®éœ€è¦ï¼š<code>xxx.value</code>ï¼Œä½†æ¨¡æ¿ä¸­ä¸éœ€è¦<code>.value</code>ï¼Œç›´æ¥ä½¿ç”¨å³å¯ã€‚</li><li>å¯¹äº<code>let name = ref(&#39;å¼ ä¸‰&#39;)</code>æ¥è¯´ï¼Œ<code>name</code>ä¸æ˜¯å“åº”å¼çš„ï¼Œ<code>name.value</code>æ˜¯å“åº”å¼çš„ã€‚<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;person&quot;&gt;<br>    &lt;h2&gt;å§“åï¼š&#123;&#123;name&#125;&#125;&lt;/h2&gt;<br>    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123;age&#125;&#125;&lt;/h2&gt;<br>    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;<br>    &lt;button @click=&quot;changeAge&quot;&gt;å¹´é¾„+1&lt;/button&gt;<br>    &lt;button @click=&quot;showTel&quot;&gt;ç‚¹æˆ‘æŸ¥çœ‹è”ç³»æ–¹å¼&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&quot;ts&quot; name=&quot;Person&quot;&gt;<br>  import &#123;ref&#125; from &#x27;vue&#x27;<br>  // nameå’Œageæ˜¯ä¸€ä¸ªRefImplçš„å®ä¾‹å¯¹è±¡ï¼Œç®€ç§°refå¯¹è±¡ï¼Œå®ƒä»¬çš„valueå±æ€§æ˜¯å“åº”å¼çš„ã€‚<br>  let name = ref(&#x27;å¼ ä¸‰&#x27;)<br>  let age = ref(18)<br>  // telå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„å­—ç¬¦ä¸²ï¼Œä¸æ˜¯å“åº”å¼çš„<br>  let tel = &#x27;13888888888&#x27;<br><br>  function changeName()&#123;<br>    // JSä¸­æ“ä½œrefå¯¹è±¡æ—¶å€™éœ€è¦.value<br>    name.value = &#x27;æå››&#x27;<br>    console.log(name.value)<br><br>    // æ³¨æ„ï¼šnameä¸æ˜¯å“åº”å¼çš„ï¼Œname.valueæ˜¯å“åº”å¼çš„ï¼Œæ‰€ä»¥å¦‚ä¸‹ä»£ç å¹¶ä¸ä¼šå¼•èµ·é¡µé¢çš„æ›´æ–°ã€‚<br>    // name = ref(&#x27;zhang-san&#x27;)<br>  &#125;<br>  function changeAge()&#123;<br>    // JSä¸­æ“ä½œrefå¯¹è±¡æ—¶å€™éœ€è¦.value<br>    age.value += 1 <br>    console.log(age.value)<br>  &#125;<br>  function showTel()&#123;<br>    alert(tel)<br>  &#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure></li></ul></li></ul><h2 id="3-4-ã€reactive-åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘"><a href="#3-4-ã€reactive-åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘" class="headerlink" title="3.4. ã€reactive åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘"></a>3.4. ã€reactive åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘</h2><ul><li><strong>ä½œç”¨ï¼š</strong>å®šä¹‰ä¸€ä¸ª<strong>å“åº”å¼å¯¹è±¡</strong>ï¼ˆåŸºæœ¬ç±»å‹ä¸è¦ç”¨å®ƒï¼Œè¦ç”¨<code>ref</code>ï¼Œå¦åˆ™æŠ¥é”™ï¼‰</li><li><strong>è¯­æ³•ï¼š</strong><code>let å“åº”å¼å¯¹è±¡= reactive(æºå¯¹è±¡)</code>ã€‚</li><li><strong>è¿”å›å€¼ï¼š</strong>ä¸€ä¸ª<code>Proxy</code>çš„å®ä¾‹å¯¹è±¡ï¼Œç®€ç§°ï¼šå“åº”å¼å¯¹è±¡ã€‚</li><li><strong>æ³¨æ„ç‚¹ï¼š</strong><code>reactive</code>å®šä¹‰çš„å“åº”å¼æ•°æ®æ˜¯â€œæ·±å±‚æ¬¡â€çš„ã€‚<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;person&quot;&gt;<br>    &lt;h2&gt;æ±½è½¦ä¿¡æ¯ï¼šä¸€å°&#123;&#123; car.brand &#125;&#125;æ±½è½¦ï¼Œä»·å€¼&#123;&#123; car.price &#125;&#125;ä¸‡&lt;/h2&gt;<br>    &lt;h2&gt;æ¸¸æˆåˆ—è¡¨ï¼š&lt;/h2&gt;<br>    &lt;ul&gt;<br>      &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;<br>    &lt;/ul&gt;<br>    &lt;h2&gt;æµ‹è¯•ï¼š&#123;&#123;obj.a.b.c.d&#125;&#125;&lt;/h2&gt;<br>    &lt;button @click=&quot;changeCarPrice&quot;&gt;ä¿®æ”¹æ±½è½¦ä»·æ ¼&lt;/button&gt;<br>    &lt;button @click=&quot;changeFirstGame&quot;&gt;ä¿®æ”¹ç¬¬ä¸€æ¸¸æˆ&lt;/button&gt;<br>    &lt;button @click=&quot;test&quot;&gt;æµ‹è¯•&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;<br>import &#123; reactive &#125; from &#x27;vue&#x27;<br><br>// æ•°æ®<br>let car = reactive(&#123; brand: &#x27;å¥”é©°&#x27;, price: 100 &#125;)<br>let games = reactive([<br>  &#123; id: &#x27;ahsgdyfa01&#x27;, name: &#x27;è‹±é›„è”ç›Ÿ&#x27; &#125;,<br>  &#123; id: &#x27;ahsgdyfa02&#x27;, name: &#x27;ç‹è€…è£è€€&#x27; &#125;,<br>  &#123; id: &#x27;ahsgdyfa03&#x27;, name: &#x27;åŸç¥&#x27; &#125;<br>])<br>let obj = reactive(&#123;<br>  a:&#123;<br>    b:&#123;<br>      c:&#123;<br>        d:666<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;)<br><br>function changeCarPrice() &#123;<br>  car.price += 10<br>&#125;<br>function changeFirstGame() &#123;<br>  games[0].name = &#x27;æµæ˜Ÿè´è¶å‰‘&#x27;<br>&#125;<br>function test()&#123;<br>  obj.a.b.c.d = 999<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure></li></ul><h2 id="3-5-ã€ref-åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘"><a href="#3-5-ã€ref-åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘" class="headerlink" title="3.5. ã€ref åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘"></a>3.5. ã€ref åˆ›å»ºï¼šå¯¹è±¡ç±»å‹çš„å“åº”å¼æ•°æ®ã€‘</h2><ul><li>å…¶å®<code>ref</code>æ¥æ”¶çš„æ•°æ®å¯ä»¥æ˜¯ï¼š<strong>åŸºæœ¬ç±»å‹</strong>ã€<strong>å¯¹è±¡ç±»å‹</strong>ã€‚</li><li>è‹¥<code>ref</code>æ¥æ”¶çš„æ˜¯å¯¹è±¡ç±»å‹ï¼Œå†…éƒ¨å…¶å®ä¹Ÿæ˜¯è°ƒç”¨äº†<code>reactive</code>å‡½æ•°ã€‚<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;person&quot;&gt;<br>    &lt;h2&gt;æ±½è½¦ä¿¡æ¯ï¼šä¸€å°&#123;&#123; car.brand &#125;&#125;æ±½è½¦ï¼Œä»·å€¼&#123;&#123; car.price &#125;&#125;ä¸‡&lt;/h2&gt;<br>    &lt;h2&gt;æ¸¸æˆåˆ—è¡¨ï¼š&lt;/h2&gt;<br>    &lt;ul&gt;<br>      &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;<br>    &lt;/ul&gt;<br>    &lt;h2&gt;æµ‹è¯•ï¼š&#123;&#123;obj.a.b.c.d&#125;&#125;&lt;/h2&gt;<br>    &lt;button @click=&quot;changeCarPrice&quot;&gt;ä¿®æ”¹æ±½è½¦ä»·æ ¼&lt;/button&gt;<br>    &lt;button @click=&quot;changeFirstGame&quot;&gt;ä¿®æ”¹ç¬¬ä¸€æ¸¸æˆ&lt;/button&gt;<br>    &lt;button @click=&quot;test&quot;&gt;æµ‹è¯•&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;<br>import &#123; ref &#125; from &#x27;vue&#x27;<br><br>// æ•°æ®<br>let car = ref(&#123; brand: &#x27;å¥”é©°&#x27;, price: 100 &#125;)<br>let games = ref([<br>  &#123; id: &#x27;ahsgdyfa01&#x27;, name: &#x27;è‹±é›„è”ç›Ÿ&#x27; &#125;,<br>  &#123; id: &#x27;ahsgdyfa02&#x27;, name: &#x27;ç‹è€…è£è€€&#x27; &#125;,<br>  &#123; id: &#x27;ahsgdyfa03&#x27;, name: &#x27;åŸç¥&#x27; &#125;<br>])<br>let obj = ref(&#123;<br>  a:&#123;<br>    b:&#123;<br>      c:&#123;<br>        d:666<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;)<br><br>console.log(car)<br><br>function changeCarPrice() &#123;<br>  car.value.price += 10<br>&#125;<br>function changeFirstGame() &#123;<br>  games.value[0].name = &#x27;æµæ˜Ÿè´è¶å‰‘&#x27;<br>&#125;<br>function test()&#123;<br>  obj.value.a.b.c.d = 999<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure></li></ul><h2 id="3-6-ã€ref-å¯¹æ¯”-reactiveã€‘"><a href="#3-6-ã€ref-å¯¹æ¯”-reactiveã€‘" class="headerlink" title="3.6. ã€ref å¯¹æ¯” reactiveã€‘"></a>3.6. ã€ref å¯¹æ¯” reactiveã€‘</h2><p>å®è§‚è§’åº¦çœ‹ï¼š</p><blockquote><ol><li><p><code>ref</code>ç”¨æ¥å®šä¹‰ï¼š<strong>åŸºæœ¬ç±»å‹æ•°æ®</strong>ã€<strong>å¯¹è±¡ç±»å‹æ•°æ®</strong>ï¼›</p></li><li><p><code>reactive</code>ç”¨æ¥å®šä¹‰ï¼š<strong>å¯¹è±¡ç±»å‹æ•°æ®</strong>ã€‚</p></li></ol></blockquote><ul><li>åŒºåˆ«ï¼š</li></ul><blockquote><ol><li><p><code>ref</code>åˆ›å»ºçš„å˜é‡å¿…é¡»ä½¿ç”¨<code>.value</code>ï¼ˆå¯ä»¥ä½¿ç”¨<code>volar</code>æ’ä»¶è‡ªåŠ¨æ·»åŠ <code>.value</code>ï¼‰ã€‚</p><img src="images/è‡ªåŠ¨è¡¥å……value.png" alt="è‡ªåŠ¨è¡¥å……value" style="zoom:50%;border-radius:20px" /> </li><li><p><code>reactive</code>é‡æ–°åˆ†é…ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä¼š<strong>å¤±å»</strong>å“åº”å¼ï¼ˆå¯ä»¥ä½¿ç”¨<code>Object.assign</code>å»æ•´ä½“æ›¿æ¢ï¼‰ã€‚</p></li></ol></blockquote><ul><li>ä½¿ç”¨åŸåˆ™ï¼š<blockquote><ol><li>è‹¥éœ€è¦ä¸€ä¸ªåŸºæœ¬ç±»å‹çš„å“åº”å¼æ•°æ®ï¼Œå¿…é¡»ä½¿ç”¨<code>ref</code>ã€‚</li><li>è‹¥éœ€è¦ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œå±‚çº§ä¸æ·±ï¼Œ<code>ref</code>ã€<code>reactive</code>éƒ½å¯ä»¥ã€‚</li><li>è‹¥éœ€è¦ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œä¸”å±‚çº§è¾ƒæ·±ï¼Œæ¨èä½¿ç”¨<code>reactive</code>ã€‚</li></ol></blockquote></li></ul><h2 id="3-7-ã€toRefs-ä¸-toRefã€‘"><a href="#3-7-ã€toRefs-ä¸-toRefã€‘" class="headerlink" title="3.7. ã€toRefs ä¸ toRefã€‘"></a>3.7. ã€toRefs ä¸ toRefã€‘</h2><ul><li>ä½œç”¨ï¼šå°†ä¸€ä¸ªå“åº”å¼å¯¹è±¡ä¸­çš„æ¯ä¸€ä¸ªå±æ€§ï¼Œè½¬æ¢ä¸º<code>ref</code>å¯¹è±¡ã€‚</li><li>å¤‡æ³¨ï¼š<code>toRefs</code>ä¸<code>toRef</code>åŠŸèƒ½ä¸€è‡´ï¼Œä½†<code>toRefs</code>å¯ä»¥æ‰¹é‡è½¬æ¢ã€‚</li><li>è¯­æ³•å¦‚ä¸‹ï¼š<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;person&quot;&gt;<br>    &lt;h2&gt;å§“åï¼š&#123;&#123;person.name&#125;&#125;&lt;/h2&gt;<br>    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123;person.age&#125;&#125;&lt;/h2&gt;<br>    &lt;h2&gt;æ€§åˆ«ï¼š&#123;&#123;person.gender&#125;&#125;&lt;/h2&gt;<br>    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;<br>    &lt;button @click=&quot;changeAge&quot;&gt;ä¿®æ”¹å¹´é¾„&lt;/button&gt;<br>    &lt;button @click=&quot;changeGender&quot;&gt;ä¿®æ”¹æ€§åˆ«&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;<br>  import &#123;ref,reactive,toRefs,toRef&#125; from &#x27;vue&#x27;<br><br>  // æ•°æ®<br>  let person = reactive(&#123;name:&#x27;å¼ ä¸‰&#x27;, age:18, gender:&#x27;ç”·&#x27;&#125;)<br><br>  // é€šè¿‡toRefså°†personå¯¹è±¡ä¸­çš„nä¸ªå±æ€§æ‰¹é‡å–å‡ºï¼Œä¸”ä¾ç„¶ä¿æŒå“åº”å¼çš„èƒ½åŠ›<br>  let &#123;name,gender&#125; =  toRefs(person)<br><br>  // é€šè¿‡toRefå°†personå¯¹è±¡ä¸­çš„genderå±æ€§å–å‡ºï¼Œä¸”ä¾ç„¶ä¿æŒå“åº”å¼çš„èƒ½åŠ›<br>  let age = toRef(person,&#x27;age&#x27;)<br><br>  // æ–¹æ³•<br>  function changeName()&#123;<br>    name.value += &#x27;~&#x27;<br>  &#125;<br>  function changeAge()&#123;<br>    age.value += 1<br>  &#125;<br>  function changeGender()&#123;<br>    gender.value = &#x27;å¥³&#x27;<br>  &#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure></li></ul><h2 id="3-8-ã€computedã€‘"><a href="#3-8-ã€computedã€‘" class="headerlink" title="3.8. ã€computedã€‘"></a>3.8. ã€computedã€‘</h2><p>ä½œç”¨ï¼šæ ¹æ®å·²æœ‰æ•°æ®è®¡ç®—å‡ºæ–°æ•°æ®ï¼ˆå’Œ<code>Vue2</code>ä¸­çš„<code>computed</code>ä½œç”¨ä¸€è‡´ï¼‰ã€‚</p><img src="images/computed.gif" style="zoom:20%;" />  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;person&quot;&gt;<br>    å§“ï¼š&lt;input type=&quot;text&quot; v-model=&quot;firstName&quot;&gt; &lt;br&gt;<br>    åï¼š&lt;input type=&quot;text&quot; v-model=&quot;lastName&quot;&gt; &lt;br&gt;<br>    å…¨åï¼š&lt;span&gt;&#123;&#123;fullName&#125;&#125;&lt;/span&gt; &lt;br&gt;<br>    &lt;button @click=&quot;changeFullName&quot;&gt;å…¨åæ”¹ä¸ºï¼šli-si&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&quot;ts&quot; name=&quot;App&quot;&gt;<br>  import &#123;ref,computed&#125; from &#x27;vue&#x27;<br><br>  let firstName = ref(&#x27;zhang&#x27;)<br>  let lastName = ref(&#x27;san&#x27;)<br><br>  // è®¡ç®—å±æ€§â€”â€”åªè¯»å–ï¼Œä¸ä¿®æ”¹<br>  /* let fullName = computed(()=&gt;&#123;<br>    return firstName.value + &#x27;-&#x27; + lastName.value<br>  &#125;) */<br><br><br>  // è®¡ç®—å±æ€§â€”â€”æ—¢è¯»å–åˆä¿®æ”¹<br>  let fullName = computed(&#123;<br>    // è¯»å–<br>    get()&#123;<br>      return firstName.value + &#x27;-&#x27; + lastName.value<br>    &#125;,<br>    // ä¿®æ”¹<br>    set(val)&#123;<br>      console.log(&#x27;æœ‰äººä¿®æ”¹äº†fullName&#x27;,val)<br>      firstName.value = val.split(&#x27;-&#x27;)[0]<br>      lastName.value = val.split(&#x27;-&#x27;)[1]<br>    &#125;<br>  &#125;)<br><br>  function changeFullName()&#123;<br>    fullName.value = &#x27;li-si&#x27;<br>  &#125; <br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h2 id="3-9-ã€watchã€‘"><a href="#3-9-ã€watchã€‘" class="headerlink" title="3.9.ã€watchã€‘"></a>3.9.ã€watchã€‘</h2><ul><li>ä½œç”¨ï¼šç›‘è§†æ•°æ®çš„å˜åŒ–ï¼ˆå’Œ<code>Vue2</code>ä¸­çš„<code>watch</code>ä½œç”¨ä¸€è‡´ï¼‰</li><li>ç‰¹ç‚¹ï¼š<code>Vue3</code>ä¸­çš„<code>watch</code>åªèƒ½ç›‘è§†ä»¥ä¸‹<strong>å››ç§æ•°æ®</strong>ï¼š<blockquote><ol><li><code>ref</code>å®šä¹‰çš„æ•°æ®ã€‚</li><li><code>reactive</code>å®šä¹‰çš„æ•°æ®ã€‚</li><li>å‡½æ•°è¿”å›ä¸€ä¸ªå€¼ï¼ˆ<code>getter</code>å‡½æ•°ï¼‰ã€‚</li><li>ä¸€ä¸ªåŒ…å«ä¸Šè¿°å†…å®¹çš„æ•°ç»„ã€‚</li></ol></blockquote></li></ul><p>æˆ‘ä»¬åœ¨<code>Vue3</code>ä¸­ä½¿ç”¨<code>watch</code>çš„æ—¶å€™ï¼Œé€šå¸¸ä¼šé‡åˆ°ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p><h3 id="æƒ…å†µä¸€"><a href="#æƒ…å†µä¸€" class="headerlink" title="* æƒ…å†µä¸€"></a>* æƒ…å†µä¸€</h3><p>ç›‘è§†<code>ref</code>å®šä¹‰çš„ã€åŸºæœ¬ç±»å‹ã€‘æ•°æ®ï¼šç›´æ¥å†™æ•°æ®åå³å¯ï¼Œç›‘è§†çš„æ˜¯å…¶<code>value</code>å€¼çš„æ”¹å˜ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;person&quot;&gt;<br>    &lt;h1&gt;æƒ…å†µä¸€ï¼šç›‘è§†ã€refã€‘å®šä¹‰çš„ã€åŸºæœ¬ç±»å‹ã€‘æ•°æ®&lt;/h1&gt;<br>    &lt;h2&gt;å½“å‰æ±‚å’Œä¸ºï¼š&#123;&#123;sum&#125;&#125;&lt;/h2&gt;<br>    &lt;button @click=&quot;changeSum&quot;&gt;ç‚¹æˆ‘sum+1&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;<br>  import &#123;ref,watch&#125; from &#x27;vue&#x27;<br>  // æ•°æ®<br>  let sum = ref(0)<br>  // æ–¹æ³•<br>  function changeSum()&#123;<br>    sum.value += 1<br>  &#125;<br>  // ç›‘è§†ï¼Œæƒ…å†µä¸€ï¼šç›‘è§†ã€refã€‘å®šä¹‰çš„ã€åŸºæœ¬ç±»å‹ã€‘æ•°æ®<br>  const stopWatch = watch(sum,(newValue,oldValue)=&gt;&#123;<br>    console.log(&#x27;sumå˜åŒ–äº†&#x27;,newValue,oldValue)<br>    if(newValue &gt;= 10)&#123;<br>      stopWatch()<br>    &#125;<br>  &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h3 id="æƒ…å†µäºŒ"><a href="#æƒ…å†µäºŒ" class="headerlink" title="* æƒ…å†µäºŒ"></a>* æƒ…å†µäºŒ</h3><p>ç›‘è§†<code>ref</code>å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ï¼šç›´æ¥å†™æ•°æ®åï¼Œç›‘è§†çš„æ˜¯å¯¹è±¡çš„ã€åœ°å€å€¼ã€‘ï¼Œè‹¥æƒ³ç›‘è§†å¯¹è±¡å†…éƒ¨çš„æ•°æ®ï¼Œè¦æ‰‹åŠ¨å¼€å¯æ·±åº¦ç›‘è§†ã€‚</p><blockquote><p>æ³¨æ„ï¼š</p><ul><li><p>è‹¥ä¿®æ”¹çš„æ˜¯<code>ref</code>å®šä¹‰çš„å¯¹è±¡ä¸­çš„å±æ€§ï¼Œ<code>newValue</code> å’Œ <code>oldValue</code> éƒ½æ˜¯æ–°å€¼ï¼Œå› ä¸ºå®ƒä»¬æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚</p></li><li><p>è‹¥ä¿®æ”¹æ•´ä¸ª<code>ref</code>å®šä¹‰çš„å¯¹è±¡ï¼Œ<code>newValue</code> æ˜¯æ–°å€¼ï¼Œ <code>oldValue</code> æ˜¯æ—§å€¼ï¼Œå› ä¸ºä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡äº†ã€‚</p></li></ul></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;person&quot;&gt;<br>    &lt;h1&gt;æƒ…å†µäºŒï¼šç›‘è§†ã€refã€‘å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®&lt;/h1&gt;<br>    &lt;h2&gt;å§“åï¼š&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;<br>    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123; person.age &#125;&#125;&lt;/h2&gt;<br>    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;<br>    &lt;button @click=&quot;changeAge&quot;&gt;ä¿®æ”¹å¹´é¾„&lt;/button&gt;<br>    &lt;button @click=&quot;changePerson&quot;&gt;ä¿®æ”¹æ•´ä¸ªäºº&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;<br>  import &#123;ref,watch&#125; from &#x27;vue&#x27;<br>  // æ•°æ®<br>  let person = ref(&#123;<br>    name:&#x27;å¼ ä¸‰&#x27;,<br>    age:18<br>  &#125;)<br>  // æ–¹æ³•<br>  function changeName()&#123;<br>    person.value.name += &#x27;~&#x27;<br>  &#125;<br>  function changeAge()&#123;<br>    person.value.age += 1<br>  &#125;<br>  function changePerson()&#123;<br>    person.value = &#123;name:&#x27;æå››&#x27;,age:90&#125;<br>  &#125;<br>  /* <br>    ç›‘è§†ï¼Œæƒ…å†µä¸€ï¼šç›‘è§†ã€refã€‘å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ï¼Œç›‘è§†çš„æ˜¯å¯¹è±¡çš„åœ°å€å€¼ï¼Œè‹¥æƒ³ç›‘è§†å¯¹è±¡å†…éƒ¨å±æ€§çš„å˜åŒ–ï¼Œéœ€è¦æ‰‹åŠ¨å¼€å¯æ·±åº¦ç›‘è§†<br>    watchçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ï¼šè¢«ç›‘è§†çš„æ•°æ®<br>    watchçš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ï¼šç›‘è§†çš„å›è°ƒ<br>    watchçš„ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ï¼šé…ç½®å¯¹è±¡ï¼ˆdeepã€immediateç­‰ç­‰.....ï¼‰ <br>  */<br>  watch(person,(newValue,oldValue)=&gt;&#123;<br>    console.log(&#x27;personå˜åŒ–äº†&#x27;,newValue,oldValue)<br>  &#125;,&#123;deep:true&#125;)<br>  <br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h3 id="æƒ…å†µä¸‰"><a href="#æƒ…å†µä¸‰" class="headerlink" title="*  æƒ…å†µä¸‰"></a>*  æƒ…å†µä¸‰</h3><p>ç›‘è§†<code>reactive</code>å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ï¼Œä¸”é»˜è®¤å¼€å¯äº†æ·±åº¦ç›‘è§†ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;person&quot;&gt;<br>    &lt;h1&gt;æƒ…å†µä¸‰ï¼šç›‘è§†ã€reactiveã€‘å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®&lt;/h1&gt;<br>    &lt;h2&gt;å§“åï¼š&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;<br>    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123; person.age &#125;&#125;&lt;/h2&gt;<br>    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;<br>    &lt;button @click=&quot;changeAge&quot;&gt;ä¿®æ”¹å¹´é¾„&lt;/button&gt;<br>    &lt;button @click=&quot;changePerson&quot;&gt;ä¿®æ”¹æ•´ä¸ªäºº&lt;/button&gt;<br>    &lt;hr&gt;<br>    &lt;h2&gt;æµ‹è¯•ï¼š&#123;&#123;obj.a.b.c&#125;&#125;&lt;/h2&gt;<br>    &lt;button @click=&quot;test&quot;&gt;ä¿®æ”¹obj.a.b.c&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;<br>  import &#123;reactive,watch&#125; from &#x27;vue&#x27;<br>  // æ•°æ®<br>  let person = reactive(&#123;<br>    name:&#x27;å¼ ä¸‰&#x27;,<br>    age:18<br>  &#125;)<br>  let obj = reactive(&#123;<br>    a:&#123;<br>      b:&#123;<br>        c:666<br>      &#125;<br>    &#125;<br>  &#125;)<br>  // æ–¹æ³•<br>  function changeName()&#123;<br>    person.name += &#x27;~&#x27;<br>  &#125;<br>  function changeAge()&#123;<br>    person.age += 1<br>  &#125;<br>  function changePerson()&#123;<br>    Object.assign(person,&#123;name:&#x27;æå››&#x27;,age:80&#125;)<br>  &#125;<br>  function test()&#123;<br>    obj.a.b.c = 888<br>  &#125;<br><br>  // ç›‘è§†ï¼Œæƒ…å†µä¸‰ï¼šç›‘è§†ã€reactiveã€‘å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ï¼Œä¸”é»˜è®¤æ˜¯å¼€å¯æ·±åº¦ç›‘è§†çš„<br>  watch(person,(newValue,oldValue)=&gt;&#123;<br>    console.log(&#x27;personå˜åŒ–äº†&#x27;,newValue,oldValue)<br>  &#125;)<br>  watch(obj,(newValue,oldValue)=&gt;&#123;<br>    console.log(&#x27;Objå˜åŒ–äº†&#x27;,newValue,oldValue)<br>  &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h3 id="æƒ…å†µå››"><a href="#æƒ…å†µå››" class="headerlink" title="* æƒ…å†µå››"></a>* æƒ…å†µå››</h3><p>ç›‘è§†<code>ref</code>æˆ–<code>reactive</code>å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ä¸­çš„<strong>æŸä¸ªå±æ€§</strong>ï¼Œæ³¨æ„ç‚¹å¦‚ä¸‹ï¼š</p><ol><li>è‹¥è¯¥å±æ€§å€¼<strong>ä¸æ˜¯</strong>ã€å¯¹è±¡ç±»å‹ã€‘ï¼Œéœ€è¦å†™æˆå‡½æ•°å½¢å¼ã€‚</li><li>è‹¥è¯¥å±æ€§å€¼æ˜¯<strong>ä¾ç„¶</strong>æ˜¯ã€å¯¹è±¡ç±»å‹ã€‘ï¼Œå¯ç›´æ¥ç¼–ï¼Œä¹Ÿå¯å†™æˆå‡½æ•°ï¼Œå»ºè®®å†™æˆå‡½æ•°ã€‚</li></ol><p>ç»“è®ºï¼šç›‘è§†çš„è¦æ˜¯å¯¹è±¡é‡Œçš„å±æ€§ï¼Œé‚£ä¹ˆæœ€å¥½å†™å‡½æ•°å¼ï¼Œæ³¨æ„ç‚¹ï¼šè‹¥æ˜¯å¯¹è±¡ç›‘è§†çš„æ˜¯åœ°å€å€¼ï¼Œéœ€è¦å…³æ³¨å¯¹è±¡å†…éƒ¨ï¼Œéœ€è¦æ‰‹åŠ¨å¼€å¯æ·±åº¦ç›‘è§†ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;person&quot;&gt;<br>    &lt;h1&gt;æƒ…å†µå››ï¼šç›‘è§†ã€refã€‘æˆ–ã€reactiveã€‘å®šä¹‰çš„ã€å¯¹è±¡ç±»å‹ã€‘æ•°æ®ä¸­çš„æŸä¸ªå±æ€§&lt;/h1&gt;<br>    &lt;h2&gt;å§“åï¼š&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;<br>    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123; person.age &#125;&#125;&lt;/h2&gt;<br>    &lt;h2&gt;æ±½è½¦ï¼š&#123;&#123; person.car.c1 &#125;&#125;ã€&#123;&#123; person.car.c2 &#125;&#125;&lt;/h2&gt;<br>    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;<br>    &lt;button @click=&quot;changeAge&quot;&gt;ä¿®æ”¹å¹´é¾„&lt;/button&gt;<br>    &lt;button @click=&quot;changeC1&quot;&gt;ä¿®æ”¹ç¬¬ä¸€å°è½¦&lt;/button&gt;<br>    &lt;button @click=&quot;changeC2&quot;&gt;ä¿®æ”¹ç¬¬äºŒå°è½¦&lt;/button&gt;<br>    &lt;button @click=&quot;changeCar&quot;&gt;ä¿®æ”¹æ•´ä¸ªè½¦&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;<br>  import &#123;reactive,watch&#125; from &#x27;vue&#x27;<br><br>  // æ•°æ®<br>  let person = reactive(&#123;<br>    name:&#x27;å¼ ä¸‰&#x27;,<br>    age:18,<br>    car:&#123;<br>      c1:&#x27;å¥”é©°&#x27;,<br>      c2:&#x27;å®é©¬&#x27;<br>    &#125;<br>  &#125;)<br>  // æ–¹æ³•<br>  function changeName()&#123;<br>    person.name += &#x27;~&#x27;<br>  &#125;<br>  function changeAge()&#123;<br>    person.age += 1<br>  &#125;<br>  function changeC1()&#123;<br>    person.car.c1 = &#x27;å¥¥è¿ª&#x27;<br>  &#125;<br>  function changeC2()&#123;<br>    person.car.c2 = &#x27;å¤§ä¼—&#x27;<br>  &#125;<br>  function changeCar()&#123;<br>    person.car = &#123;c1:&#x27;é›…è¿ª&#x27;,c2:&#x27;çˆ±ç›&#x27;&#125;<br>  &#125;<br><br>  // ç›‘è§†ï¼Œæƒ…å†µå››ï¼šç›‘è§†å“åº”å¼å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§ï¼Œä¸”è¯¥å±æ€§æ˜¯åŸºæœ¬ç±»å‹çš„ï¼Œè¦å†™æˆå‡½æ•°å¼<br>  /* watch(()=&gt; person.name,(newValue,oldValue)=&gt;&#123;<br>    console.log(&#x27;person.nameå˜åŒ–äº†&#x27;,newValue,oldValue)<br>  &#125;) */<br><br>  // ç›‘è§†ï¼Œæƒ…å†µå››ï¼šç›‘è§†å“åº”å¼å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§ï¼Œä¸”è¯¥å±æ€§æ˜¯å¯¹è±¡ç±»å‹çš„ï¼Œå¯ä»¥ç›´æ¥å†™ï¼Œä¹Ÿèƒ½å†™å‡½æ•°ï¼Œæ›´æ¨èå†™å‡½æ•°<br>  watch(()=&gt;person.car,(newValue,oldValue)=&gt;&#123;<br>    console.log(&#x27;person.carå˜åŒ–äº†&#x27;,newValue,oldValue)<br>  &#125;,&#123;deep:true&#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h3 id="æƒ…å†µäº”"><a href="#æƒ…å†µäº”" class="headerlink" title="* æƒ…å†µäº”"></a>* æƒ…å†µäº”</h3><p>ç›‘è§†ä¸Šè¿°çš„å¤šä¸ªæ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;person&quot;&gt;<br>    &lt;h1&gt;æƒ…å†µäº”ï¼šç›‘è§†ä¸Šè¿°çš„å¤šä¸ªæ•°æ®&lt;/h1&gt;<br>    &lt;h2&gt;å§“åï¼š&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;<br>    &lt;h2&gt;å¹´é¾„ï¼š&#123;&#123; person.age &#125;&#125;&lt;/h2&gt;<br>    &lt;h2&gt;æ±½è½¦ï¼š&#123;&#123; person.car.c1 &#125;&#125;ã€&#123;&#123; person.car.c2 &#125;&#125;&lt;/h2&gt;<br>    &lt;button @click=&quot;changeName&quot;&gt;ä¿®æ”¹åå­—&lt;/button&gt;<br>    &lt;button @click=&quot;changeAge&quot;&gt;ä¿®æ”¹å¹´é¾„&lt;/button&gt;<br>    &lt;button @click=&quot;changeC1&quot;&gt;ä¿®æ”¹ç¬¬ä¸€å°è½¦&lt;/button&gt;<br>    &lt;button @click=&quot;changeC2&quot;&gt;ä¿®æ”¹ç¬¬äºŒå°è½¦&lt;/button&gt;<br>    &lt;button @click=&quot;changeCar&quot;&gt;ä¿®æ”¹æ•´ä¸ªè½¦&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;<br>  import &#123;reactive,watch&#125; from &#x27;vue&#x27;<br><br>  // æ•°æ®<br>  let person = reactive(&#123;<br>    name:&#x27;å¼ ä¸‰&#x27;,<br>    age:18,<br>    car:&#123;<br>      c1:&#x27;å¥”é©°&#x27;,<br>      c2:&#x27;å®é©¬&#x27;<br>    &#125;<br>  &#125;)<br>  // æ–¹æ³•<br>  function changeName()&#123;<br>    person.name += &#x27;~&#x27;<br>  &#125;<br>  function changeAge()&#123;<br>    person.age += 1<br>  &#125;<br>  function changeC1()&#123;<br>    person.car.c1 = &#x27;å¥¥è¿ª&#x27;<br>  &#125;<br>  function changeC2()&#123;<br>    person.car.c2 = &#x27;å¤§ä¼—&#x27;<br>  &#125;<br>  function changeCar()&#123;<br>    person.car = &#123;c1:&#x27;é›…è¿ª&#x27;,c2:&#x27;çˆ±ç›&#x27;&#125;<br>  &#125;<br><br>  // ç›‘è§†ï¼Œæƒ…å†µäº”ï¼šç›‘è§†ä¸Šè¿°çš„å¤šä¸ªæ•°æ®<br>  watch([()=&gt;person.name,person.car],(newValue,oldValue)=&gt;&#123;<br>    console.log(&#x27;person.carå˜åŒ–äº†&#x27;,newValue,oldValue)<br>  &#125;,&#123;deep:true&#125;)<br><br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h2 id="3-10-ã€watchEffectã€‘"><a href="#3-10-ã€watchEffectã€‘" class="headerlink" title="3.10. ã€watchEffectã€‘"></a>3.10. ã€watchEffectã€‘</h2><ul><li><p>å®˜ç½‘ï¼šç«‹å³è¿è¡Œä¸€ä¸ªå‡½æ•°ï¼ŒåŒæ—¶å“åº”å¼åœ°è¿½è¸ªå…¶ä¾èµ–ï¼Œå¹¶åœ¨ä¾èµ–æ›´æ”¹æ—¶é‡æ–°æ‰§è¡Œè¯¥å‡½æ•°ã€‚</p></li><li><p><code>watch</code>å¯¹æ¯”<code>watchEffect</code></p><blockquote><ol><li><p>éƒ½èƒ½ç›‘å¬å“åº”å¼æ•°æ®çš„å˜åŒ–ï¼Œä¸åŒçš„æ˜¯ç›‘å¬æ•°æ®å˜åŒ–çš„æ–¹å¼ä¸åŒ</p></li><li><p><code>watch</code>ï¼šè¦æ˜ç¡®æŒ‡å‡ºç›‘è§†çš„æ•°æ®</p></li><li><p><code>watchEffect</code>ï¼šä¸ç”¨æ˜ç¡®æŒ‡å‡ºç›‘è§†çš„æ•°æ®ï¼ˆå‡½æ•°ä¸­ç”¨åˆ°å“ªäº›å±æ€§ï¼Œé‚£å°±ç›‘è§†å“ªäº›å±æ€§ï¼‰ã€‚</p></li></ol></blockquote></li><li><p>ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;person&quot;&gt;<br>    &lt;h1&gt;éœ€æ±‚ï¼šæ°´æ¸©è¾¾åˆ°50â„ƒï¼Œæˆ–æ°´ä½è¾¾åˆ°20cmï¼Œåˆ™è”ç³»æœåŠ¡å™¨&lt;/h1&gt;<br>    &lt;h2 id=&quot;demo&quot;&gt;æ°´æ¸©ï¼š&#123;&#123;temp&#125;&#125;&lt;/h2&gt;<br>    &lt;h2&gt;æ°´ä½ï¼š&#123;&#123;height&#125;&#125;&lt;/h2&gt;<br>    &lt;button @click=&quot;changePrice&quot;&gt;æ°´æ¸©+1&lt;/button&gt;<br>    &lt;button @click=&quot;changeSum&quot;&gt;æ°´ä½+10&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;<br>  import &#123;ref,watch,watchEffect&#125; from &#x27;vue&#x27;<br>  // æ•°æ®<br>  let temp = ref(0)<br>  let height = ref(0)<br><br>  // æ–¹æ³•<br>  function changePrice()&#123;<br>    temp.value += 10<br>  &#125;<br>  function changeSum()&#123;<br>    height.value += 1<br>  &#125;<br><br>  // ç”¨watchå®ç°ï¼Œéœ€è¦æ˜ç¡®çš„æŒ‡å‡ºè¦ç›‘è§†ï¼štempã€height<br>  watch([temp,height],(value)=&gt;&#123;<br>    // ä»valueä¸­è·å–æœ€æ–°çš„tempå€¼ã€heightå€¼<br>    const [newTemp,newHeight] = value<br>    // å®¤æ¸©è¾¾åˆ°50â„ƒï¼Œæˆ–æ°´ä½è¾¾åˆ°20cmï¼Œç«‹åˆ»è”ç³»æœåŠ¡å™¨<br>    if(newTemp &gt;= 50 || newHeight &gt;= 20)&#123;<br>      console.log(&#x27;è”ç³»æœåŠ¡å™¨&#x27;)<br>    &#125;<br>  &#125;)<br><br>  // ç”¨watchEffectå®ç°ï¼Œä¸ç”¨<br>  const stopWtach = watchEffect(()=&gt;&#123;<br>    // å®¤æ¸©è¾¾åˆ°50â„ƒï¼Œæˆ–æ°´ä½è¾¾åˆ°20cmï¼Œç«‹åˆ»è”ç³»æœåŠ¡å™¨<br>    if(temp.value &gt;= 50 || height.value &gt;= 20)&#123;<br>      console.log(document.getElementById(&#x27;demo&#x27;)?.innerText)<br>      console.log(&#x27;è”ç³»æœåŠ¡å™¨&#x27;)<br>    &#125;<br>    // æ°´æ¸©è¾¾åˆ°100ï¼Œæˆ–æ°´ä½è¾¾åˆ°50ï¼Œå–æ¶ˆç›‘è§†<br>    if(temp.value === 100 || height.value === 50)&#123;<br>      console.log(&#x27;æ¸…ç†äº†&#x27;)<br>      stopWtach()<br>    &#125;<br>  &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure></li></ul><h2 id="3-11-ã€æ ‡ç­¾çš„-ref-å±æ€§ã€‘"><a href="#3-11-ã€æ ‡ç­¾çš„-ref-å±æ€§ã€‘" class="headerlink" title="3.11. ã€æ ‡ç­¾çš„ ref å±æ€§ã€‘"></a>3.11. ã€æ ‡ç­¾çš„ ref å±æ€§ã€‘</h2><p>ä½œç”¨ï¼šç”¨äºæ³¨å†Œæ¨¡æ¿å¼•ç”¨ã€‚</p><blockquote><ul><li><p>ç”¨åœ¨æ™®é€š<code>DOM</code>æ ‡ç­¾ä¸Šï¼Œè·å–çš„æ˜¯<code>DOM</code>èŠ‚ç‚¹ã€‚</p></li><li><p>ç”¨åœ¨ç»„ä»¶æ ‡ç­¾ä¸Šï¼Œè·å–çš„æ˜¯ç»„ä»¶å®ä¾‹å¯¹è±¡ã€‚</p></li></ul></blockquote><p>ç”¨åœ¨æ™®é€š<code>DOM</code>æ ‡ç­¾ä¸Šï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;person&quot;&gt;<br>    &lt;h1 ref=&quot;title1&quot;&gt;å°šç¡…è°·&lt;/h1&gt;<br>    &lt;h2 ref=&quot;title2&quot;&gt;å‰ç«¯&lt;/h2&gt;<br>    &lt;h3 ref=&quot;title3&quot;&gt;Vue&lt;/h3&gt;<br>    &lt;input type=&quot;text&quot; ref=&quot;inpt&quot;&gt; &lt;br&gt;&lt;br&gt;<br>    &lt;button @click=&quot;showLog&quot;&gt;ç‚¹æˆ‘æ‰“å°å†…å®¹&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;<br>  import &#123;ref&#125; from &#x27;vue&#x27;<br><br>  let title1 = ref()<br>  let title2 = ref()<br>  let title3 = ref()<br><br>  function showLog()&#123;<br>    // é€šè¿‡idè·å–å…ƒç´ <br>    const t1 = document.getElementById(&#x27;title1&#x27;)<br>    // æ‰“å°å†…å®¹<br>    console.log((t1 as HTMLElement).innerText)<br>    console.log((&lt;HTMLElement&gt;t1).innerText)<br>    console.log(t1?.innerText)<br>    <br>/************************************/<br><br>    // é€šè¿‡refè·å–å…ƒç´ <br>    console.log(title1.value)<br>    console.log(title2.value)<br>    console.log(title3.value)<br>  &#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>ç”¨åœ¨ç»„ä»¶æ ‡ç­¾ä¸Šï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- çˆ¶ç»„ä»¶App.vue --&gt;<br>&lt;template&gt;<br>  &lt;Person ref=&quot;ren&quot;/&gt;<br>  &lt;button @click=&quot;test&quot;&gt;æµ‹è¯•&lt;/button&gt;<br>&lt;/template&gt;<br><br>&lt;script lang=&quot;ts&quot; setup name=&quot;App&quot;&gt;<br>  import Person from &#x27;./components/Person.vue&#x27;<br>  import &#123;ref&#125; from &#x27;vue&#x27;<br><br>  let ren = ref()<br><br>  function test()&#123;<br>    console.log(ren.value.name)<br>    console.log(ren.value.age)<br>  &#125;<br>&lt;/script&gt;<br><br><br>&lt;!-- å­ç»„ä»¶Person.vueä¸­è¦ä½¿ç”¨defineExposeæš´éœ²å†…å®¹ --&gt;<br>&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;<br>  import &#123;ref,defineExpose&#125; from &#x27;vue&#x27;<br>// æ•°æ®<br>  let name = ref(&#x27;å¼ ä¸‰&#x27;)<br>  let age = ref(18)<br>  /****************************/<br>  /****************************/<br>  // ä½¿ç”¨defineExposeå°†ç»„ä»¶ä¸­çš„æ•°æ®äº¤ç»™å¤–éƒ¨<br>  defineExpose(&#123;name,age&#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h2 id="3-12-ã€propsã€‘"><a href="#3-12-ã€propsã€‘" class="headerlink" title="3.12. ã€propsã€‘"></a>3.12. ã€propsã€‘</h2><blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œé™åˆ¶æ¯ä¸ªPersonå¯¹è±¡çš„æ ¼å¼</span><br><span class="hljs-keyword">export</span> interface <span class="hljs-title class_">PersonInter</span> &#123;<br><span class="hljs-attr">id</span>:string,<br><span class="hljs-attr">name</span>:string,<br> <span class="hljs-attr">age</span>:number<br>&#125;<br><br><span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹Persons</span><br><span class="hljs-keyword">export</span> type <span class="hljs-title class_">Persons</span> = <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">PersonInter</span>&gt;<br></code></pre></td></tr></table></figure><p><code>App.vue</code>ä¸­ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;Person :list=&quot;persons&quot;/&gt;<br>&lt;/template&gt;<br><br>&lt;script lang=&quot;ts&quot; setup name=&quot;App&quot;&gt;<br>import Person from &#x27;./components/Person.vue&#x27;<br>import &#123;reactive&#125; from &#x27;vue&#x27;<br> import &#123;type Persons&#125; from &#x27;./types&#x27;<br><br> let persons = reactive&lt;Persons&gt;([<br>  &#123;id:&#x27;e98219e12&#x27;,name:&#x27;å¼ ä¸‰&#x27;,age:18&#125;,<br>   &#123;id:&#x27;e98219e13&#x27;,name:&#x27;æå››&#x27;,age:19&#125;,<br>    &#123;id:&#x27;e98219e14&#x27;,name:&#x27;ç‹äº”&#x27;,age:20&#125;<br>  ])<br>&lt;/script&gt;<br><br></code></pre></td></tr></table></figure><p><code>Person.vue</code>ä¸­ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs Vue">&lt;template&gt;<br>&lt;div class=&quot;person&quot;&gt;<br>&lt;ul&gt;<br>  &lt;li v-for=&quot;item in list&quot; :key=&quot;item.id&quot;&gt;<br>     &#123;&#123;item.name&#125;&#125;--&#123;&#123;item.age&#125;&#125;<br>   &lt;/li&gt;<br> &lt;/ul&gt;<br>&lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;<br>import &#123;defineProps&#125; from &#x27;vue&#x27;<br>import &#123;type PersonInter&#125; from &#x27;@/types&#x27;<br><br>// ç¬¬ä¸€ç§å†™æ³•ï¼šä»…æ¥æ”¶<br>// const props = defineProps([&#x27;list&#x27;])<br><br>// ç¬¬äºŒç§å†™æ³•ï¼šæ¥æ”¶+é™åˆ¶ç±»å‹<br>// defineProps&lt;&#123;list:Persons&#125;&gt;()<br><br>// ç¬¬ä¸‰ç§å†™æ³•ï¼šæ¥æ”¶+é™åˆ¶ç±»å‹+æŒ‡å®šé»˜è®¤å€¼+é™åˆ¶å¿…è¦æ€§<br>let props = withDefaults(defineProps&lt;&#123;list?:Persons&#125;&gt;(),&#123;<br>  list:()=&gt;[&#123;id:&#x27;asdasg01&#x27;,name:&#x27;å°çŒªä½©å¥‡&#x27;,age:18&#125;]<br>&#125;)<br>console.log(props)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure></blockquote><h2 id="3-13-ã€ç”Ÿå‘½å‘¨æœŸã€‘"><a href="#3-13-ã€ç”Ÿå‘½å‘¨æœŸã€‘" class="headerlink" title="3.13. ã€ç”Ÿå‘½å‘¨æœŸã€‘"></a>3.13. ã€ç”Ÿå‘½å‘¨æœŸã€‘</h2><ul><li><p>æ¦‚å¿µï¼š<code>Vue</code>ç»„ä»¶å®ä¾‹åœ¨åˆ›å»ºæ—¶è¦ç»å†ä¸€ç³»åˆ—çš„åˆå§‹åŒ–æ­¥éª¤ï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­<code>Vue</code>ä¼šåœ¨åˆé€‚çš„æ—¶æœºï¼Œè°ƒç”¨ç‰¹å®šçš„å‡½æ•°ï¼Œä»è€Œè®©å¼€å‘è€…æœ‰æœºä¼šåœ¨ç‰¹å®šé˜¶æ®µè¿è¡Œè‡ªå·±çš„ä»£ç ï¼Œè¿™äº›ç‰¹å®šçš„å‡½æ•°ç»Ÿç§°ä¸ºï¼šç”Ÿå‘½å‘¨æœŸé’©å­</p></li><li><p>è§„å¾‹ï¼š</p><blockquote><p>ç”Ÿå‘½å‘¨æœŸæ•´ä½“åˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼Œåˆ†åˆ«æ˜¯ï¼š<strong>åˆ›å»ºã€æŒ‚è½½ã€æ›´æ–°ã€é”€æ¯</strong>ï¼Œæ¯ä¸ªé˜¶æ®µéƒ½æœ‰ä¸¤ä¸ªé’©å­ï¼Œä¸€å‰ä¸€åã€‚</p></blockquote></li><li><p><code>Vue2</code>çš„ç”Ÿå‘½å‘¨æœŸ</p><blockquote><p>åˆ›å»ºé˜¶æ®µï¼š<code>beforeCreate</code>ã€<code>created</code></p><p>æŒ‚è½½é˜¶æ®µï¼š<code>beforeMount</code>ã€<code>mounted</code></p><p>æ›´æ–°é˜¶æ®µï¼š<code>beforeUpdate</code>ã€<code>updated</code></p><p>é”€æ¯é˜¶æ®µï¼š<code>beforeDestroy</code>ã€<code>destroyed</code></p></blockquote></li><li><p><code>Vue3</code>çš„ç”Ÿå‘½å‘¨æœŸ</p><blockquote><p>åˆ›å»ºé˜¶æ®µï¼š<code>setup</code></p><p>æŒ‚è½½é˜¶æ®µï¼š<code>onBeforeMount</code>ã€<code>onMounted</code></p><p>æ›´æ–°é˜¶æ®µï¼š<code>onBeforeUpdate</code>ã€<code>onUpdated</code></p><p>å¸è½½é˜¶æ®µï¼š<code>onBeforeUnmount</code>ã€<code>onUnmounted</code></p></blockquote></li><li><p>å¸¸ç”¨çš„é’©å­ï¼š<code>onMounted</code>(æŒ‚è½½å®Œæ¯•)ã€<code>onUpdated</code>(æ›´æ–°å®Œæ¯•)ã€<code>onBeforeUnmount</code>(å¸è½½ä¹‹å‰)</p></li><li><p>ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;person&quot;&gt;<br>    &lt;h2&gt;å½“å‰æ±‚å’Œä¸ºï¼š&#123;&#123; sum &#125;&#125;&lt;/h2&gt;<br>    &lt;button @click=&quot;changeSum&quot;&gt;ç‚¹æˆ‘sum+1&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;!-- vue3å†™æ³• --&gt;<br>&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;<br>  import &#123; <br>    ref, <br>    onBeforeMount, <br>    onMounted, <br>    onBeforeUpdate, <br>    onUpdated, <br>    onBeforeUnmount, <br>    onUnmounted <br>  &#125; from &#x27;vue&#x27;<br><br>  // æ•°æ®<br>  let sum = ref(0)<br>  // æ–¹æ³•<br>  function changeSum() &#123;<br>    sum.value += 1<br>  &#125;<br>  console.log(&#x27;setup&#x27;)<br>  // ç”Ÿå‘½å‘¨æœŸé’©å­<br>  onBeforeMount(()=&gt;&#123;<br>    console.log(&#x27;æŒ‚è½½ä¹‹å‰&#x27;)<br>  &#125;)<br>  onMounted(()=&gt;&#123;<br>    console.log(&#x27;æŒ‚è½½å®Œæ¯•&#x27;)<br>  &#125;)<br>  onBeforeUpdate(()=&gt;&#123;<br>    console.log(&#x27;æ›´æ–°ä¹‹å‰&#x27;)<br>  &#125;)<br>  onUpdated(()=&gt;&#123;<br>    console.log(&#x27;æ›´æ–°å®Œæ¯•&#x27;)<br>  &#125;)<br>  onBeforeUnmount(()=&gt;&#123;<br>    console.log(&#x27;å¸è½½ä¹‹å‰&#x27;)<br>  &#125;)<br>  onUnmounted(()=&gt;&#123;<br>    console.log(&#x27;å¸è½½å®Œæ¯•&#x27;)<br>  &#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure></li></ul><h2 id="3-14-ã€è‡ªå®šä¹‰hookã€‘"><a href="#3-14-ã€è‡ªå®šä¹‰hookã€‘" class="headerlink" title="3.14. ã€è‡ªå®šä¹‰hookã€‘"></a>3.14. ã€è‡ªå®šä¹‰hookã€‘</h2><ul><li><p>ä»€ä¹ˆæ˜¯<code>hook</code>ï¼Ÿâ€”â€” æœ¬è´¨æ˜¯ä¸€ä¸ªå‡½æ•°ï¼ŒæŠŠ<code>setup</code>å‡½æ•°ä¸­ä½¿ç”¨çš„<code>Composition API</code>è¿›è¡Œäº†å°è£…ï¼Œç±»ä¼¼äº<code>vue2.x</code>ä¸­çš„<code>mixin</code>ã€‚</p></li><li><p>è‡ªå®šä¹‰<code>hook</code>çš„ä¼˜åŠ¿ï¼šå¤ç”¨ä»£ç , è®©<code>setup</code>ä¸­çš„é€»è¾‘æ›´æ¸…æ¥šæ˜“æ‡‚ã€‚</p></li></ul><p>ç¤ºä¾‹ä»£ç ï¼š</p><ul><li><p><code>useSum.ts</code>ä¸­å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123;ref,onMounted&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>  <span class="hljs-keyword">let</span> sum = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)<br><br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">increment</span> = (<span class="hljs-params"></span>)=&gt;&#123;<br>    sum.<span class="hljs-property">value</span> += <span class="hljs-number">1</span><br>  &#125;<br>  <span class="hljs-keyword">const</span> <span class="hljs-title function_">decrement</span> = (<span class="hljs-params"></span>)=&gt;&#123;<br>    sum.<span class="hljs-property">value</span> -= <span class="hljs-number">1</span><br>  &#125;<br>  <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">()=&gt;</span>&#123;<br>    <span class="hljs-title function_">increment</span>()<br>  &#125;)<br><br>  <span class="hljs-comment">//å‘å¤–éƒ¨æš´éœ²æ•°æ®</span><br>  <span class="hljs-keyword">return</span> &#123;sum,increment,decrement&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><code>useDog.ts</code>ä¸­å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123;reactive,onMounted&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> axios,&#123;<span class="hljs-title class_">AxiosError</span>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)&#123;<br>  <span class="hljs-keyword">let</span> dogList = reactive&lt;string[]&gt;([])<br><br>  <span class="hljs-comment">// æ–¹æ³•</span><br>  <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getDog</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>      <span class="hljs-comment">// å‘è¯·æ±‚</span><br>      <span class="hljs-keyword">let</span> &#123;data&#125; = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;https://dog.ceo/api/breed/pembroke/images/random&#x27;</span>)<br>      <span class="hljs-comment">// ç»´æŠ¤æ•°æ®</span><br>      dogList.<span class="hljs-title function_">push</span>(data.<span class="hljs-property">message</span>)<br>    &#125; <span class="hljs-keyword">catch</span> (error) &#123;<br>      <span class="hljs-comment">// å¤„ç†é”™è¯¯</span><br>      <span class="hljs-keyword">const</span> err = &lt;<span class="hljs-title class_">AxiosError</span>&gt;error<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err.<span class="hljs-property">message</span>)<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">// æŒ‚è½½é’©å­</span><br>  <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">()=&gt;</span>&#123;<br>    <span class="hljs-title function_">getDog</span>()<br>  &#125;)<br><br>  <span class="hljs-comment">//å‘å¤–éƒ¨æš´éœ²æ•°æ®</span><br>  <span class="hljs-keyword">return</span> &#123;dogList,getDog&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ç»„ä»¶ä¸­å…·ä½“ä½¿ç”¨ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;h2&gt;å½“å‰æ±‚å’Œä¸ºï¼š&#123;&#123;sum&#125;&#125;&lt;/h2&gt;<br>  &lt;button @click=&quot;increment&quot;&gt;ç‚¹æˆ‘+1&lt;/button&gt;<br>  &lt;button @click=&quot;decrement&quot;&gt;ç‚¹æˆ‘-1&lt;/button&gt;<br>  &lt;hr&gt;<br>  &lt;img v-for=&quot;(u,index) in dogList.urlList&quot; :key=&quot;index&quot; :src=&quot;(u as string)&quot;&gt; <br>  &lt;span v-show=&quot;dogList.isLoading&quot;&gt;åŠ è½½ä¸­......&lt;/span&gt;&lt;br&gt;<br>  &lt;button @click=&quot;getDog&quot;&gt;å†æ¥ä¸€åªç‹—&lt;/button&gt;<br>&lt;/template&gt;<br><br>&lt;script lang=&quot;ts&quot;&gt;<br>  import &#123;defineComponent&#125; from &#x27;vue&#x27;<br><br>  export default defineComponent(&#123;<br>    name:&#x27;App&#x27;,<br>  &#125;)<br>&lt;/script&gt;<br><br>&lt;script setup lang=&quot;ts&quot;&gt;<br>  import useSum from &#x27;./hooks/useSum&#x27;<br>  import useDog from &#x27;./hooks/useDog&#x27;<br><br>  let &#123;sum,increment,decrement&#125; = useSum()<br>  let &#123;dogList,getDog&#125; = useDog()<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure></li></ul><hr><h1 id="4-è·¯ç”±"><a href="#4-è·¯ç”±" class="headerlink" title="4. è·¯ç”±"></a>4. è·¯ç”±</h1><h2 id="4-1-ã€å¯¹è·¯ç”±çš„ç†è§£ã€‘"><a href="#4-1-ã€å¯¹è·¯ç”±çš„ç†è§£ã€‘" class="headerlink" title="4.1. ã€å¯¹è·¯ç”±çš„ç†è§£ã€‘"></a>4.1. ã€å¯¹è·¯ç”±çš„ç†è§£ã€‘</h2><img src="images/image-20231018144351536.png" alt="image-20231018144351536" style="zoom:20%;border-radius:40px" /> <h2 id="4-2-ã€åŸºæœ¬åˆ‡æ¢æ•ˆæœã€‘"><a href="#4-2-ã€åŸºæœ¬åˆ‡æ¢æ•ˆæœã€‘" class="headerlink" title="4.2. ã€åŸºæœ¬åˆ‡æ¢æ•ˆæœã€‘"></a>4.2. ã€åŸºæœ¬åˆ‡æ¢æ•ˆæœã€‘</h2><ul><li><p><code>Vue3</code>ä¸­è¦ä½¿ç”¨<code>vue-router</code>çš„æœ€æ–°ç‰ˆæœ¬ï¼Œç›®å‰æ˜¯<code>4</code>ç‰ˆæœ¬ã€‚</p></li><li><p>è·¯ç”±é…ç½®æ–‡ä»¶ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123;createRouter,createWebHistory&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/pages/Home.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">News</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/pages/News.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">About</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/pages/About.vue&#x27;</span><br><br><span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>(&#123;<br><span class="hljs-attr">history</span>:<span class="hljs-title function_">createWebHistory</span>(),<br><span class="hljs-attr">routes</span>:[<br>&#123;<br><span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;/home&#x27;</span>,<br><span class="hljs-attr">component</span>:<span class="hljs-title class_">Home</span><br>&#125;,<br>&#123;<br><span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;/about&#x27;</span>,<br><span class="hljs-attr">component</span>:<span class="hljs-title class_">About</span><br>&#125;<br>]<br>&#125;)<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router<br></code></pre></td></tr></table></figure></li></ul><ul><li><p><code>main.ts</code>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./router/index&#x27;</span><br>app.<span class="hljs-title function_">use</span>(router)<br><br>app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&#x27;#app&#x27;</span>)<br></code></pre></td></tr></table></figure></li></ul><ul><li><p><code>App.vue</code>ä»£ç å¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;app&quot;&gt;<br>    &lt;h2 class=&quot;title&quot;&gt;Vueè·¯ç”±æµ‹è¯•&lt;/h2&gt;<br>    &lt;!-- å¯¼èˆªåŒº --&gt;<br>    &lt;div class=&quot;navigate&quot;&gt;<br>      &lt;RouterLink to=&quot;/home&quot; active-class=&quot;active&quot;&gt;é¦–é¡µ&lt;/RouterLink&gt;<br>      &lt;RouterLink to=&quot;/news&quot; active-class=&quot;active&quot;&gt;æ–°é—»&lt;/RouterLink&gt;<br>      &lt;RouterLink to=&quot;/about&quot; active-class=&quot;active&quot;&gt;å…³äº&lt;/RouterLink&gt;<br>    &lt;/div&gt;<br>    &lt;!-- å±•ç¤ºåŒº --&gt;<br>    &lt;div class=&quot;main-content&quot;&gt;<br>      &lt;RouterView&gt;&lt;/RouterView&gt;<br>    &lt;/div&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script lang=&quot;ts&quot; setup name=&quot;App&quot;&gt;<br>  import &#123;RouterLink,RouterView&#125; from &#x27;vue-router&#x27;  <br>&lt;/script&gt;<br></code></pre></td></tr></table></figure></li></ul><h2 id="4-3-ã€ä¸¤ä¸ªæ³¨æ„ç‚¹ã€‘"><a href="#4-3-ã€ä¸¤ä¸ªæ³¨æ„ç‚¹ã€‘" class="headerlink" title="4.3. ã€ä¸¤ä¸ªæ³¨æ„ç‚¹ã€‘"></a>4.3. ã€ä¸¤ä¸ªæ³¨æ„ç‚¹ã€‘</h2><blockquote><ol><li><p>è·¯ç”±ç»„ä»¶é€šå¸¸å­˜æ”¾åœ¨<code>pages</code> æˆ– <code>views</code>æ–‡ä»¶å¤¹ï¼Œä¸€èˆ¬ç»„ä»¶é€šå¸¸å­˜æ”¾åœ¨<code>components</code>æ–‡ä»¶å¤¹ã€‚</p></li><li><p>é€šè¿‡ç‚¹å‡»å¯¼èˆªï¼Œè§†è§‰æ•ˆæœä¸Šâ€œæ¶ˆå¤±â€ äº†çš„è·¯ç”±ç»„ä»¶ï¼Œé»˜è®¤æ˜¯è¢«<strong>å¸è½½</strong>æ‰çš„ï¼Œéœ€è¦çš„æ—¶å€™å†å»<strong>æŒ‚è½½</strong>ã€‚</p></li></ol></blockquote><h2 id="4-4-ã€è·¯ç”±å™¨å·¥ä½œæ¨¡å¼ã€‘"><a href="#4-4-ã€è·¯ç”±å™¨å·¥ä½œæ¨¡å¼ã€‘" class="headerlink" title="4.4.ã€è·¯ç”±å™¨å·¥ä½œæ¨¡å¼ã€‘"></a>4.4.ã€è·¯ç”±å™¨å·¥ä½œæ¨¡å¼ã€‘</h2><ol><li><p><code>history</code>æ¨¡å¼</p><blockquote><p>ä¼˜ç‚¹ï¼š<code>URL</code>æ›´åŠ ç¾è§‚ï¼Œä¸å¸¦æœ‰<code>#</code>ï¼Œæ›´æ¥è¿‘ä¼ ç»Ÿçš„ç½‘ç«™<code>URL</code>ã€‚</p><p>ç¼ºç‚¹ï¼šåæœŸé¡¹ç›®ä¸Šçº¿ï¼Œéœ€è¦æœåŠ¡ç«¯é…åˆå¤„ç†è·¯å¾„é—®é¢˜ï¼Œå¦åˆ™åˆ·æ–°ä¼šæœ‰<code>404</code>é”™è¯¯ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>(&#123;<br><span class="hljs-attr">history</span>:<span class="hljs-title function_">createWebHistory</span>(), <span class="hljs-comment">//historyæ¨¡å¼</span><br><span class="hljs-comment">/******/</span><br>&#125;)<br></code></pre></td></tr></table></figure></blockquote></li><li><p><code>hash</code>æ¨¡å¼</p><blockquote><p>ä¼˜ç‚¹ï¼šå…¼å®¹æ€§æ›´å¥½ï¼Œå› ä¸ºä¸éœ€è¦æœåŠ¡å™¨ç«¯å¤„ç†è·¯å¾„ã€‚</p><p>ç¼ºç‚¹ï¼š<code>URL</code>å¸¦æœ‰<code>#</code>ä¸å¤ªç¾è§‚ï¼Œä¸”åœ¨<code>SEO</code>ä¼˜åŒ–æ–¹é¢ç›¸å¯¹è¾ƒå·®ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>(&#123;<br><span class="hljs-attr">history</span>:<span class="hljs-title function_">createWebHashHistory</span>(), <span class="hljs-comment">//hashæ¨¡å¼</span><br><span class="hljs-comment">/******/</span><br>&#125;)<br></code></pre></td></tr></table></figure></blockquote></li></ol><h2 id="4-5-ã€toçš„ä¸¤ç§å†™æ³•ã€‘"><a href="#4-5-ã€toçš„ä¸¤ç§å†™æ³•ã€‘" class="headerlink" title="4.5. ã€toçš„ä¸¤ç§å†™æ³•ã€‘"></a>4.5. ã€toçš„ä¸¤ç§å†™æ³•ã€‘</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- ç¬¬ä¸€ç§ï¼štoçš„å­—ç¬¦ä¸²å†™æ³• --&gt;<br>&lt;router-link active-class=&quot;active&quot; to=&quot;/home&quot;&gt;ä¸»é¡µ&lt;/router-link&gt;<br><br>&lt;!-- ç¬¬äºŒç§ï¼štoçš„å¯¹è±¡å†™æ³• --&gt;<br>&lt;router-link active-class=&quot;active&quot; :to=&quot;&#123;path:&#x27;/home&#x27;&#125;&quot;&gt;Home&lt;/router-link&gt;<br></code></pre></td></tr></table></figure><h2 id="4-6-ã€å‘½åè·¯ç”±ã€‘"><a href="#4-6-ã€å‘½åè·¯ç”±ã€‘" class="headerlink" title="4.6. ã€å‘½åè·¯ç”±ã€‘"></a>4.6. ã€å‘½åè·¯ç”±ã€‘</h2><p>ä½œç”¨ï¼šå¯ä»¥ç®€åŒ–è·¯ç”±è·³è½¬åŠä¼ å‚ï¼ˆåé¢å°±è®²ï¼‰ã€‚</p><p>ç»™è·¯ç”±è§„åˆ™å‘½åï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">routes</span>:[<br>  &#123;<br>    <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;zhuye&#x27;</span>,<br>    <span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;/home&#x27;</span>,<br>    <span class="hljs-attr">component</span>:<span class="hljs-title class_">Home</span><br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;xinwen&#x27;</span>,<br>    <span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;/news&#x27;</span>,<br>    <span class="hljs-attr">component</span>:<span class="hljs-title class_">News</span>,<br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;guanyu&#x27;</span>,<br>    <span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;/about&#x27;</span>,<br>    <span class="hljs-attr">component</span>:<span class="hljs-title class_">About</span><br>  &#125;<br>]<br></code></pre></td></tr></table></figure><p>è·³è½¬è·¯ç”±ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!--ç®€åŒ–å‰ï¼šéœ€è¦å†™å®Œæ•´çš„è·¯å¾„ï¼ˆtoçš„å­—ç¬¦ä¸²å†™æ³•ï¼‰ --&gt;<br>&lt;router-link to=&quot;/news/detail&quot;&gt;è·³è½¬&lt;/router-link&gt;<br><br>&lt;!--ç®€åŒ–åï¼šç›´æ¥é€šè¿‡åå­—è·³è½¬ï¼ˆtoçš„å¯¹è±¡å†™æ³•é…åˆnameå±æ€§ï¼‰ --&gt;<br>&lt;router-link :to=&quot;&#123;name:&#x27;guanyu&#x27;&#125;&quot;&gt;è·³è½¬&lt;/router-link&gt;<br></code></pre></td></tr></table></figure><h2 id="4-7-ã€åµŒå¥—è·¯ç”±ã€‘"><a href="#4-7-ã€åµŒå¥—è·¯ç”±ã€‘" class="headerlink" title="4.7. ã€åµŒå¥—è·¯ç”±ã€‘"></a>4.7. ã€åµŒå¥—è·¯ç”±ã€‘</h2><ol><li><p>ç¼–å†™<code>News</code>çš„å­è·¯ç”±ï¼š<code>Detail.vue</code></p></li><li><p>é…ç½®è·¯ç”±è§„åˆ™ï¼Œä½¿ç”¨<code>children</code>é…ç½®é¡¹ï¼š</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>(&#123;<br>  <span class="hljs-attr">history</span>:<span class="hljs-title function_">createWebHistory</span>(),<br><span class="hljs-attr">routes</span>:[<br>&#123;<br><span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;zhuye&#x27;</span>,<br><span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;/home&#x27;</span>,<br><span class="hljs-attr">component</span>:<span class="hljs-title class_">Home</span><br>&#125;,<br>&#123;<br><span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;xinwen&#x27;</span>,<br><span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;/news&#x27;</span>,<br><span class="hljs-attr">component</span>:<span class="hljs-title class_">News</span>,<br><span class="hljs-attr">children</span>:[<br>&#123;<br><span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;xiang&#x27;</span>,<br><span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;detail&#x27;</span>,<br><span class="hljs-attr">component</span>:<span class="hljs-title class_">Detail</span><br>&#125;<br>]<br>&#125;,<br>&#123;<br><span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;guanyu&#x27;</span>,<br><span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;/about&#x27;</span>,<br><span class="hljs-attr">component</span>:<span class="hljs-title class_">About</span><br>&#125;<br>]<br>&#125;)<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router<br></code></pre></td></tr></table></figure></li><li><p>è·³è½¬è·¯ç”±ï¼ˆè®°å¾—è¦åŠ å®Œæ•´è·¯å¾„ï¼‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;router-link to=&quot;/news/detail&quot;&gt;xxxx&lt;/router-link&gt;<br>&lt;!-- æˆ– --&gt;<br>&lt;router-link :to=&quot;&#123;path:&#x27;/news/detail&#x27;&#125;&quot;&gt;xxxx&lt;/router-link&gt;<br></code></pre></td></tr></table></figure></li><li><p>è®°å¾—å»<code>Home</code>ç»„ä»¶ä¸­é¢„ç•™ä¸€ä¸ª<code>&lt;router-view&gt;</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;news&quot;&gt;<br>    &lt;nav class=&quot;news-list&quot;&gt;<br>      &lt;RouterLink v-for=&quot;news in newsList&quot; :key=&quot;news.id&quot; :to=&quot;&#123;path:&#x27;/news/detail&#x27;&#125;&quot;&gt;<br>        &#123;&#123;news.name&#125;&#125;<br>      &lt;/RouterLink&gt;<br>    &lt;/nav&gt;<br>    &lt;div class=&quot;news-detail&quot;&gt;<br>      &lt;RouterView/&gt;<br>    &lt;/div&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure></li></ol><h2 id="4-8-ã€è·¯ç”±ä¼ å‚ã€‘"><a href="#4-8-ã€è·¯ç”±ä¼ å‚ã€‘" class="headerlink" title="4.8. ã€è·¯ç”±ä¼ å‚ã€‘"></a>4.8. ã€è·¯ç”±ä¼ å‚ã€‘</h2><h3 id="queryå‚æ•°"><a href="#queryå‚æ•°" class="headerlink" title="queryå‚æ•°"></a>queryå‚æ•°</h3><ol><li><p>ä¼ é€’å‚æ•°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- è·³è½¬å¹¶æºå¸¦queryå‚æ•°ï¼ˆtoçš„å­—ç¬¦ä¸²å†™æ³•ï¼‰ --&gt;<br>&lt;router-link to=&quot;/news/detail?a=1&amp;b=2&amp;content=æ¬¢è¿ä½ &quot;&gt;<br>è·³è½¬<br>&lt;/router-link&gt;<br><br>&lt;!-- è·³è½¬å¹¶æºå¸¦queryå‚æ•°ï¼ˆtoçš„å¯¹è±¡å†™æ³•ï¼‰ --&gt;<br>&lt;RouterLink <br>  :to=&quot;&#123;<br>    //name:&#x27;xiang&#x27;, //ç”¨nameä¹Ÿå¯ä»¥è·³è½¬<br>    path:&#x27;/news/detail&#x27;,<br>    query:&#123;<br>      id:news.id,<br>      title:news.title,<br>      content:news.content<br>    &#125;<br>  &#125;&quot;<br>&gt;<br>  &#123;&#123;news.title&#125;&#125;<br>&lt;/RouterLink&gt;<br></code></pre></td></tr></table></figure></li><li><p>æ¥æ”¶å‚æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123;useRoute&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span><br><span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>()<br><span class="hljs-comment">// æ‰“å°queryå‚æ•°</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(route.<span class="hljs-property">query</span>)<br></code></pre></td></tr></table></figure></li></ol><h3 id="paramså‚æ•°"><a href="#paramså‚æ•°" class="headerlink" title="paramså‚æ•°"></a>paramså‚æ•°</h3><ol><li><p>ä¼ é€’å‚æ•°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- è·³è½¬å¹¶æºå¸¦paramså‚æ•°ï¼ˆtoçš„å­—ç¬¦ä¸²å†™æ³•ï¼‰ --&gt;<br>&lt;RouterLink :to=&quot;`/news/detail/001/æ–°é—»001/å†…å®¹001`&quot;&gt;&#123;&#123;news.title&#125;&#125;&lt;/RouterLink&gt;<br><br>&lt;!-- è·³è½¬å¹¶æºå¸¦paramså‚æ•°ï¼ˆtoçš„å¯¹è±¡å†™æ³•ï¼‰ --&gt;<br>&lt;RouterLink <br>  :to=&quot;&#123;<br>    name:&#x27;xiang&#x27;, //ç”¨nameè·³è½¬<br>    params:&#123;<br>      id:news.id,<br>      title:news.title,<br>      content:news.title<br>    &#125;<br>  &#125;&quot;<br>&gt;<br>  &#123;&#123;news.title&#125;&#125;<br>&lt;/RouterLink&gt;<br></code></pre></td></tr></table></figure></li><li><p>æ¥æ”¶å‚æ•°ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123;useRoute&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span><br><span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>()<br><span class="hljs-comment">// æ‰“å°paramså‚æ•°</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(route.<span class="hljs-property">params</span>)<br></code></pre></td></tr></table></figure></li></ol><blockquote><p>å¤‡æ³¨1ï¼šä¼ é€’<code>params</code>å‚æ•°æ—¶ï¼Œè‹¥ä½¿ç”¨<code>to</code>çš„å¯¹è±¡å†™æ³•ï¼Œå¿…é¡»ä½¿ç”¨<code>name</code>é…ç½®é¡¹ï¼Œä¸èƒ½ç”¨<code>path</code>ã€‚</p><p>å¤‡æ³¨2ï¼šä¼ é€’<code>params</code>å‚æ•°æ—¶ï¼Œéœ€è¦æå‰åœ¨è§„åˆ™ä¸­å ä½ã€‚</p></blockquote><h2 id="4-9-ã€è·¯ç”±çš„propsé…ç½®ã€‘"><a href="#4-9-ã€è·¯ç”±çš„propsé…ç½®ã€‘" class="headerlink" title="4.9. ã€è·¯ç”±çš„propsé…ç½®ã€‘"></a>4.9. ã€è·¯ç”±çš„propsé…ç½®ã€‘</h2><p>ä½œç”¨ï¼šè®©è·¯ç”±ç»„ä»¶æ›´æ–¹ä¾¿çš„æ”¶åˆ°å‚æ•°ï¼ˆå¯ä»¥å°†è·¯ç”±å‚æ•°ä½œä¸º<code>props</code>ä¼ ç»™ç»„ä»¶ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;<br><span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;xiang&#x27;</span>,<br><span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;detail/:id/:title/:content&#x27;</span>,<br><span class="hljs-attr">component</span>:<span class="hljs-title class_">Detail</span>,<br><br>  <span class="hljs-comment">// propsçš„å¯¹è±¡å†™æ³•ï¼Œä½œç”¨ï¼šæŠŠå¯¹è±¡ä¸­çš„æ¯ä¸€ç»„key-valueä½œä¸ºpropsä¼ ç»™Detailç»„ä»¶</span><br>  <span class="hljs-comment">// props:&#123;a:1,b:2,c:3&#125;, </span><br><br>  <span class="hljs-comment">// propsçš„å¸ƒå°”å€¼å†™æ³•ï¼Œä½œç”¨ï¼šæŠŠæ”¶åˆ°äº†æ¯ä¸€ç»„paramså‚æ•°ï¼Œä½œä¸ºpropsä¼ ç»™Detailç»„ä»¶</span><br>  <span class="hljs-comment">// props:true</span><br>  <br>  <span class="hljs-comment">// propsçš„å‡½æ•°å†™æ³•ï¼Œä½œç”¨ï¼šæŠŠè¿”å›çš„å¯¹è±¡ä¸­æ¯ä¸€ç»„key-valueä½œä¸ºpropsä¼ ç»™Detailç»„ä»¶</span><br>  <span class="hljs-title function_">props</span>(<span class="hljs-params">route</span>)&#123;<br>    <span class="hljs-keyword">return</span> route.<span class="hljs-property">query</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="4-10-ã€-replaceå±æ€§ã€‘"><a href="#4-10-ã€-replaceå±æ€§ã€‘" class="headerlink" title="4.10. ã€ replaceå±æ€§ã€‘"></a>4.10. ã€ replaceå±æ€§ã€‘</h2><ol><li><p>ä½œç”¨ï¼šæ§åˆ¶è·¯ç”±è·³è½¬æ—¶æ“ä½œæµè§ˆå™¨å†å²è®°å½•çš„æ¨¡å¼ã€‚</p></li><li><p>æµè§ˆå™¨çš„å†å²è®°å½•æœ‰ä¸¤ç§å†™å…¥æ–¹å¼ï¼šåˆ†åˆ«ä¸º<code>push</code>å’Œ<code>replace</code>ï¼š</p><ul><li><code>push</code>æ˜¯è¿½åŠ å†å²è®°å½•ï¼ˆé»˜è®¤å€¼ï¼‰ã€‚</li><li><code>replace</code>æ˜¯æ›¿æ¢å½“å‰è®°å½•ã€‚</li></ul></li><li><p>å¼€å¯<code>replace</code>æ¨¡å¼ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;RouterLink replace .......&gt;News&lt;/RouterLink&gt;<br></code></pre></td></tr></table></figure></li></ol><h2 id="4-11-ã€ç¼–ç¨‹å¼å¯¼èˆªã€‘"><a href="#4-11-ã€ç¼–ç¨‹å¼å¯¼èˆªã€‘" class="headerlink" title="4.11. ã€ç¼–ç¨‹å¼å¯¼èˆªã€‘"></a>4.11. ã€ç¼–ç¨‹å¼å¯¼èˆªã€‘</h2><p>è·¯ç”±ç»„ä»¶çš„ä¸¤ä¸ªé‡è¦çš„å±æ€§ï¼š<code>$route</code>å’Œ<code>$router</code>å˜æˆäº†ä¸¤ä¸ª<code>hooks</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123;useRoute,useRouter&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span><br><br><span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>()<br><span class="hljs-keyword">const</span> router = <span class="hljs-title function_">useRouter</span>()<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(route.<span class="hljs-property">query</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(route.<span class="hljs-property">parmas</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(router.<span class="hljs-property">push</span>)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(router.<span class="hljs-property">replace</span>)<br></code></pre></td></tr></table></figure><h2 id="4-12-ã€é‡å®šå‘ã€‘"><a href="#4-12-ã€é‡å®šå‘ã€‘" class="headerlink" title="4.12. ã€é‡å®šå‘ã€‘"></a>4.12. ã€é‡å®šå‘ã€‘</h2><ol><li><p>ä½œç”¨ï¼šå°†ç‰¹å®šçš„è·¯å¾„ï¼Œé‡æ–°å®šå‘åˆ°å·²æœ‰è·¯ç”±ã€‚</p></li><li><p>å…·ä½“ç¼–ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;<br>    <span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;/&#x27;</span>,<br>    <span class="hljs-attr">redirect</span>:<span class="hljs-string">&#x27;/about&#x27;</span><br>&#125;<br></code></pre></td></tr></table></figure></li></ol><h1 id="5-pinia"><a href="#5-pinia" class="headerlink" title="5. pinia"></a>5. pinia</h1><h2 id="5-1ã€å‡†å¤‡ä¸€ä¸ªæ•ˆæœã€‘"><a href="#5-1ã€å‡†å¤‡ä¸€ä¸ªæ•ˆæœã€‘" class="headerlink" title="5.1ã€å‡†å¤‡ä¸€ä¸ªæ•ˆæœã€‘"></a>5.1ã€å‡†å¤‡ä¸€ä¸ªæ•ˆæœã€‘</h2><img src="./images/pinia_example.gif" alt="pinia_example" style="zoom:30%;border:3px solid" /> <h2 id="5-2ã€æ­å»º-pinia-ç¯å¢ƒã€‘"><a href="#5-2ã€æ­å»º-pinia-ç¯å¢ƒã€‘" class="headerlink" title="5.2ã€æ­å»º pinia ç¯å¢ƒã€‘"></a>5.2ã€æ­å»º pinia ç¯å¢ƒã€‘</h2><p>ç¬¬ä¸€æ­¥ï¼š<code>npm install pinia</code></p><p>ç¬¬äºŒæ­¥ï¼šæ“ä½œ<code>src/main.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><br><span class="hljs-comment">/* å¼•å…¥createPiniaï¼Œç”¨äºåˆ›å»ºpinia */</span><br><span class="hljs-keyword">import</span> &#123; createPinia &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span><br><br><span class="hljs-comment">/* åˆ›å»ºpinia */</span><br><span class="hljs-keyword">const</span> pinia = <span class="hljs-title function_">createPinia</span>()<br><span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)<br><br><span class="hljs-comment">/* ä½¿ç”¨æ’ä»¶ */</span>&#123;&#125;<br>app.<span class="hljs-title function_">use</span>(pinia)<br>app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">&#x27;#app&#x27;</span>)<br></code></pre></td></tr></table></figure><p>æ­¤æ—¶å¼€å‘è€…å·¥å…·ä¸­å·²ç»æœ‰äº†<code>pinia</code>é€‰é¡¹</p><img src="https://cdn.nlark.com/yuque/0/2023/png/35780599/1684309952481-c67f67f9-d1a3-4d69-8bd6-2b381e003f31.png" style="zoom:80%;border:1px solid black;border-radius:10px" /><h2 id="5-3ã€å­˜å‚¨-è¯»å–æ•°æ®ã€‘"><a href="#5-3ã€å­˜å‚¨-è¯»å–æ•°æ®ã€‘" class="headerlink" title="5.3ã€å­˜å‚¨+è¯»å–æ•°æ®ã€‘"></a>5.3ã€å­˜å‚¨+è¯»å–æ•°æ®ã€‘</h2><ol><li><p><code>Store</code>æ˜¯ä¸€ä¸ªä¿å­˜ï¼š<strong>çŠ¶æ€</strong>ã€<strong>ä¸šåŠ¡é€»è¾‘</strong> çš„å®ä½“ï¼Œæ¯ä¸ªç»„ä»¶éƒ½å¯ä»¥<strong>è¯»å–</strong>ã€<strong>å†™å…¥</strong>å®ƒã€‚</p></li><li><p>å®ƒæœ‰ä¸‰ä¸ªæ¦‚å¿µï¼š<code>state</code>ã€<code>getter</code>ã€<code>action</code>ï¼Œç›¸å½“äºç»„ä»¶ä¸­çš„ï¼š <code>data</code>ã€ <code>computed</code> å’Œ <code>methods</code>ã€‚</p></li><li><p>å…·ä½“ç¼–ç ï¼š<code>src/store/count.ts</code></p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-comment">// å¼•å…¥defineStoreç”¨äºåˆ›å»ºstore</span><br><span class="hljs-keyword">import</span> &#123;defineStore&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span><br><br><span class="hljs-comment">// å®šä¹‰å¹¶æš´éœ²ä¸€ä¸ªstore</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCountStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&#x27;count&#x27;</span>,&#123;<br>  <span class="hljs-comment">// åŠ¨ä½œ</span><br>  <span class="hljs-attr">actions</span>:&#123;&#125;,<br>  <span class="hljs-comment">// çŠ¶æ€</span><br>  <span class="hljs-title function_">state</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      <span class="hljs-attr">sum</span>:<span class="hljs-number">6</span><br>    &#125;<br>  &#125;,<br>  <span class="hljs-comment">// è®¡ç®—</span><br>  <span class="hljs-attr">getters</span>:&#123;&#125;<br>&#125;)<br></code></pre></td></tr></table></figure></li><li><p>å…·ä½“ç¼–ç ï¼š<code>src/store/talk.ts</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// å¼•å…¥defineStoreç”¨äºåˆ›å»ºstore</span><br><span class="hljs-keyword">import</span> &#123;defineStore&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span><br><br><span class="hljs-comment">// å®šä¹‰å¹¶æš´éœ²ä¸€ä¸ªstore</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useTalkStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&#x27;talk&#x27;</span>,&#123;<br>  <span class="hljs-comment">// åŠ¨ä½œ</span><br>  <span class="hljs-attr">actions</span>:&#123;&#125;,<br>  <span class="hljs-comment">// çŠ¶æ€</span><br>  <span class="hljs-title function_">state</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      <span class="hljs-attr">talkList</span>:[<br>        &#123;<span class="hljs-attr">id</span>:<span class="hljs-string">&#x27;yuysada01&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;ä½ ä»Šå¤©æœ‰ç‚¹æ€ªï¼Œå“ªé‡Œæ€ªï¼Ÿæ€ªå¥½çœ‹çš„ï¼&#x27;</span>&#125;,<br>     &#123;<span class="hljs-attr">id</span>:<span class="hljs-string">&#x27;yuysada02&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;è‰è“ã€è“è“ã€è”“è¶Šè“ï¼Œä½ æƒ³æˆ‘äº†æ²¡ï¼Ÿ&#x27;</span>&#125;,<br>        &#123;<span class="hljs-attr">id</span>:<span class="hljs-string">&#x27;yuysada03&#x27;</span>,<span class="hljs-attr">content</span>:<span class="hljs-string">&#x27;å¿ƒé‡Œç»™ä½ ç•™äº†ä¸€å—åœ°ï¼Œæˆ‘çš„æ­»å¿ƒå¡Œåœ°&#x27;</span>&#125;<br>      ]<br>    &#125;<br>  &#125;,<br>  <span class="hljs-comment">// è®¡ç®—</span><br>  <span class="hljs-attr">getters</span>:&#123;&#125;<br>&#125;)<br></code></pre></td></tr></table></figure></li><li><p>ç»„ä»¶ä¸­ä½¿ç”¨<code>state</code>ä¸­çš„æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;h2&gt;å½“å‰æ±‚å’Œä¸ºï¼š&#123;&#123; sumStore.sum &#125;&#125;&lt;/h2&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&quot;ts&quot; name=&quot;Count&quot;&gt;<br>  // å¼•å…¥å¯¹åº”çš„useXxxxxStore<br>  import &#123;useSumStore&#125; from &#x27;@/store/sum&#x27;<br>  <br>  // è°ƒç”¨useXxxxxStoreå¾—åˆ°å¯¹åº”çš„store<br>  const sumStore = useSumStore()<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;ul&gt;<br>    &lt;li v-for=&quot;talk in talkStore.talkList&quot; :key=&quot;talk.id&quot;&gt;<br>      &#123;&#123; talk.content &#125;&#125;<br>    &lt;/li&gt;<br>  &lt;/ul&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&quot;ts&quot; name=&quot;Count&quot;&gt;<br>  import axios from &#x27;axios&#x27;<br>  import &#123;useTalkStore&#125; from &#x27;@/store/talk&#x27;<br><br>  const talkStore = useTalkStore()<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure></li></ol><h2 id="5-4-ã€ä¿®æ”¹æ•°æ®ã€‘-ä¸‰ç§æ–¹å¼"><a href="#5-4-ã€ä¿®æ”¹æ•°æ®ã€‘-ä¸‰ç§æ–¹å¼" class="headerlink" title="5.4.ã€ä¿®æ”¹æ•°æ®ã€‘(ä¸‰ç§æ–¹å¼)"></a>5.4.ã€ä¿®æ”¹æ•°æ®ã€‘(ä¸‰ç§æ–¹å¼)</h2><ol><li><p>ç¬¬ä¸€ç§ä¿®æ”¹æ–¹å¼ï¼Œç›´æ¥ä¿®æ”¹</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ts">countStore.<span class="hljs-property">sum</span> = <span class="hljs-number">666</span><br></code></pre></td></tr></table></figure></li><li><p>ç¬¬äºŒç§ä¿®æ”¹æ–¹å¼ï¼šæ‰¹é‡ä¿®æ”¹</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ts">countStore.$patch(&#123;<br>  <span class="hljs-attr">sum</span>:<span class="hljs-number">999</span>,<br>  <span class="hljs-attr">school</span>:<span class="hljs-string">&#x27;atguigu&#x27;</span><br>&#125;)<br></code></pre></td></tr></table></figure></li><li><p>ç¬¬ä¸‰ç§ä¿®æ”¹æ–¹å¼ï¼šå€ŸåŠ©<code>action</code>ä¿®æ”¹ï¼ˆ<code>action</code>ä¸­å¯ä»¥ç¼–å†™ä¸€äº›ä¸šåŠ¡é€»è¾‘ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; defineStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCountStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&#x27;count&#x27;</span>, &#123;<br>  <span class="hljs-comment">/*************/</span><br>  <span class="hljs-attr">actions</span>: &#123;<br>    <span class="hljs-comment">//åŠ </span><br>    <span class="hljs-title function_">increment</span>(<span class="hljs-params">value:number</span>) &#123;<br>      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">sum</span> &lt; <span class="hljs-number">10</span>) &#123;<br>        <span class="hljs-comment">//æ“ä½œcountStoreä¸­çš„sum</span><br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">sum</span> += value<br>      &#125;<br>    &#125;,<br>    <span class="hljs-comment">//å‡</span><br>    <span class="hljs-title function_">decrement</span>(<span class="hljs-params">value:number</span>)&#123;<br>      <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">sum</span> &gt; <span class="hljs-number">1</span>)&#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">sum</span> -= value<br>      &#125;<br>    &#125;<br>  &#125;,<br>  <span class="hljs-comment">/*************/</span><br>&#125;)<br></code></pre></td></tr></table></figure></li><li><p>ç»„ä»¶ä¸­è°ƒç”¨<code>action</code>å³å¯</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// ä½¿ç”¨countStore</span><br><span class="hljs-keyword">const</span> countStore = <span class="hljs-title function_">useCountStore</span>()<br><br><span class="hljs-comment">// è°ƒç”¨å¯¹åº”action</span><br>countStore.<span class="hljs-title function_">incrementOdd</span>(n.<span class="hljs-property">value</span>)<br></code></pre></td></tr></table></figure></li></ol><h2 id="5-5-ã€storeToRefsã€‘"><a href="#5-5-ã€storeToRefsã€‘" class="headerlink" title="5.5.ã€storeToRefsã€‘"></a>5.5.ã€storeToRefsã€‘</h2><ul><li>å€ŸåŠ©<code>storeToRefs</code>å°†<code>store</code>ä¸­çš„æ•°æ®è½¬ä¸º<code>ref</code>å¯¹è±¡ï¼Œæ–¹ä¾¿åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ã€‚</li><li>æ³¨æ„ï¼š<code>pinia</code>æä¾›çš„<code>storeToRefs</code>åªä¼šå°†æ•°æ®åšè½¬æ¢ï¼Œè€Œ<code>Vue</code>çš„<code>toRefs</code>ä¼šè½¬æ¢<code>store</code>ä¸­æ•°æ®ã€‚</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;div class=&quot;count&quot;&gt;<br>&lt;h2&gt;å½“å‰æ±‚å’Œä¸ºï¼š&#123;&#123;sum&#125;&#125;&lt;/h2&gt;<br>&lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&quot;ts&quot; name=&quot;Count&quot;&gt;<br>  import &#123; useCountStore &#125; from &#x27;@/store/count&#x27;<br>  /* å¼•å…¥storeToRefs */<br>  import &#123; storeToRefs &#125; from &#x27;pinia&#x27;<br><br>/* å¾—åˆ°countStore */<br>  const countStore = useCountStore()<br>  /* ä½¿ç”¨storeToRefsè½¬æ¢countStoreï¼Œéšåè§£æ„ */<br>  const &#123;sum&#125; = storeToRefs(countStore)<br>&lt;/script&gt;<br><br></code></pre></td></tr></table></figure><h2 id="5-6-ã€gettersã€‘"><a href="#5-6-ã€gettersã€‘" class="headerlink" title="5.6.ã€gettersã€‘"></a>5.6.ã€gettersã€‘</h2><ol><li><p>æ¦‚å¿µï¼šå½“<code>state</code>ä¸­çš„æ•°æ®ï¼Œéœ€è¦ç»è¿‡å¤„ç†åå†ä½¿ç”¨æ—¶ï¼Œå¯ä»¥ä½¿ç”¨<code>getters</code>é…ç½®ã€‚</p></li><li><p>è¿½åŠ <code>getters</code>é…ç½®ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// å¼•å…¥defineStoreç”¨äºåˆ›å»ºstore</span><br><span class="hljs-keyword">import</span> &#123;defineStore&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span><br><br><span class="hljs-comment">// å®šä¹‰å¹¶æš´éœ²ä¸€ä¸ªstore</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCountStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&#x27;count&#x27;</span>,&#123;<br>  <span class="hljs-comment">// åŠ¨ä½œ</span><br>  <span class="hljs-attr">actions</span>:&#123;<br>    <span class="hljs-comment">/************/</span><br>  &#125;,<br>  <span class="hljs-comment">// çŠ¶æ€</span><br>  <span class="hljs-title function_">state</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      <span class="hljs-attr">sum</span>:<span class="hljs-number">1</span>,<br>      <span class="hljs-attr">school</span>:<span class="hljs-string">&#x27;atguigu&#x27;</span><br>    &#125;<br>  &#125;,<br>  <span class="hljs-comment">// è®¡ç®—</span><br>  <span class="hljs-attr">getters</span>:&#123;<br>    <span class="hljs-attr">bigSum</span>:(state):<span class="hljs-function"><span class="hljs-params">number</span> =&gt;</span> state.<span class="hljs-property">sum</span> *<span class="hljs-number">10</span>,<br>    <span class="hljs-title function_">upperSchool</span>():string&#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>. school.<span class="hljs-title function_">toUpperCase</span>()<br>    &#125;<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure></li><li><p>ç»„ä»¶ä¸­è¯»å–æ•°æ®ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> &#123;increment,decrement&#125; = countStore<br><span class="hljs-keyword">let</span> &#123;sum,school,bigSum,upperSchool&#125; = <span class="hljs-title function_">storeToRefs</span>(countStore)<br></code></pre></td></tr></table></figure></li></ol><h2 id="5-7-ã€-subscribeã€‘"><a href="#5-7-ã€-subscribeã€‘" class="headerlink" title="5.7.ã€$subscribeã€‘"></a>5.7.ã€$subscribeã€‘</h2><p>é€šè¿‡ store çš„ <code>$subscribe()</code> æ–¹æ³•ä¾¦å¬ <code>state</code> åŠå…¶å˜åŒ–</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ts">talkStore.$subscribe(<span class="hljs-function">(<span class="hljs-params">mutate,state</span>)=&gt;</span>&#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;LoveTalk&#x27;</span>,mutate,state)<br>  <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&#x27;talk&#x27;</span>,<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(talkList.<span class="hljs-property">value</span>))<br>&#125;)<br></code></pre></td></tr></table></figure><h2 id="5-8-ã€storeç»„åˆå¼å†™æ³•ã€‘"><a href="#5-8-ã€storeç»„åˆå¼å†™æ³•ã€‘" class="headerlink" title="5.8. ã€storeç»„åˆå¼å†™æ³•ã€‘"></a>5.8. ã€storeç»„åˆå¼å†™æ³•ã€‘</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123;defineStore&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span><br><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br><span class="hljs-keyword">import</span> &#123;nanoid&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;nanoid&#x27;</span><br><span class="hljs-keyword">import</span> &#123;reactive&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useTalkStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&#x27;talk&#x27;</span>,<span class="hljs-function">()=&gt;</span>&#123;<br>  <span class="hljs-comment">// talkListå°±æ˜¯state</span><br>  <span class="hljs-keyword">const</span> talkList = <span class="hljs-title function_">reactive</span>(<br>    <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&#x27;talkList&#x27;</span>) <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>) || []<br>  )<br><br>  <span class="hljs-comment">// getATalkå‡½æ•°ç›¸å½“äºaction</span><br>  <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getATalk</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-comment">// å‘è¯·æ±‚ï¼Œä¸‹é¢è¿™è¡Œçš„å†™æ³•æ˜¯ï¼šè¿ç»­è§£æ„èµ‹å€¼+é‡å‘½å</span><br>    <span class="hljs-keyword">let</span> &#123;<span class="hljs-attr">data</span>:&#123;<span class="hljs-attr">content</span>:title&#125;&#125; = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;https://api.uomg.com/api/rand.qinghua?format=json&#x27;</span>)<br>    <span class="hljs-comment">// æŠŠè¯·æ±‚å›æ¥çš„å­—ç¬¦ä¸²ï¼ŒåŒ…è£…æˆä¸€ä¸ªå¯¹è±¡</span><br>    <span class="hljs-keyword">let</span> obj = &#123;<span class="hljs-attr">id</span>:<span class="hljs-title function_">nanoid</span>(),title&#125;<br>    <span class="hljs-comment">// æ”¾åˆ°æ•°ç»„ä¸­</span><br>    talkList.<span class="hljs-title function_">unshift</span>(obj)<br>  &#125;<br>  <span class="hljs-keyword">return</span> &#123;talkList,getATalk&#125;<br>&#125;)<br></code></pre></td></tr></table></figure><h1 id="6-ç»„ä»¶é€šä¿¡"><a href="#6-ç»„ä»¶é€šä¿¡" class="headerlink" title="6. ç»„ä»¶é€šä¿¡"></a>6. ç»„ä»¶é€šä¿¡</h1><p><strong><code>Vue3</code>ç»„ä»¶é€šä¿¡å’Œ<code>Vue2</code>çš„åŒºåˆ«ï¼š</strong></p><ul><li>ç§»å‡ºäº‹ä»¶æ€»çº¿ï¼Œä½¿ç”¨<code>mitt</code>ä»£æ›¿ã€‚</li></ul><ul><li><code>vuex</code>æ¢æˆäº†<code>pinia</code>ã€‚</li><li>æŠŠ<code>.sync</code>ä¼˜åŒ–åˆ°äº†<code>v-model</code>é‡Œé¢äº†ã€‚</li><li>æŠŠ<code>$listeners</code>æ‰€æœ‰çš„ä¸œè¥¿ï¼Œåˆå¹¶åˆ°<code>$attrs</code>ä¸­äº†ã€‚</li><li><code>$children</code>è¢«ç æ‰äº†ã€‚</li></ul><p><strong>å¸¸è§æ­é…å½¢å¼ï¼š</strong></p><img src="images/image-20231119185900990.png" alt="image-20231119185900990" style="zoom:60%;" /> <h2 id="6-1-ã€propsã€‘"><a href="#6-1-ã€propsã€‘" class="headerlink" title="6.1. ã€propsã€‘"></a>6.1. ã€propsã€‘</h2><p>æ¦‚è¿°ï¼š<code>props</code>æ˜¯ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„ä¸€ç§é€šä¿¡æ–¹å¼ï¼Œå¸¸ç”¨ä¸ ï¼š<strong>çˆ¶ â†” å­</strong>ã€‚</p><ul><li>è‹¥ <strong>çˆ¶ä¼ å­</strong>ï¼šå±æ€§å€¼æ˜¯<strong>éå‡½æ•°</strong>ã€‚</li><li>è‹¥ <strong>å­ä¼ çˆ¶</strong>ï¼šå±æ€§å€¼æ˜¯<strong>å‡½æ•°</strong>ã€‚</li></ul><p>çˆ¶ç»„ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;father&quot;&gt;<br>    &lt;h3&gt;çˆ¶ç»„ä»¶ï¼Œ&lt;/h3&gt;<br>&lt;h4&gt;æˆ‘çš„è½¦ï¼š&#123;&#123; car &#125;&#125;&lt;/h4&gt;<br>&lt;h4&gt;å„¿å­ç»™çš„ç©å…·ï¼š&#123;&#123; toy &#125;&#125;&lt;/h4&gt;<br>&lt;Child :car=&quot;car&quot; :getToy=&quot;getToy&quot;/&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&quot;ts&quot; name=&quot;Father&quot;&gt;<br>import Child from &#x27;./Child.vue&#x27;<br>import &#123; ref &#125; from &quot;vue&quot;;<br>// æ•°æ®<br>const car = ref(&#x27;å¥”é©°&#x27;)<br>const toy = ref()<br>// æ–¹æ³•<br>function getToy(value:string)&#123;<br>toy.value = value<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>å­ç»„ä»¶</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;child&quot;&gt;<br>    &lt;h3&gt;å­ç»„ä»¶&lt;/h3&gt;<br>&lt;h4&gt;æˆ‘çš„ç©å…·ï¼š&#123;&#123; toy &#125;&#125;&lt;/h4&gt;<br>&lt;h4&gt;çˆ¶ç»™æˆ‘çš„è½¦ï¼š&#123;&#123; car &#125;&#125;&lt;/h4&gt;<br>&lt;button @click=&quot;getToy(toy)&quot;&gt;ç©å…·ç»™çˆ¶äº²&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&quot;ts&quot; name=&quot;Child&quot;&gt;<br>import &#123; ref &#125; from &quot;vue&quot;;<br>const toy = ref(&#x27;å¥¥ç‰¹æ›¼&#x27;)<br><br>defineProps([&#x27;car&#x27;,&#x27;getToy&#x27;])<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h2 id="6-2-ã€è‡ªå®šä¹‰äº‹ä»¶ã€‘"><a href="#6-2-ã€è‡ªå®šä¹‰äº‹ä»¶ã€‘" class="headerlink" title="6.2. ã€è‡ªå®šä¹‰äº‹ä»¶ã€‘"></a>6.2. ã€è‡ªå®šä¹‰äº‹ä»¶ã€‘</h2><ol><li>æ¦‚è¿°ï¼šè‡ªå®šä¹‰äº‹ä»¶å¸¸ç”¨äºï¼š<strong>å­ &#x3D;&gt; çˆ¶ã€‚</strong></li><li>æ³¨æ„åŒºåˆ†å¥½ï¼šåŸç”Ÿäº‹ä»¶ã€è‡ªå®šä¹‰äº‹ä»¶ã€‚</li></ol><ul><li>åŸç”Ÿäº‹ä»¶ï¼š<ul><li>äº‹ä»¶åæ˜¯ç‰¹å®šçš„ï¼ˆ<code>click</code>ã€<code>mosueenter</code>ç­‰ç­‰ï¼‰</li><li>äº‹ä»¶å¯¹è±¡<code>$event</code>: æ˜¯åŒ…å«äº‹ä»¶ç›¸å…³ä¿¡æ¯çš„å¯¹è±¡ï¼ˆ<code>pageX</code>ã€<code>pageY</code>ã€<code>target</code>ã€<code>keyCode</code>ï¼‰</li></ul></li><li>è‡ªå®šä¹‰äº‹ä»¶ï¼š<ul><li>äº‹ä»¶åæ˜¯ä»»æ„åç§°</li><li><strong style="color:red">äº‹ä»¶å¯¹è±¡<code>$event</code>: æ˜¯è°ƒç”¨<code>emit</code>æ—¶æ‰€æä¾›çš„æ•°æ®ï¼Œå¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼ï¼ï¼</strong ></li></ul></li></ul><ol start="3"><li><p>ç¤ºä¾‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!--åœ¨çˆ¶ç»„ä»¶ä¸­ï¼Œç»™å­ç»„ä»¶ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼š--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">Child</span> @<span class="hljs-attr">send-toy</span>=<span class="hljs-string">&quot;toy = $event&quot;</span>/&gt;</span><br><br><span class="hljs-comment">&lt;!--æ³¨æ„åŒºåˆ†åŸç”Ÿäº‹ä»¶ä¸è‡ªå®šä¹‰äº‹ä»¶ä¸­çš„$event--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;toy = $event&quot;</span>&gt;</span>æµ‹è¯•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//å­ç»„ä»¶ä¸­ï¼Œè§¦å‘äº‹ä»¶ï¼š</span><br><span class="hljs-variable language_">this</span>.$emit(<span class="hljs-string">&#x27;send-toy&#x27;</span>, å…·ä½“æ•°æ®)<br></code></pre></td></tr></table></figure></li></ol><h2 id="6-3-ã€mittã€‘"><a href="#6-3-ã€mittã€‘" class="headerlink" title="6.3. ã€mittã€‘"></a>6.3. ã€mittã€‘</h2><p>æ¦‚è¿°ï¼šä¸æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒï¼ˆ<code>pubsub</code>ï¼‰åŠŸèƒ½ç±»ä¼¼ï¼Œå¯ä»¥å®ç°ä»»æ„ç»„ä»¶é—´é€šä¿¡ã€‚</p><p>å®‰è£…<code>mitt</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm i mitt<br></code></pre></td></tr></table></figure><p>æ–°å»ºæ–‡ä»¶ï¼š<code>src\utils\emitter.ts</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// å¼•å…¥mitt </span><br><span class="hljs-keyword">import</span> mitt <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;mitt&quot;</span>;<br><br><span class="hljs-comment">// åˆ›å»ºemitter</span><br><span class="hljs-keyword">const</span> emitter = <span class="hljs-title function_">mitt</span>()<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">  // ç»‘å®šäº‹ä»¶</span><br><span class="hljs-comment">  emitter.on(&#x27;abc&#x27;,(value)=&gt;&#123;</span><br><span class="hljs-comment">    console.log(&#x27;abcäº‹ä»¶è¢«è§¦å‘&#x27;,value)</span><br><span class="hljs-comment">  &#125;)</span><br><span class="hljs-comment">  emitter.on(&#x27;xyz&#x27;,(value)=&gt;&#123;</span><br><span class="hljs-comment">    console.log(&#x27;xyzäº‹ä»¶è¢«è§¦å‘&#x27;,value)</span><br><span class="hljs-comment">  &#125;)</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">  setInterval(() =&gt; &#123;</span><br><span class="hljs-comment">    // è§¦å‘äº‹ä»¶</span><br><span class="hljs-comment">    emitter.emit(&#x27;abc&#x27;,666)</span><br><span class="hljs-comment">    emitter.emit(&#x27;xyz&#x27;,777)</span><br><span class="hljs-comment">  &#125;, 1000);</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">  setTimeout(() =&gt; &#123;</span><br><span class="hljs-comment">    // æ¸…ç†äº‹ä»¶</span><br><span class="hljs-comment">    emitter.all.clear()</span><br><span class="hljs-comment">  &#125;, 3000); </span><br><span class="hljs-comment">*/</span><br><br><span class="hljs-comment">// åˆ›å»ºå¹¶æš´éœ²mitt</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> emitter<br></code></pre></td></tr></table></figure><p>æ¥æ”¶æ•°æ®çš„ç»„ä»¶ä¸­ï¼šç»‘å®šäº‹ä»¶ã€åŒæ—¶åœ¨é”€æ¯å‰è§£ç»‘äº‹ä»¶ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> emitter <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/utils/emitter&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; onUnmounted &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;<br><br><span class="hljs-comment">// ç»‘å®šäº‹ä»¶</span><br>emitter.<span class="hljs-title function_">on</span>(<span class="hljs-string">&#x27;send-toy&#x27;</span>,<span class="hljs-function">(<span class="hljs-params">value</span>)=&gt;</span>&#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;send-toyäº‹ä»¶è¢«è§¦å‘&#x27;</span>,value)<br>&#125;)<br><br><span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">()=&gt;</span>&#123;<br>  <span class="hljs-comment">// è§£ç»‘äº‹ä»¶</span><br>  emitter.<span class="hljs-title function_">off</span>(<span class="hljs-string">&#x27;send-toy&#x27;</span>)<br>&#125;)<br></code></pre></td></tr></table></figure><p>ã€ç¬¬ä¸‰æ­¥ã€‘ï¼šæä¾›æ•°æ®çš„ç»„ä»¶ï¼Œåœ¨åˆé€‚çš„æ—¶å€™è§¦å‘äº‹ä»¶</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">import</span> emitter <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/utils/emitter&quot;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">sendToy</span>(<span class="hljs-params"></span>)&#123;<br>  <span class="hljs-comment">// è§¦å‘äº‹ä»¶</span><br>  emitter.<span class="hljs-title function_">emit</span>(<span class="hljs-string">&#x27;send-toy&#x27;</span>,toy.<span class="hljs-property">value</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>æ³¨æ„è¿™ä¸ªé‡è¦çš„å†…ç½®å…³ç³»ï¼Œæ€»çº¿ä¾èµ–ç€è¿™ä¸ªå†…ç½®å…³ç³»</strong></p><h2 id="6-4-ã€v-modelã€‘"><a href="#6-4-ã€v-modelã€‘" class="headerlink" title="6.4.ã€v-modelã€‘"></a>6.4.ã€v-modelã€‘</h2><ol><li><p>æ¦‚è¿°ï¼šå®ç° <strong>çˆ¶â†”å­</strong> ä¹‹é—´ç›¸äº’é€šä¿¡ã€‚</p></li><li><p>å‰åºçŸ¥è¯† â€”â€” <code>v-model</code>çš„æœ¬è´¨</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- ä½¿ç”¨v-modelæŒ‡ä»¤ --&gt;<br>&lt;input type=&quot;text&quot; v-model=&quot;userName&quot;&gt;<br><br>&lt;!-- v-modelçš„æœ¬è´¨æ˜¯ä¸‹é¢è¿™è¡Œä»£ç  --&gt;<br>&lt;input <br>  type=&quot;text&quot; <br>  :value=&quot;userName&quot; <br>  @input=&quot;userName =(&lt;HTMLInputElement&gt;$event.target).value&quot;<br>&gt;<br></code></pre></td></tr></table></figure></li><li><p>ç»„ä»¶æ ‡ç­¾ä¸Šçš„<code>v-model</code>çš„æœ¬è´¨ï¼š<code>:moldeValue</code> ï¼‹ <code>update:modelValue</code>äº‹ä»¶ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- ç»„ä»¶æ ‡ç­¾ä¸Šä½¿ç”¨v-modelæŒ‡ä»¤ --&gt;<br>&lt;AtguiguInput v-model=&quot;userName&quot;/&gt;<br><br>&lt;!-- ç»„ä»¶æ ‡ç­¾ä¸Šv-modelçš„æœ¬è´¨ --&gt;<br>&lt;AtguiguInput :modelValue=&quot;userName&quot; @update:model-value=&quot;userName = $event&quot;/&gt;<br></code></pre></td></tr></table></figure><p><code>AtguiguInput</code>ç»„ä»¶ä¸­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;box&quot;&gt;<br>    &lt;!--å°†æ¥æ”¶çš„valueå€¼èµ‹ç»™inputå…ƒç´ çš„valueå±æ€§ï¼Œç›®çš„æ˜¯ï¼šä¸ºäº†å‘ˆç°æ•°æ® --&gt;<br>&lt;!--ç»™inputå…ƒç´ ç»‘å®šåŸç”Ÿinputäº‹ä»¶ï¼Œè§¦å‘inputäº‹ä»¶æ—¶ï¼Œè¿›è€Œè§¦å‘update:model-valueäº‹ä»¶--&gt;<br>    &lt;input <br>       type=&quot;text&quot; <br>       :value=&quot;modelValue&quot; <br>       @input=&quot;emit(&#x27;update:model-value&#x27;,$event.target.value)&quot;<br>    &gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&quot;ts&quot; name=&quot;AtguiguInput&quot;&gt;<br>  // æ¥æ”¶props<br>  defineProps([&#x27;modelValue&#x27;])<br>  // å£°æ˜äº‹ä»¶<br>  const emit = defineEmits([&#x27;update:model-value&#x27;])<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure></li><li><p>ä¹Ÿå¯ä»¥æ›´æ¢<code>value</code>ï¼Œä¾‹å¦‚æ”¹æˆ<code>abc</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- ä¹Ÿå¯ä»¥æ›´æ¢valueï¼Œä¾‹å¦‚æ”¹æˆabc--&gt;<br>&lt;AtguiguInput v-model:abc=&quot;userName&quot;/&gt;<br><br>&lt;!-- ä¸Šé¢ä»£ç çš„æœ¬è´¨å¦‚ä¸‹ --&gt;<br>&lt;AtguiguInput :abc=&quot;userName&quot; @update:abc=&quot;userName = $event&quot;/&gt;<br></code></pre></td></tr></table></figure><p><code>AtguiguInput</code>ç»„ä»¶ä¸­ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;box&quot;&gt;<br>    &lt;input <br>       type=&quot;text&quot; <br>       :value=&quot;abc&quot; <br>       @input=&quot;emit(&#x27;update:abc&#x27;,$event.target.value)&quot;<br>    &gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&quot;ts&quot; name=&quot;AtguiguInput&quot;&gt;<br>  // æ¥æ”¶props<br>  defineProps([&#x27;abc&#x27;])<br>  // å£°æ˜äº‹ä»¶<br>  const emit = defineEmits([&#x27;update:abc&#x27;])<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure></li><li><p>å¦‚æœ<code>value</code>å¯ä»¥æ›´æ¢ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨ç»„ä»¶æ ‡ç­¾ä¸Šå¤šæ¬¡ä½¿ç”¨<code>v-model</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;AtguiguInput v-model:abc=&quot;userName&quot; v-model:xyz=&quot;password&quot;/&gt;<br></code></pre></td></tr></table></figure></li></ol><h2 id="6-5-ã€-attrs-ã€‘"><a href="#6-5-ã€-attrs-ã€‘" class="headerlink" title="6.5.ã€$attrs ã€‘"></a>6.5.ã€$attrs ã€‘</h2><ol><li><p>æ¦‚è¿°ï¼š<code>$attrs</code>ç”¨äºå®ç°<strong>å½“å‰ç»„ä»¶çš„çˆ¶ç»„ä»¶</strong>ï¼Œå‘<strong>å½“å‰ç»„ä»¶çš„å­ç»„ä»¶</strong>é€šä¿¡ï¼ˆ<strong>ç¥–â†’å­™</strong>ï¼‰ã€‚</p></li><li><p>å…·ä½“è¯´æ˜ï¼š<code>$attrs</code>æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«æ‰€æœ‰çˆ¶ç»„ä»¶ä¼ å…¥çš„æ ‡ç­¾å±æ€§ã€‚</p><blockquote><p> æ³¨æ„ï¼š<code>$attrs</code>ä¼šè‡ªåŠ¨æ’é™¤<code>props</code>ä¸­å£°æ˜çš„å±æ€§(å¯ä»¥è®¤ä¸ºå£°æ˜è¿‡çš„ <code>props</code> è¢«å­ç»„ä»¶è‡ªå·±â€œæ¶ˆè´¹â€äº†)</p></blockquote></li></ol><p>çˆ¶ç»„ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;father&quot;&gt;<br>    &lt;h3&gt;çˆ¶ç»„ä»¶&lt;/h3&gt;<br>&lt;Child :a=&quot;a&quot; :b=&quot;b&quot; :c=&quot;c&quot; :d=&quot;d&quot; v-bind=&quot;&#123;x:100,y:200&#125;&quot; :updateA=&quot;updateA&quot;/&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&quot;ts&quot; name=&quot;Father&quot;&gt;<br>import Child from &#x27;./Child.vue&#x27;<br>import &#123; ref &#125; from &quot;vue&quot;;<br>let a = ref(1)<br>let b = ref(2)<br>let c = ref(3)<br>let d = ref(4)<br><br>function updateA(value)&#123;<br>a.value = value<br>&#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>å­ç»„ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;div class=&quot;child&quot;&gt;<br>&lt;h3&gt;å­ç»„ä»¶&lt;/h3&gt;<br>&lt;GrandChild v-bind=&quot;$attrs&quot;/&gt;<br>&lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&quot;ts&quot; name=&quot;Child&quot;&gt;<br>import GrandChild from &#x27;./GrandChild.vue&#x27;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>å­™ç»„ä»¶ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;div class=&quot;grand-child&quot;&gt;<br>&lt;h3&gt;å­™ç»„ä»¶&lt;/h3&gt;<br>&lt;h4&gt;aï¼š&#123;&#123; a &#125;&#125;&lt;/h4&gt;<br>&lt;h4&gt;bï¼š&#123;&#123; b &#125;&#125;&lt;/h4&gt;<br>&lt;h4&gt;cï¼š&#123;&#123; c &#125;&#125;&lt;/h4&gt;<br>&lt;h4&gt;dï¼š&#123;&#123; d &#125;&#125;&lt;/h4&gt;<br>&lt;h4&gt;xï¼š&#123;&#123; x &#125;&#125;&lt;/h4&gt;<br>&lt;h4&gt;yï¼š&#123;&#123; y &#125;&#125;&lt;/h4&gt;<br>&lt;button @click=&quot;updateA(666)&quot;&gt;ç‚¹æˆ‘æ›´æ–°A&lt;/button&gt;<br>&lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&quot;ts&quot; name=&quot;GrandChild&quot;&gt;<br>defineProps([&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;,&#x27;d&#x27;,&#x27;x&#x27;,&#x27;y&#x27;,&#x27;updateA&#x27;])<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h2 id="6-6-ã€-refsã€-parentã€‘"><a href="#6-6-ã€-refsã€-parentã€‘" class="headerlink" title="6.6. ã€$refsã€$parentã€‘"></a>6.6. ã€$refsã€$parentã€‘</h2><ol><li><p>æ¦‚è¿°ï¼š</p><ul><li><code>$refs</code>ç”¨äº ï¼š<strong>çˆ¶â†’å­ã€‚</strong></li><li><code>$parent</code>ç”¨äºï¼š<strong>å­â†’çˆ¶ã€‚</strong></li></ul></li><li><p>åŸç†å¦‚ä¸‹ï¼š</p><table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>$refs</code></td><td>å€¼ä¸ºå¯¹è±¡ï¼ŒåŒ…å«æ‰€æœ‰è¢«<code>ref</code>å±æ€§æ ‡è¯†çš„<code>DOM</code>å…ƒç´ æˆ–ç»„ä»¶å®ä¾‹ã€‚</td></tr><tr><td><code>$parent</code></td><td>å€¼ä¸ºå¯¹è±¡ï¼Œå½“å‰ç»„ä»¶çš„çˆ¶ç»„ä»¶å®ä¾‹å¯¹è±¡ã€‚</td></tr></tbody></table></li></ol><h2 id="6-7-ã€provideã€injectã€‘"><a href="#6-7-ã€provideã€injectã€‘" class="headerlink" title="6.7. ã€provideã€injectã€‘"></a>6.7. ã€provideã€injectã€‘</h2><ol><li><p>æ¦‚è¿°ï¼šå®ç°<strong>ç¥–å­™ç»„ä»¶</strong>ç›´æ¥é€šä¿¡</p></li><li><p>å…·ä½“ä½¿ç”¨ï¼š</p><ul><li>åœ¨ç¥–å…ˆç»„ä»¶ä¸­é€šè¿‡<code>provide</code>é…ç½®å‘åä»£ç»„ä»¶æä¾›æ•°æ®</li><li>åœ¨åä»£ç»„ä»¶ä¸­é€šè¿‡<code>inject</code>é…ç½®æ¥å£°æ˜æ¥æ”¶æ•°æ®</li></ul></li><li><p>å…·ä½“ç¼–ç ï¼š</p><p>ã€ç¬¬ä¸€æ­¥ã€‘çˆ¶ç»„ä»¶ä¸­ï¼Œä½¿ç”¨<code>provide</code>æä¾›æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;father&quot;&gt;<br>    &lt;h3&gt;çˆ¶ç»„ä»¶&lt;/h3&gt;<br>    &lt;h4&gt;èµ„äº§ï¼š&#123;&#123; money &#125;&#125;&lt;/h4&gt;<br>    &lt;h4&gt;æ±½è½¦ï¼š&#123;&#123; car &#125;&#125;&lt;/h4&gt;<br>    &lt;button @click=&quot;money += 1&quot;&gt;èµ„äº§+1&lt;/button&gt;<br>    &lt;button @click=&quot;car.price += 1&quot;&gt;æ±½è½¦ä»·æ ¼+1&lt;/button&gt;<br>    &lt;Child/&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&quot;ts&quot; name=&quot;Father&quot;&gt;<br>  import Child from &#x27;./Child.vue&#x27;<br>  import &#123; ref,reactive,provide &#125; from &quot;vue&quot;;<br>  // æ•°æ®<br>  let money = ref(100)<br>  let car = reactive(&#123;<br>    brand:&#x27;å¥”é©°&#x27;,<br>    price:100<br>  &#125;)<br>  // ç”¨äºæ›´æ–°moneyçš„æ–¹æ³•<br>  function updateMoney(value:number)&#123;<br>    money.value += value<br>  &#125;<br>  // æä¾›æ•°æ®<br>  provide(&#x27;moneyContext&#x27;,&#123;money,updateMoney&#125;)<br>  provide(&#x27;car&#x27;,car)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šå­ç»„ä»¶ä¸­ä¸ç”¨ç¼–å†™ä»»ä½•ä¸œè¥¿ï¼Œæ˜¯ä¸å—åˆ°ä»»ä½•æ‰“æ‰°çš„</p></blockquote><p>ã€ç¬¬äºŒæ­¥ã€‘å­™ç»„ä»¶ä¸­ä½¿ç”¨<code>inject</code>é…ç½®é¡¹æ¥å—æ•°æ®ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;div class=&quot;grand-child&quot;&gt;<br>    &lt;h3&gt;æˆ‘æ˜¯å­™ç»„ä»¶&lt;/h3&gt;<br>    &lt;h4&gt;èµ„äº§ï¼š&#123;&#123; money &#125;&#125;&lt;/h4&gt;<br>    &lt;h4&gt;æ±½è½¦ï¼š&#123;&#123; car &#125;&#125;&lt;/h4&gt;<br>    &lt;button @click=&quot;updateMoney(6)&quot;&gt;ç‚¹æˆ‘&lt;/button&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script setup lang=&quot;ts&quot; name=&quot;GrandChild&quot;&gt;<br>  import &#123; inject &#125; from &#x27;vue&#x27;;<br>  // æ³¨å…¥æ•°æ®<br> let &#123;money,updateMoney&#125; = inject(&#x27;moneyContext&#x27;,&#123;money:0,updateMoney:(x:number)=&gt;&#123;&#125;&#125;)<br>  let car = inject(&#x27;car&#x27;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure></li></ol><h2 id="6-8-ã€piniaã€‘"><a href="#6-8-ã€piniaã€‘" class="headerlink" title="6.8. ã€piniaã€‘"></a>6.8. ã€piniaã€‘</h2><p>å‚è€ƒä¹‹å‰<code>pinia</code>éƒ¨åˆ†çš„è®²è§£</p><h2 id="6-9-ã€slotã€‘"><a href="#6-9-ã€slotã€‘" class="headerlink" title="6.9. ã€slotã€‘"></a>6.9. ã€slotã€‘</h2><h3 id="1-é»˜è®¤æ’æ§½"><a href="#1-é»˜è®¤æ’æ§½" class="headerlink" title="1. é»˜è®¤æ’æ§½"></a>1. é»˜è®¤æ’æ§½</h3><p><img src="http://49.232.112.44/images/default_slot.png" alt="img"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs vue">çˆ¶ç»„ä»¶ä¸­ï¼š<br>        &lt;Category title=&quot;ä»Šæ—¥çƒ­é—¨æ¸¸æˆ&quot;&gt;<br>          &lt;ul&gt;<br>            &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;<br>          &lt;/ul&gt;<br>        &lt;/Category&gt;<br>å­ç»„ä»¶ä¸­ï¼š<br>        &lt;template&gt;<br>          &lt;div class=&quot;item&quot;&gt;<br>            &lt;h3&gt;&#123;&#123; title &#125;&#125;&lt;/h3&gt;<br>            &lt;!-- é»˜è®¤æ’æ§½ --&gt;<br>            &lt;slot&gt;&lt;/slot&gt;<br>          &lt;/div&gt;<br>        &lt;/template&gt;<br></code></pre></td></tr></table></figure><h3 id="2-å…·åæ’æ§½"><a href="#2-å…·åæ’æ§½" class="headerlink" title="2. å…·åæ’æ§½"></a>2. å…·åæ’æ§½</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs vue">çˆ¶ç»„ä»¶ä¸­ï¼š<br>        &lt;Category title=&quot;ä»Šæ—¥çƒ­é—¨æ¸¸æˆ&quot;&gt;<br>          &lt;template v-slot:s1&gt;<br>            &lt;ul&gt;<br>              &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;<br>            &lt;/ul&gt;<br>          &lt;/template&gt;<br>          &lt;template #s2&gt;<br>            &lt;a href=&quot;&quot;&gt;æ›´å¤š&lt;/a&gt;<br>          &lt;/template&gt;<br>        &lt;/Category&gt;<br>å­ç»„ä»¶ä¸­ï¼š<br>        &lt;template&gt;<br>          &lt;div class=&quot;item&quot;&gt;<br>            &lt;h3&gt;&#123;&#123; title &#125;&#125;&lt;/h3&gt;<br>            &lt;slot name=&quot;s1&quot;&gt;&lt;/slot&gt;<br>            &lt;slot name=&quot;s2&quot;&gt;&lt;/slot&gt;<br>          &lt;/div&gt;<br>        &lt;/template&gt;<br></code></pre></td></tr></table></figure><h3 id="3-ä½œç”¨åŸŸæ’æ§½"><a href="#3-ä½œç”¨åŸŸæ’æ§½" class="headerlink" title="3. ä½œç”¨åŸŸæ’æ§½"></a>3. ä½œç”¨åŸŸæ’æ§½</h3><ol><li><p>ç†è§£ï¼š<span style="color:red">æ•°æ®åœ¨ç»„ä»¶çš„è‡ªèº«ï¼Œä½†æ ¹æ®æ•°æ®ç”Ÿæˆçš„ç»“æ„éœ€è¦ç»„ä»¶çš„ä½¿ç”¨è€…æ¥å†³å®šã€‚</span>ï¼ˆæ–°é—»æ•°æ®åœ¨<code>News</code>ç»„ä»¶ä¸­ï¼Œä½†ä½¿ç”¨æ•°æ®æ‰€éå†å‡ºæ¥çš„ç»“æ„ç”±<code>App</code>ç»„ä»¶å†³å®šï¼‰</p></li><li><p>å…·ä½“ç¼–ç ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs vue">çˆ¶ç»„ä»¶ä¸­ï¼š<br>      &lt;Game v-slot=&quot;params&quot;&gt;<br>      &lt;!-- &lt;Game v-slot:default=&quot;params&quot;&gt; --&gt;<br>      &lt;!-- &lt;Game #default=&quot;params&quot;&gt; --&gt;<br>        &lt;ul&gt;<br>          &lt;li v-for=&quot;g in params.games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;<br>        &lt;/ul&gt;<br>      &lt;/Game&gt;<br><br>å­ç»„ä»¶ä¸­ï¼š<br>      &lt;template&gt;<br>        &lt;div class=&quot;category&quot;&gt;<br>          &lt;h2&gt;ä»Šæ—¥æ¸¸æˆæ¦œå•&lt;/h2&gt;<br>          &lt;slot :games=&quot;games&quot; a=&quot;å“ˆå“ˆ&quot;&gt;&lt;/slot&gt;<br>        &lt;/div&gt;<br>      &lt;/template&gt;<br><br>      &lt;script setup lang=&quot;ts&quot; name=&quot;Category&quot;&gt;<br>        import &#123;reactive&#125; from &#x27;vue&#x27;<br>        let games = reactive([<br>          &#123;id:&#x27;asgdytsa01&#x27;,name:&#x27;è‹±é›„è”ç›Ÿ&#x27;&#125;,<br>          &#123;id:&#x27;asgdytsa02&#x27;,name:&#x27;ç‹è€…è£è€€&#x27;&#125;,<br>          &#123;id:&#x27;asgdytsa03&#x27;,name:&#x27;çº¢è‰²è­¦æˆ’&#x27;&#125;,<br>          &#123;id:&#x27;asgdytsa04&#x27;,name:&#x27;æ–—ç½—å¤§é™†&#x27;&#125;<br>        ])<br>      &lt;/script&gt;<br></code></pre></td></tr></table></figure></li></ol><h1 id="7-å…¶å®ƒ-API"><a href="#7-å…¶å®ƒ-API" class="headerlink" title="7. å…¶å®ƒ API"></a>7. å…¶å®ƒ API</h1><h2 id="7-1-ã€shallowRef-ä¸-shallowReactive-ã€‘"><a href="#7-1-ã€shallowRef-ä¸-shallowReactive-ã€‘" class="headerlink" title="7.1.ã€shallowRef ä¸ shallowReactive ã€‘"></a>7.1.ã€shallowRef ä¸ shallowReactive ã€‘</h2><h3 id="shallowRef"><a href="#shallowRef" class="headerlink" title="shallowRef"></a><code>shallowRef</code></h3><ol><li><p>ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ªå“åº”å¼æ•°æ®ï¼Œä½†åªå¯¹é¡¶å±‚å±æ€§è¿›è¡Œå“åº”å¼å¤„ç†ã€‚</p></li><li><p>ç”¨æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> myVar = <span class="hljs-title function_">shallowRef</span>(initialValue);<br></code></pre></td></tr></table></figure></li><li><p>ç‰¹ç‚¹ï¼šåªè·Ÿè¸ªå¼•ç”¨å€¼çš„å˜åŒ–ï¼Œä¸å…³å¿ƒå€¼å†…éƒ¨çš„å±æ€§å˜åŒ–ã€‚</p></li></ol><h3 id="shallowReactive"><a href="#shallowReactive" class="headerlink" title="shallowReactive"></a><code>shallowReactive</code></h3><ol><li><p>ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ªæµ…å±‚å“åº”å¼å¯¹è±¡ï¼Œåªä¼šä½¿å¯¹è±¡çš„æœ€é¡¶å±‚å±æ€§å˜æˆå“åº”å¼çš„ï¼Œå¯¹è±¡å†…éƒ¨çš„åµŒå¥—å±æ€§åˆ™ä¸ä¼šå˜æˆå“åº”å¼çš„</p></li><li><p>ç”¨æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> myObj = <span class="hljs-title function_">shallowReactive</span>(&#123; ... &#125;);<br></code></pre></td></tr></table></figure></li><li><p>ç‰¹ç‚¹ï¼šå¯¹è±¡çš„é¡¶å±‚å±æ€§æ˜¯å“åº”å¼çš„ï¼Œä½†åµŒå¥—å¯¹è±¡çš„å±æ€§ä¸æ˜¯ã€‚</p></li></ol><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><blockquote><p>é€šè¿‡ä½¿ç”¨ <a href="https://cn.vuejs.org/api/reactivity-advanced.html#shallowref"><code>shallowRef()</code></a> å’Œ <a href="https://cn.vuejs.org/api/reactivity-advanced.html#shallowreactive"><code>shallowReactive()</code></a> æ¥ç»•å¼€æ·±åº¦å“åº”ã€‚æµ…å±‚å¼ <code>API</code> åˆ›å»ºçš„çŠ¶æ€åªåœ¨å…¶é¡¶å±‚æ˜¯å“åº”å¼çš„ï¼Œå¯¹æ‰€æœ‰æ·±å±‚çš„å¯¹è±¡ä¸ä¼šåšä»»ä½•å¤„ç†ï¼Œé¿å…äº†å¯¹æ¯ä¸€ä¸ªå†…éƒ¨å±æ€§åšå“åº”å¼æ‰€å¸¦æ¥çš„æ€§èƒ½æˆæœ¬ï¼Œè¿™ä½¿å¾—å±æ€§çš„è®¿é—®å˜å¾—æ›´å¿«ï¼Œå¯æå‡æ€§èƒ½ã€‚</p></blockquote><h2 id="7-2-ã€readonly-ä¸-shallowReadonlyã€‘"><a href="#7-2-ã€readonly-ä¸-shallowReadonlyã€‘" class="headerlink" title="7.2.ã€readonly ä¸ shallowReadonlyã€‘"></a>7.2.ã€readonly ä¸ shallowReadonlyã€‘</h2><h3 id="readonly"><a href="#readonly" class="headerlink" title="readonly"></a><strong><code>readonly</code></strong></h3><ol><li><p>ä½œç”¨ï¼šç”¨äºåˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„æ·±åªè¯»å‰¯æœ¬ã€‚</p></li><li><p>ç”¨æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> original = <span class="hljs-title function_">reactive</span>(&#123; ... &#125;);<br><span class="hljs-keyword">const</span> readOnlyCopy = <span class="hljs-title function_">readonly</span>(original);<br></code></pre></td></tr></table></figure></li><li><p>ç‰¹ç‚¹ï¼š</p><ul><li>å¯¹è±¡çš„æ‰€æœ‰åµŒå¥—å±æ€§éƒ½å°†å˜ä¸ºåªè¯»ã€‚</li><li>ä»»ä½•å°è¯•ä¿®æ”¹è¿™ä¸ªå¯¹è±¡çš„æ“ä½œéƒ½ä¼šè¢«é˜»æ­¢ï¼ˆåœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œè¿˜ä¼šåœ¨æ§åˆ¶å°ä¸­å‘å‡ºè­¦å‘Šï¼‰ã€‚</li></ul></li><li><p>åº”ç”¨åœºæ™¯ï¼š</p><ul><li>åˆ›å»ºä¸å¯å˜çš„çŠ¶æ€å¿«ç…§ã€‚</li><li>ä¿æŠ¤å…¨å±€çŠ¶æ€æˆ–é…ç½®ä¸è¢«ä¿®æ”¹ã€‚</li></ul></li></ol><h3 id="shallowReadonly"><a href="#shallowReadonly" class="headerlink" title="shallowReadonly"></a><strong><code>shallowReadonly</code></strong></h3><ol><li><p>ä½œç”¨ï¼šä¸ <code>readonly</code> ç±»ä¼¼ï¼Œä½†åªä½œç”¨äºå¯¹è±¡çš„é¡¶å±‚å±æ€§ã€‚</p></li><li><p>ç”¨æ³•ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> original = <span class="hljs-title function_">reactive</span>(&#123; ... &#125;);<br><span class="hljs-keyword">const</span> shallowReadOnlyCopy = <span class="hljs-title function_">shallowReadonly</span>(original);<br></code></pre></td></tr></table></figure></li><li><p>ç‰¹ç‚¹ï¼š</p><ul><li><p>åªå°†å¯¹è±¡çš„é¡¶å±‚å±æ€§è®¾ç½®ä¸ºåªè¯»ï¼Œå¯¹è±¡å†…éƒ¨çš„åµŒå¥—å±æ€§ä»ç„¶æ˜¯å¯å˜çš„ã€‚</p></li><li><p>é€‚ç”¨äºåªéœ€ä¿æŠ¤å¯¹è±¡é¡¶å±‚å±æ€§çš„åœºæ™¯ã€‚</p></li></ul></li></ol><h2 id="7-3-ã€toRaw-ä¸-markRawã€‘"><a href="#7-3-ã€toRaw-ä¸-markRawã€‘" class="headerlink" title="7.3.ã€toRaw ä¸ markRawã€‘"></a>7.3.ã€toRaw ä¸ markRawã€‘</h2><h3 id="toRaw"><a href="#toRaw" class="headerlink" title="toRaw"></a><code>toRaw</code></h3><ol><li><p>ä½œç”¨ï¼šç”¨äºè·å–ä¸€ä¸ªå“åº”å¼å¯¹è±¡çš„åŸå§‹å¯¹è±¡ï¼Œ <code>toRaw</code> è¿”å›çš„å¯¹è±¡ä¸å†æ˜¯å“åº”å¼çš„ï¼Œä¸ä¼šè§¦å‘è§†å›¾æ›´æ–°ã€‚</p><blockquote><p>å®˜ç½‘æè¿°ï¼šè¿™æ˜¯ä¸€ä¸ªå¯ä»¥ç”¨äºä¸´æ—¶è¯»å–è€Œä¸å¼•èµ·ä»£ç†è®¿é—®&#x2F;è·Ÿè¸ªå¼€é”€ï¼Œæˆ–æ˜¯å†™å…¥è€Œä¸è§¦å‘æ›´æ”¹çš„ç‰¹æ®Šæ–¹æ³•ã€‚ä¸å»ºè®®ä¿å­˜å¯¹åŸå§‹å¯¹è±¡çš„æŒä¹…å¼•ç”¨ï¼Œè¯·è°¨æ…ä½¿ç”¨ã€‚</p></blockquote><blockquote><p>ä½•æ—¶ä½¿ç”¨ï¼Ÿ â€”â€” åœ¨éœ€è¦å°†å“åº”å¼å¯¹è±¡ä¼ é€’ç»™é <code>Vue</code> çš„åº“æˆ–å¤–éƒ¨ç³»ç»Ÿæ—¶ï¼Œä½¿ç”¨ <code>toRaw</code> å¯ä»¥ç¡®ä¿å®ƒä»¬æ”¶åˆ°çš„æ˜¯æ™®é€šå¯¹è±¡</p></blockquote></li><li><p>å…·ä½“ç¼–ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; reactive,toRaw,markRaw,isReactive &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;<br><br><span class="hljs-comment">/* toRaw */</span><br><span class="hljs-comment">// å“åº”å¼å¯¹è±¡</span><br><span class="hljs-keyword">let</span> person = <span class="hljs-title function_">reactive</span>(&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;tony&#x27;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">18</span>&#125;)<br><span class="hljs-comment">// åŸå§‹å¯¹è±¡</span><br><span class="hljs-keyword">let</span> rawPerson = <span class="hljs-title function_">toRaw</span>(person)<br><br><br><span class="hljs-comment">/* markRaw */</span><br><span class="hljs-keyword">let</span> citysd = <span class="hljs-title function_">markRaw</span>([<br>  &#123;<span class="hljs-attr">id</span>:<span class="hljs-string">&#x27;asdda01&#x27;</span>,<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;åŒ—äº¬&#x27;</span>&#125;,<br>  &#123;<span class="hljs-attr">id</span>:<span class="hljs-string">&#x27;asdda02&#x27;</span>,<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;ä¸Šæµ·&#x27;</span>&#125;,<br>  &#123;<span class="hljs-attr">id</span>:<span class="hljs-string">&#x27;asdda03&#x27;</span>,<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;å¤©æ´¥&#x27;</span>&#125;,<br>  &#123;<span class="hljs-attr">id</span>:<span class="hljs-string">&#x27;asdda04&#x27;</span>,<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;é‡åº†&#x27;</span>&#125;<br>])<br><span class="hljs-comment">// æ ¹æ®åŸå§‹å¯¹è±¡cityså»åˆ›å»ºå“åº”å¼å¯¹è±¡citys2 â€”â€” åˆ›å»ºå¤±è´¥ï¼Œå› ä¸ºcitysè¢«markRawæ ‡è®°äº†</span><br><span class="hljs-keyword">let</span> citys2 = <span class="hljs-title function_">reactive</span>(citys)<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">isReactive</span>(person))<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">isReactive</span>(rawPerson))<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">isReactive</span>(citys))<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">isReactive</span>(citys2))<br></code></pre></td></tr></table></figure></li></ol><h3 id="markRaw"><a href="#markRaw" class="headerlink" title="markRaw"></a><code>markRaw</code></h3><ol><li><p>ä½œç”¨ï¼šæ ‡è®°ä¸€ä¸ªå¯¹è±¡ï¼Œä½¿å…¶<strong>æ°¸è¿œä¸ä¼š</strong>å˜æˆå“åº”å¼çš„ã€‚</p><blockquote><p>ä¾‹å¦‚ä½¿ç”¨<code>mockjs</code>æ—¶ï¼Œä¸ºäº†é˜²æ­¢è¯¯æŠŠ<code>mockjs</code>å˜ä¸ºå“åº”å¼å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ <code>markRaw</code> å»æ ‡è®°<code>mockjs</code></p></blockquote></li><li><p>ç¼–ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">/* markRaw */</span><br><span class="hljs-keyword">let</span> citys = <span class="hljs-title function_">markRaw</span>([<br>  &#123;<span class="hljs-attr">id</span>:<span class="hljs-string">&#x27;asdda01&#x27;</span>,<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;åŒ—äº¬&#x27;</span>&#125;,<br>  &#123;<span class="hljs-attr">id</span>:<span class="hljs-string">&#x27;asdda02&#x27;</span>,<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;ä¸Šæµ·&#x27;</span>&#125;,<br>  &#123;<span class="hljs-attr">id</span>:<span class="hljs-string">&#x27;asdda03&#x27;</span>,<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;å¤©æ´¥&#x27;</span>&#125;,<br>  &#123;<span class="hljs-attr">id</span>:<span class="hljs-string">&#x27;asdda04&#x27;</span>,<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;é‡åº†&#x27;</span>&#125;<br>])<br><span class="hljs-comment">// æ ¹æ®åŸå§‹å¯¹è±¡cityså»åˆ›å»ºå“åº”å¼å¯¹è±¡citys2 â€”â€” åˆ›å»ºå¤±è´¥ï¼Œå› ä¸ºcitysè¢«markRawæ ‡è®°äº†</span><br><span class="hljs-keyword">let</span> citys2 = <span class="hljs-title function_">reactive</span>(citys)<br></code></pre></td></tr></table></figure></li></ol><h2 id="7-4-ã€customRefã€‘"><a href="#7-4-ã€customRefã€‘" class="headerlink" title="7.4.ã€customRefã€‘"></a>7.4.ã€customRefã€‘</h2><p>ä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„<code>ref</code>ï¼Œå¹¶å¯¹å…¶ä¾èµ–é¡¹è·Ÿè¸ªå’Œæ›´æ–°è§¦å‘è¿›è¡Œé€»è¾‘æ§åˆ¶ã€‚</p><p>å®ç°é˜²æŠ–æ•ˆæœï¼ˆ<code>useSumRef.ts</code>ï¼‰ï¼š</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123;customRef &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-attr">initValue</span>:<span class="hljs-built_in">string</span>,<span class="hljs-attr">delay</span>:<span class="hljs-built_in">number</span></span>)&#123;<br>  <span class="hljs-keyword">let</span> msg = <span class="hljs-title function_">customRef</span>(<span class="hljs-function">(<span class="hljs-params">track,trigger</span>)=&gt;</span>&#123;<br>    <span class="hljs-keyword">let</span> <span class="hljs-attr">timer</span>:<span class="hljs-built_in">number</span><br>    <span class="hljs-keyword">return</span> &#123;<br>      <span class="hljs-title function_">get</span>(<span class="hljs-params"></span>)&#123;<br>        <span class="hljs-title function_">track</span>() <span class="hljs-comment">// å‘Šè¯‰Vueæ•°æ®msgå¾ˆé‡è¦ï¼Œè¦å¯¹msgæŒç»­å…³æ³¨ï¼Œä¸€æ—¦å˜åŒ–å°±æ›´æ–°</span><br>        <span class="hljs-keyword">return</span> initValue<br>      &#125;,<br>      <span class="hljs-title function_">set</span>(<span class="hljs-params">value</span>)&#123;<br>        <span class="hljs-built_in">clearTimeout</span>(timer)<br>        timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>          initValue = value<br>          <span class="hljs-title function_">trigger</span>() <span class="hljs-comment">//é€šçŸ¥Vueæ•°æ®msgå˜åŒ–äº†</span><br>        &#125;, delay);<br>      &#125;<br>    &#125;<br>  &#125;) <br>  <span class="hljs-keyword">return</span> &#123;msg&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç»„ä»¶ä¸­ä½¿ç”¨ï¼š</p><h1 id="8-Vue3æ–°ç»„ä»¶"><a href="#8-Vue3æ–°ç»„ä»¶" class="headerlink" title="8. Vue3æ–°ç»„ä»¶"></a>8. Vue3æ–°ç»„ä»¶</h1><h2 id="8-1-ã€Teleportã€‘"><a href="#8-1-ã€Teleportã€‘" class="headerlink" title="8.1. ã€Teleportã€‘"></a>8.1. ã€Teleportã€‘</h2><ul><li>ä»€ä¹ˆæ˜¯Teleportï¼Ÿâ€”â€” Teleport æ˜¯ä¸€ç§èƒ½å¤Ÿå°†æˆ‘ä»¬çš„<strong>ç»„ä»¶htmlç»“æ„</strong>ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®çš„æŠ€æœ¯ã€‚</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">teleport</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&#x27;body&#x27;</span> &gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;modal&quot;</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;isShow&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªå¼¹çª—<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æˆ‘æ˜¯å¼¹çª—ä¸­çš„ä¸€äº›å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;isShow = false&quot;</span>&gt;</span>å…³é—­å¼¹çª—<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">teleport</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="8-2-ã€Suspenseã€‘"><a href="#8-2-ã€Suspenseã€‘" class="headerlink" title="8.2. ã€Suspenseã€‘"></a>8.2. ã€Suspenseã€‘</h2><ul><li>ç­‰å¾…å¼‚æ­¥ç»„ä»¶æ—¶æ¸²æŸ“ä¸€äº›é¢å¤–å†…å®¹ï¼Œè®©åº”ç”¨æœ‰æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ </li><li>ä½¿ç”¨æ­¥éª¤ï¼š <ul><li>å¼‚æ­¥å¼•å…¥ç»„ä»¶</li><li>ä½¿ç”¨<code>Suspense</code>åŒ…è£¹ç»„ä»¶ï¼Œå¹¶é…ç½®å¥½<code>default</code> ä¸ <code>fallback</code></li></ul></li></ul><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs tsx"><span class="hljs-keyword">import</span> &#123; defineAsyncComponent,<span class="hljs-title class_">Suspense</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;<br><span class="hljs-keyword">const</span> <span class="hljs-title class_">Child</span> = <span class="hljs-title function_">defineAsyncComponent</span>(<span class="hljs-function">()=&gt;</span><span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./Child.vue&#x27;</span>))<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;div class=&quot;app&quot;&gt;<br>        &lt;h3&gt;æˆ‘æ˜¯Appç»„ä»¶&lt;/h3&gt;<br>        &lt;Suspense&gt;<br>          &lt;template v-slot:default&gt;<br>            &lt;Child/&gt;<br>          &lt;/template&gt;<br>          &lt;template v-slot:fallback&gt;<br>            &lt;h3&gt;åŠ è½½ä¸­.......&lt;/h3&gt;<br>          &lt;/template&gt;<br>        &lt;/Suspense&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br></code></pre></td></tr></table></figure><h2 id="8-3-ã€å…¨å±€APIè½¬ç§»åˆ°åº”ç”¨å¯¹è±¡ã€‘"><a href="#8-3-ã€å…¨å±€APIè½¬ç§»åˆ°åº”ç”¨å¯¹è±¡ã€‘" class="headerlink" title="8.3.ã€å…¨å±€APIè½¬ç§»åˆ°åº”ç”¨å¯¹è±¡ã€‘"></a>8.3.ã€å…¨å±€APIè½¬ç§»åˆ°åº”ç”¨å¯¹è±¡ã€‘</h2><ul><li><code>app.component</code></li><li><code>app.config</code></li><li><code>app.directive</code></li><li><code>app.mount</code></li><li><code>app.unmount</code></li><li><code>app.use</code></li></ul><h2 id="8-4-ã€å…¶ä»–ã€‘"><a href="#8-4-ã€å…¶ä»–ã€‘" class="headerlink" title="8.4.ã€å…¶ä»–ã€‘"></a>8.4.ã€å…¶ä»–ã€‘</h2><ul><li><p>è¿‡æ¸¡ç±»å <code>v-enter</code> ä¿®æ”¹ä¸º <code>v-enter-from</code>ã€è¿‡æ¸¡ç±»å <code>v-leave</code> ä¿®æ”¹ä¸º <code>v-leave-from</code>ã€‚</p></li><li><p><code>keyCode</code> ä½œä¸º <code>v-on</code> ä¿®é¥°ç¬¦çš„æ”¯æŒã€‚</p></li><li><p><code>v-model</code> æŒ‡ä»¤åœ¨ç»„ä»¶ä¸Šçš„ä½¿ç”¨å·²ç»è¢«é‡æ–°è®¾è®¡ï¼Œæ›¿æ¢æ‰äº† <code>v-bind.syncã€‚</code></p></li><li><p><code>v-if</code> å’Œ <code>v-for</code> åœ¨åŒä¸€ä¸ªå…ƒç´ èº«ä¸Šä½¿ç”¨æ—¶çš„ä¼˜å…ˆçº§å‘ç”Ÿäº†å˜åŒ–ã€‚</p></li><li><p>ç§»é™¤äº†<code>$on</code>ã€<code>$off</code> å’Œ <code>$once</code> å®ä¾‹æ–¹æ³•ã€‚</p></li><li><p>ç§»é™¤äº†è¿‡æ»¤å™¨ <code>filter</code>ã€‚</p></li><li><p>ç§»é™¤äº†<code>$children</code> å®ä¾‹ <code>propert</code>ã€‚</p><p>â€¦â€¦</p></li></ul><p>æ¥è‡ªå°šç¡…è°·ç¦¹ç¥è¯¾ä»¶<a href="https://www.youtube.com/watch?v=4hiKUA1erME&list=PLmOn9nNkQxJEnGM4Jf0liBcyedAtuQq-O&index=2">https://www.youtube.com/watch?v=4hiKUA1erME&amp;list=PLmOn9nNkQxJEnGM4Jf0liBcyedAtuQq-O&amp;index=2</a></p>]]></content>
    
    
    <categories>
      
      <category>vue3</category>
      
    </categories>
    
    
    <tags>
      
      <tag>vue3</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>pandasçš„å¸¸ç”¨æ–¹æ³•</title>
    <link href="/2025/02/20/pandas%E7%9A%84%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95/"/>
    <url>/2025/02/20/pandas%E7%9A%84%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h1 id="Pandas-çš„å¸¸ç”¨æ–¹æ³•"><a href="#Pandas-çš„å¸¸ç”¨æ–¹æ³•" class="headerlink" title="Pandas çš„å¸¸ç”¨æ–¹æ³•"></a>Pandas çš„å¸¸ç”¨æ–¹æ³•</h1><h2 id="1-å¯¼å…¥-Pandas"><a href="#1-å¯¼å…¥-Pandas" class="headerlink" title="1. å¯¼å…¥ Pandas"></a>1. å¯¼å…¥ Pandas</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br></code></pre></td></tr></table></figure><h2 id="2-åˆ›å»º-DataFrame-å’Œ-Series"><a href="#2-åˆ›å»º-DataFrame-å’Œ-Series" class="headerlink" title="2. åˆ›å»º DataFrame å’Œ Series"></a>2. åˆ›å»º DataFrame å’Œ Series</h2><ul><li><strong>ä»å­—å…¸åˆ›å»º DataFrame</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">data = &#123;<br>    <span class="hljs-string">&#x27;name&#x27;</span>: [<span class="hljs-string">&#x27;Tom&#x27;</span>, <span class="hljs-string">&#x27;Jerry&#x27;</span>, <span class="hljs-string">&#x27;Mickey&#x27;</span>],<br>    <span class="hljs-string">&#x27;age&#x27;</span>: [<span class="hljs-number">20</span>, <span class="hljs-number">21</span>, <span class="hljs-number">19</span>]<br>&#125;<br>df = pd.DataFrame(data)<br><span class="hljs-built_in">print</span>(df)<br></code></pre></td></tr></table></figure><ul><li><strong>ä»åˆ—è¡¨åˆ›å»º DataFrame</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">data = [[<span class="hljs-string">&#x27;Tom&#x27;</span>, <span class="hljs-number">20</span>], [<span class="hljs-string">&#x27;Jerry&#x27;</span>, <span class="hljs-number">21</span>], [<span class="hljs-string">&#x27;Mickey&#x27;</span>, <span class="hljs-number">19</span>]]<br>df = pd.DataFrame(data, columns=[<span class="hljs-string">&#x27;name&#x27;</span>, <span class="hljs-string">&#x27;age&#x27;</span>])<br><span class="hljs-built_in">print</span>(df)<br></code></pre></td></tr></table></figure><ul><li><strong>åˆ›å»º Series</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">s = pd.Series([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>])<br><span class="hljs-built_in">print</span>(s)<br></code></pre></td></tr></table></figure><h2 id="3-æŸ¥çœ‹æ•°æ®"><a href="#3-æŸ¥çœ‹æ•°æ®" class="headerlink" title="3. æŸ¥çœ‹æ•°æ®"></a>3. æŸ¥çœ‹æ•°æ®</h2><ul><li><strong>æŸ¥çœ‹ DataFrame çš„å‰å‡ è¡Œ</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">df.head()  <span class="hljs-comment"># é»˜è®¤å‰5è¡Œ</span><br>df.head(<span class="hljs-number">10</span>)  <span class="hljs-comment"># æŸ¥çœ‹å‰10è¡Œ</span><br></code></pre></td></tr></table></figure><ul><li><strong>æŸ¥çœ‹ DataFrame çš„åå‡ è¡Œ</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">df.tail()  <span class="hljs-comment"># é»˜è®¤å5è¡Œ</span><br>df.tail(<span class="hljs-number">3</span>)  <span class="hljs-comment"># æŸ¥çœ‹å3è¡Œ</span><br></code></pre></td></tr></table></figure><ul><li><strong>æŸ¥çœ‹ DataFrame çš„ä¿¡æ¯</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">df.info()  <span class="hljs-comment"># æŸ¥çœ‹ DataFrame çš„æ•°æ®ç±»å‹å’Œéç©ºå€¼æ•°é‡</span><br></code></pre></td></tr></table></figure><ul><li><strong>æŸ¥çœ‹ DataFrame çš„æè¿°æ€§ç»Ÿè®¡</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">df.describe()  <span class="hljs-comment"># æŸ¥çœ‹æ•°å€¼å‹åˆ—çš„ç»Ÿè®¡ä¿¡æ¯</span><br></code></pre></td></tr></table></figure><h2 id="4-é€‰æ‹©æ•°æ®"><a href="#4-é€‰æ‹©æ•°æ®" class="headerlink" title="4. é€‰æ‹©æ•°æ®"></a>4. é€‰æ‹©æ•°æ®</h2><ul><li><strong>æŒ‰åˆ—é€‰æ‹©æ•°æ®</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">df[<span class="hljs-string">&#x27;name&#x27;</span>]  <span class="hljs-comment"># é€‰æ‹© &#x27;name&#x27; åˆ—</span><br></code></pre></td></tr></table></figure><ul><li><strong>æŒ‰è¡Œé€‰æ‹©æ•°æ®</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">df.iloc[<span class="hljs-number">0</span>]  <span class="hljs-comment"># é€‰æ‹©ç¬¬ä¸€è¡Œï¼ˆé€šè¿‡ç´¢å¼•ä½ç½®ï¼‰</span><br>df.loc[<span class="hljs-number">0</span>]   <span class="hljs-comment"># é€‰æ‹©ç¬¬ä¸€è¡Œï¼ˆé€šè¿‡è¡Œæ ‡ç­¾ï¼‰</span><br></code></pre></td></tr></table></figure><ul><li><strong>æŒ‰æ¡ä»¶ç­›é€‰æ•°æ®</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">df[df[<span class="hljs-string">&#x27;age&#x27;</span>] &gt; <span class="hljs-number">20</span>]  <span class="hljs-comment"># ç­›é€‰å¹´é¾„å¤§äº20çš„äºº</span><br></code></pre></td></tr></table></figure><h2 id="5-æ•°æ®å¤„ç†"><a href="#5-æ•°æ®å¤„ç†" class="headerlink" title="5. æ•°æ®å¤„ç†"></a>5. æ•°æ®å¤„ç†</h2><ul><li><strong>æ·»åŠ æ–°åˆ—</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">df[<span class="hljs-string">&#x27;gender&#x27;</span>] = [<span class="hljs-string">&#x27;M&#x27;</span>, <span class="hljs-string">&#x27;M&#x27;</span>, <span class="hljs-string">&#x27;M&#x27;</span>]  <span class="hljs-comment"># æ·»åŠ æ€§åˆ«åˆ—</span><br><span class="hljs-built_in">print</span>(df)<br></code></pre></td></tr></table></figure><ul><li><strong>ä¿®æ”¹ç°æœ‰åˆ—</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">df[<span class="hljs-string">&#x27;age&#x27;</span>] = df[<span class="hljs-string">&#x27;age&#x27;</span>] + <span class="hljs-number">1</span>  <span class="hljs-comment"># å¹´é¾„åŠ 1</span><br><span class="hljs-built_in">print</span>(df)<br></code></pre></td></tr></table></figure><ul><li><strong>åˆ é™¤åˆ—</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">df.drop(<span class="hljs-string">&#x27;gender&#x27;</span>, axis=<span class="hljs-number">1</span>, inplace=<span class="hljs-literal">True</span>)  <span class="hljs-comment"># åˆ é™¤ &#x27;gender&#x27; åˆ—</span><br><span class="hljs-built_in">print</span>(df)<br></code></pre></td></tr></table></figure><ul><li><strong>ç¼ºå¤±å€¼å¤„ç†</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">df.isnull()  <span class="hljs-comment"># æŸ¥çœ‹ç¼ºå¤±å€¼</span><br>df.dropna()  <span class="hljs-comment"># åˆ é™¤å«æœ‰ç¼ºå¤±å€¼çš„è¡Œ</span><br>df.fillna(<span class="hljs-number">0</span>)  <span class="hljs-comment"># å¡«å……ç¼ºå¤±å€¼ä¸º0</span><br></code></pre></td></tr></table></figure><h2 id="6-æ’åº"><a href="#6-æ’åº" class="headerlink" title="6. æ’åº"></a>6. æ’åº</h2><ul><li><strong>æŒ‰åˆ—æ’åº</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">df.sort_values(by=<span class="hljs-string">&#x27;age&#x27;</span>, ascending=<span class="hljs-literal">False</span>)  <span class="hljs-comment"># æŒ‰ç…§å¹´é¾„é™åºæ’åº</span><br></code></pre></td></tr></table></figure><ul><li><strong>æŒ‰ç´¢å¼•æ’åº</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">df.sort_index(ascending=<span class="hljs-literal">False</span>)  <span class="hljs-comment"># æŒ‰ç…§è¡Œç´¢å¼•é™åºæ’åº</span><br></code></pre></td></tr></table></figure><h2 id="7-åˆå¹¶å’Œè¿æ¥"><a href="#7-åˆå¹¶å’Œè¿æ¥" class="headerlink" title="7. åˆå¹¶å’Œè¿æ¥"></a>7. åˆå¹¶å’Œè¿æ¥</h2><ul><li><strong>åˆå¹¶ DataFrame</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">df1 = pd.DataFrame(&#123;<span class="hljs-string">&#x27;A&#x27;</span>: [<span class="hljs-string">&#x27;A0&#x27;</span>, <span class="hljs-string">&#x27;A1&#x27;</span>, <span class="hljs-string">&#x27;A2&#x27;</span>], <span class="hljs-string">&#x27;B&#x27;</span>: [<span class="hljs-string">&#x27;B0&#x27;</span>, <span class="hljs-string">&#x27;B1&#x27;</span>, <span class="hljs-string">&#x27;B2&#x27;</span>]&#125;)<br>df2 = pd.DataFrame(&#123;<span class="hljs-string">&#x27;A&#x27;</span>: [<span class="hljs-string">&#x27;A3&#x27;</span>, <span class="hljs-string">&#x27;A4&#x27;</span>, <span class="hljs-string">&#x27;A5&#x27;</span>], <span class="hljs-string">&#x27;B&#x27;</span>: [<span class="hljs-string">&#x27;B3&#x27;</span>, <span class="hljs-string">&#x27;B4&#x27;</span>, <span class="hljs-string">&#x27;B5&#x27;</span>]&#125;)<br>result = pd.concat([df1, df2], ignore_index=<span class="hljs-literal">True</span>)<br><span class="hljs-built_in">print</span>(result)<br></code></pre></td></tr></table></figure><ul><li><strong>è¿æ¥ DataFrame</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">df1 = pd.DataFrame(&#123;<span class="hljs-string">&#x27;A&#x27;</span>: [<span class="hljs-string">&#x27;A0&#x27;</span>, <span class="hljs-string">&#x27;A1&#x27;</span>, <span class="hljs-string">&#x27;A2&#x27;</span>], <span class="hljs-string">&#x27;B&#x27;</span>: [<span class="hljs-string">&#x27;B0&#x27;</span>, <span class="hljs-string">&#x27;B1&#x27;</span>, <span class="hljs-string">&#x27;B2&#x27;</span>]&#125;)<br>df2 = pd.DataFrame(&#123;<span class="hljs-string">&#x27;C&#x27;</span>: [<span class="hljs-string">&#x27;C0&#x27;</span>, <span class="hljs-string">&#x27;C1&#x27;</span>, <span class="hljs-string">&#x27;C2&#x27;</span>], <span class="hljs-string">&#x27;D&#x27;</span>: [<span class="hljs-string">&#x27;D0&#x27;</span>, <span class="hljs-string">&#x27;D1&#x27;</span>, <span class="hljs-string">&#x27;D2&#x27;</span>]&#125;)<br>result = pd.concat([df1, df2], axis=<span class="hljs-number">1</span>)<br><span class="hljs-built_in">print</span>(result)<br></code></pre></td></tr></table></figure><h2 id="8-åˆ†ç»„æ“ä½œ"><a href="#8-åˆ†ç»„æ“ä½œ" class="headerlink" title="8. åˆ†ç»„æ“ä½œ"></a>8. åˆ†ç»„æ“ä½œ</h2><ul><li><strong>åˆ†ç»„å¹¶è®¡ç®—å¹³å‡å€¼</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">df = pd.DataFrame(&#123;<span class="hljs-string">&#x27;A&#x27;</span>: [<span class="hljs-string">&#x27;A0&#x27;</span>, <span class="hljs-string">&#x27;A1&#x27;</span>, <span class="hljs-string">&#x27;A2&#x27;</span>, <span class="hljs-string">&#x27;A3&#x27;</span>], <span class="hljs-string">&#x27;B&#x27;</span>: [<span class="hljs-string">&#x27;B0&#x27;</span>, <span class="hljs-string">&#x27;B1&#x27;</span>, <span class="hljs-string">&#x27;B2&#x27;</span>, <span class="hljs-string">&#x27;B3&#x27;</span>], <span class="hljs-string">&#x27;C&#x27;</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]&#125;)<br>grouped = df.groupby(<span class="hljs-string">&#x27;A&#x27;</span>).mean()<br><span class="hljs-built_in">print</span>(grouped)<br></code></pre></td></tr></table></figure><h2 id="9-æ•°æ®é€è§†è¡¨"><a href="#9-æ•°æ®é€è§†è¡¨" class="headerlink" title="9. æ•°æ®é€è§†è¡¨"></a>9. æ•°æ®é€è§†è¡¨</h2><ul><li><strong>åˆ›å»ºæ•°æ®é€è§†è¡¨</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">df = pd.DataFrame(&#123;<span class="hljs-string">&#x27;A&#x27;</span>: [<span class="hljs-string">&#x27;A0&#x27;</span>, <span class="hljs-string">&#x27;A1&#x27;</span>, <span class="hljs-string">&#x27;A2&#x27;</span>, <span class="hljs-string">&#x27;A3&#x27;</span>], <span class="hljs-string">&#x27;B&#x27;</span>: [<span class="hljs-string">&#x27;B0&#x27;</span>, <span class="hljs-string">&#x27;B1&#x27;</span>, <span class="hljs-string">&#x27;B2&#x27;</span>, <span class="hljs-string">&#x27;B3&#x27;</span>], <span class="hljs-string">&#x27;C&#x27;</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]&#125;)<br>pivot_table = pd.pivot_table(df, values=<span class="hljs-string">&#x27;C&#x27;</span>, index=[<span class="hljs-string">&#x27;A&#x27;</span>], columns=[<span class="hljs-string">&#x27;B&#x27;</span>], aggfunc=<span class="hljs-string">&#x27;sum&#x27;</span>)<br><span class="hljs-built_in">print</span>(pivot_table)<br></code></pre></td></tr></table></figure><h2 id="10-æ—¶é—´æ—¥æœŸå¤„ç†"><a href="#10-æ—¶é—´æ—¥æœŸå¤„ç†" class="headerlink" title="10. æ—¶é—´æ—¥æœŸå¤„ç†"></a>10. æ—¶é—´æ—¥æœŸå¤„ç†</h2><ul><li><strong>è½¬æ¢ä¸ºæ—¥æœŸç±»å‹</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">df[<span class="hljs-string">&#x27;date&#x27;</span>] = pd.to_datetime(df[<span class="hljs-string">&#x27;date&#x27;</span>])<br></code></pre></td></tr></table></figure><ul><li><strong>æå–æ—¥æœŸçš„å¹´ä»½ã€æœˆä»½ã€æ—¥æœŸ</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">df[<span class="hljs-string">&#x27;year&#x27;</span>] = df[<span class="hljs-string">&#x27;date&#x27;</span>].dt.year<br>df[<span class="hljs-string">&#x27;month&#x27;</span>] = df[<span class="hljs-string">&#x27;date&#x27;</span>].dt.month<br>df[<span class="hljs-string">&#x27;day&#x27;</span>] = df[<span class="hljs-string">&#x27;date&#x27;</span>].dt.day<br></code></pre></td></tr></table></figure><h2 id="11-å¯¼å‡ºæ•°æ®"><a href="#11-å¯¼å‡ºæ•°æ®" class="headerlink" title="11. å¯¼å‡ºæ•°æ®"></a>11. å¯¼å‡ºæ•°æ®</h2><ul><li><strong>å¯¼å‡º DataFrame åˆ° CSV</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">df.to_csv(<span class="hljs-string">&#x27;data.csv&#x27;</span>, index=<span class="hljs-literal">False</span>)<br></code></pre></td></tr></table></figure><ul><li><strong>å¯¼å‡º DataFrame åˆ° Excel</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">df.to_excel(<span class="hljs-string">&#x27;data.xlsx&#x27;</span>, index=<span class="hljs-literal">False</span>)<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>pandas</category>
      
    </categories>
    
    
    <tags>
      
      <tag>pands</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>vimå¸¸ç”¨å‘½ä»¤</title>
    <link href="/2025/02/19/vim%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    <url>/2025/02/19/vim%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<h1 id="Vim-å¸¸ç”¨å‘½ä»¤æŒ‡å—"><a href="#Vim-å¸¸ç”¨å‘½ä»¤æŒ‡å—" class="headerlink" title="Vim å¸¸ç”¨å‘½ä»¤æŒ‡å—"></a>Vim å¸¸ç”¨å‘½ä»¤æŒ‡å—</h1><h2 id="æ¨¡å¼åˆ‡æ¢"><a href="#æ¨¡å¼åˆ‡æ¢" class="headerlink" title="æ¨¡å¼åˆ‡æ¢"></a>æ¨¡å¼åˆ‡æ¢</h2><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>i</code></td><td>è¿›å…¥æ’å…¥æ¨¡å¼ï¼ˆå½“å‰å…‰æ ‡å‰ï¼‰</td></tr><tr><td><code>a</code></td><td>è¿›å…¥æ’å…¥æ¨¡å¼ï¼ˆå½“å‰å…‰æ ‡åï¼‰</td></tr><tr><td><code>o</code></td><td>åœ¨å½“å‰è¡Œä¸‹æ–¹æ–°å»ºæ’å…¥è¡Œ</td></tr><tr><td><code>O</code></td><td>åœ¨å½“å‰è¡Œä¸Šæ–¹æ–°å»ºæ’å…¥è¡Œ</td></tr><tr><td><code>v</code></td><td>è¿›å…¥å¯è§†æ¨¡å¼ï¼ˆå­—ç¬¦é€‰æ‹©ï¼‰</td></tr><tr><td><code>V</code></td><td>è¿›å…¥å¯è§†æ¨¡å¼ï¼ˆè¡Œé€‰æ‹©ï¼‰</td></tr><tr><td><code>Esc</code></td><td>è¿”å›æ™®é€šæ¨¡å¼</td></tr></tbody></table><h2 id="å…‰æ ‡ç§»åŠ¨"><a href="#å…‰æ ‡ç§»åŠ¨" class="headerlink" title="å…‰æ ‡ç§»åŠ¨"></a>å…‰æ ‡ç§»åŠ¨</h2><h3 id="åŸºç¡€ç§»åŠ¨"><a href="#åŸºç¡€ç§»åŠ¨" class="headerlink" title="åŸºç¡€ç§»åŠ¨"></a>åŸºç¡€ç§»åŠ¨</h3><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>h</code></td><td>å·¦ç§»</td></tr><tr><td><code>j</code></td><td>ä¸‹ç§»</td></tr><tr><td><code>k</code></td><td>ä¸Šç§»</td></tr><tr><td><code>l</code></td><td>å³ç§»</td></tr><tr><td><code>w</code></td><td>è·³åˆ°ä¸‹ä¸€ä¸ªå•è¯å¼€å¤´</td></tr><tr><td><code>b</code></td><td>è·³åˆ°ä¸Šä¸€ä¸ªå•è¯å¼€å¤´</td></tr></tbody></table><h3 id="å¿«é€Ÿè·³è½¬"><a href="#å¿«é€Ÿè·³è½¬" class="headerlink" title="å¿«é€Ÿè·³è½¬"></a>å¿«é€Ÿè·³è½¬</h3><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>gg</code></td><td>è·³è½¬åˆ°æ–‡ä»¶å¼€å¤´</td></tr><tr><td><code>G</code></td><td>è·³è½¬åˆ°æ–‡ä»¶æœ«å°¾</td></tr><tr><td><code>:n</code></td><td>è·³è½¬åˆ°ç¬¬nè¡Œï¼ˆnä¸ºæ•°å­—ï¼‰</td></tr><tr><td><code>0</code></td><td>è·³è½¬åˆ°è¡Œé¦–</td></tr><tr><td><code>$</code></td><td>è·³è½¬åˆ°è¡Œå°¾</td></tr><tr><td><code>Ctrl+f</code></td><td>å‘ä¸‹ç¿»é¡µ</td></tr><tr><td><code>Ctrl+b</code></td><td>å‘ä¸Šç¿»é¡µ</td></tr></tbody></table><h2 id="æ–‡æœ¬ç¼–è¾‘"><a href="#æ–‡æœ¬ç¼–è¾‘" class="headerlink" title="æ–‡æœ¬ç¼–è¾‘"></a>æ–‡æœ¬ç¼–è¾‘</h2><h3 id="åˆ é™¤æ“ä½œ"><a href="#åˆ é™¤æ“ä½œ" class="headerlink" title="åˆ é™¤æ“ä½œ"></a>åˆ é™¤æ“ä½œ</h3><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>x</code></td><td>åˆ é™¤å½“å‰å­—ç¬¦</td></tr><tr><td><code>dw</code></td><td>åˆ é™¤åˆ°å•è¯æœ«å°¾</td></tr><tr><td><code>dd</code></td><td>åˆ é™¤æ•´è¡Œ</td></tr><tr><td><code>D</code></td><td>åˆ é™¤åˆ°è¡Œå°¾</td></tr></tbody></table><h3 id="å¤åˆ¶ç²˜è´´"><a href="#å¤åˆ¶ç²˜è´´" class="headerlink" title="å¤åˆ¶ç²˜è´´"></a>å¤åˆ¶ç²˜è´´</h3><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>yy</code></td><td>å¤åˆ¶å½“å‰è¡Œ</td></tr><tr><td><code>p</code></td><td>ç²˜è´´åˆ°å…‰æ ‡å</td></tr><tr><td><code>P</code></td><td>ç²˜è´´åˆ°å…‰æ ‡å‰</td></tr><tr><td><code>yiw</code></td><td>å¤åˆ¶å½“å‰å•è¯</td></tr></tbody></table><h3 id="æ’¤é”€-é‡åš"><a href="#æ’¤é”€-é‡åš" class="headerlink" title="æ’¤é”€&#x2F;é‡åš"></a>æ’¤é”€&#x2F;é‡åš</h3><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>u</code></td><td>æ’¤é”€æ“ä½œ</td></tr><tr><td><code>Ctrl+r</code></td><td>é‡åšæ“ä½œ</td></tr></tbody></table><h2 id="æœç´¢æ›¿æ¢"><a href="#æœç´¢æ›¿æ¢" class="headerlink" title="æœç´¢æ›¿æ¢"></a>æœç´¢æ›¿æ¢</h2><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>/keyword</code></td><td>å‘ä¸‹æœç´¢å…³é”®å­—</td></tr><tr><td><code>?keyword</code></td><td>å‘ä¸Šæœç´¢å…³é”®å­—</td></tr><tr><td><code>n</code></td><td>è·³è½¬åˆ°ä¸‹ä¸€ä¸ªåŒ¹é…é¡¹</td></tr><tr><td><code>N</code></td><td>è·³è½¬åˆ°ä¸Šä¸€ä¸ªåŒ¹é…é¡¹</td></tr><tr><td><code>:%s/old/new/g</code></td><td>å…¨å±€æ›¿æ¢ï¼ˆåŠ <code>c</code>ç¡®è®¤æ¯ä¸ªæ›¿æ¢ï¼‰</td></tr></tbody></table><h2 id="æ–‡ä»¶æ“ä½œ"><a href="#æ–‡ä»¶æ“ä½œ" class="headerlink" title="æ–‡ä»¶æ“ä½œ"></a>æ–‡ä»¶æ“ä½œ</h2><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>:w</code></td><td>ä¿å­˜æ–‡ä»¶</td></tr><tr><td><code>:q</code></td><td>é€€å‡º</td></tr><tr><td><code>:wq</code> &#x2F; <code>:x</code></td><td>ä¿å­˜å¹¶é€€å‡º</td></tr><tr><td><code>:q!</code></td><td>å¼ºåˆ¶é€€å‡ºä¸ä¿å­˜</td></tr><tr><td><code>:e filename</code></td><td>æ‰“å¼€æ–°æ–‡ä»¶</td></tr><tr><td><code>:saveas filename</code></td><td>å¦å­˜ä¸º</td></tr></tbody></table><h2 id="åˆ†å±æ“ä½œ"><a href="#åˆ†å±æ“ä½œ" class="headerlink" title="åˆ†å±æ“ä½œ"></a>åˆ†å±æ“ä½œ</h2><table><thead><tr><th>å‘½ä»¤</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>:sp</code> &#x2F; <code>:split</code></td><td>æ°´å¹³åˆ†å±</td></tr><tr><td><code>:vsp</code></td><td>å‚ç›´åˆ†å±</td></tr><tr><td><code>Ctrl+w hjkl</code></td><td>åˆ‡æ¢åˆ†å±çª—å£</td></tr><tr><td><code>Ctrl+w c</code></td><td>å…³é—­å½“å‰åˆ†å±</td></tr><tr><td><code>Ctrl+w o</code></td><td>å…³é—­å…¶ä»–åˆ†å±</td></tr></tbody></table><h2 id="å…¶ä»–å®ç”¨æŠ€å·§"><a href="#å…¶ä»–å®ç”¨æŠ€å·§" class="headerlink" title="å…¶ä»–å®ç”¨æŠ€å·§"></a>å…¶ä»–å®ç”¨æŠ€å·§</h2><ol><li>æ˜¾ç¤ºè¡Œå·ï¼š<code>:set number</code>ï¼ˆå–æ¶ˆç”¨<code>:set nonumber</code>ï¼‰</li><li>æ‰¹é‡ç¼©è¿›ï¼šå¯è§†æ¨¡å¼é€‰ä¸­æ–‡æœ¬åæŒ‰<code>&gt;</code>æˆ–<code>&lt;</code></li><li>é‡å¤å‘½ä»¤ï¼š<code>æ•°å­— + å‘½ä»¤</code>ï¼ˆå¦‚<code>3dd</code>åˆ é™¤3è¡Œï¼‰</li><li>æ‰§è¡Œå¤–éƒ¨å‘½ä»¤ï¼š<code>:!command</code>ï¼ˆå¦‚<code>:!ls</code>ï¼‰</li></ol><blockquote><p>æç¤ºï¼šVim çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå‘½ä»¤ç»„åˆï¼Œä¾‹å¦‚ <code>d2w</code> &#x3D; åˆ é™¤2ä¸ªå•è¯ï¼Œ<code>ci&quot;</code> &#x3D; ä¿®æ”¹å¼•å·å†…çš„å†…å®¹</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>vim</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>linuxå¸¸ç”¨å‘½ä»¤</title>
    <link href="/2025/02/19/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    <url>/2025/02/19/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<h1 id="Linux-å¸¸ç”¨å‘½ä»¤"><a href="#Linux-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="Linux å¸¸ç”¨å‘½ä»¤"></a>Linux å¸¸ç”¨å‘½ä»¤</h1><h2 id="1-ç³»ç»Ÿä¿¡æ¯"><a href="#1-ç³»ç»Ÿä¿¡æ¯" class="headerlink" title="1. ç³»ç»Ÿä¿¡æ¯"></a>1. ç³»ç»Ÿä¿¡æ¯</h2><ul><li><p><strong>æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">uname</span> -a<br></code></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹æ“ä½œç³»ç»Ÿç±»å‹</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">uname</span> -s<br></code></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹ Linux ç‰ˆæœ¬</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">lsb_release -a<br></code></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹å†…å­˜ä½¿ç”¨æƒ…å†µ</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">free -h<br></code></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µ</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">df</span> -h<br></code></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹ç¡¬ç›˜ I&#x2F;O æ€§èƒ½</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">iostat<br></code></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹ CPU ä½¿ç”¨æƒ…å†µ</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">top<br></code></pre></td></tr></table></figure></li></ul><h2 id="2-æ–‡ä»¶ä¸ç›®å½•æ“ä½œ"><a href="#2-æ–‡ä»¶ä¸ç›®å½•æ“ä½œ" class="headerlink" title="2. æ–‡ä»¶ä¸ç›®å½•æ“ä½œ"></a>2. æ–‡ä»¶ä¸ç›®å½•æ“ä½œ</h2><ul><li><p><strong>åˆ—å‡ºç›®å½•å†…å®¹</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">ls</span><br></code></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹æ–‡ä»¶å†…å®¹</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span> &lt;file_name&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹æ–‡ä»¶å†…å®¹ï¼ˆåˆ†é¡µæ˜¾ç¤ºï¼‰</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">less &lt;file_name&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹æ–‡ä»¶å†…å®¹ï¼ˆé€å±æ˜¾ç¤ºï¼‰</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">more &lt;file_name&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>å¤åˆ¶æ–‡ä»¶</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cp</span> &lt;<span class="hljs-built_in">source</span>&gt; &lt;destination&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>ç§»åŠ¨æˆ–é‡å‘½åæ–‡ä»¶</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mv</span> &lt;<span class="hljs-built_in">source</span>&gt; &lt;destination&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>åˆ é™¤æ–‡ä»¶</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">rm</span> &lt;file_name&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>åˆ é™¤ç›®å½•åŠå…¶å†…å®¹</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">rm</span> -r &lt;directory_name&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>åˆ›å»ºæ–°ç›®å½•</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mkdir</span> &lt;directory_name&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>åˆ é™¤ç©ºç›®å½•</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">rmdir</span> &lt;directory_name&gt;<br></code></pre></td></tr></table></figure></li></ul><h2 id="3-ç”¨æˆ·ç®¡ç†"><a href="#3-ç”¨æˆ·ç®¡ç†" class="headerlink" title="3. ç”¨æˆ·ç®¡ç†"></a>3. ç”¨æˆ·ç®¡ç†</h2><ul><li><p><strong>æŸ¥çœ‹å½“å‰ç”¨æˆ·</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">whoami</span><br></code></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹ç³»ç»Ÿä¸­æ‰€æœ‰ç”¨æˆ·</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span> /etc/passwd<br></code></pre></td></tr></table></figure></li><li><p><strong>åˆ‡æ¢ç”¨æˆ·</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">su &lt;username&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>åˆ›å»ºæ–°ç”¨æˆ·</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> useradd &lt;username&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>åˆ é™¤ç”¨æˆ·</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> userdel &lt;username&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>ä¿®æ”¹ç”¨æˆ·å¯†ç </strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> passwd &lt;username&gt;<br></code></pre></td></tr></table></figure></li></ul><h2 id="4-æ–‡ä»¶æƒé™ä¸æƒé™ç®¡ç†"><a href="#4-æ–‡ä»¶æƒé™ä¸æƒé™ç®¡ç†" class="headerlink" title="4. æ–‡ä»¶æƒé™ä¸æƒé™ç®¡ç†"></a>4. æ–‡ä»¶æƒé™ä¸æƒé™ç®¡ç†</h2><ul><li><p><strong>æŸ¥çœ‹æ–‡ä»¶æƒé™</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">ls</span> -l &lt;file_name&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>ä¿®æ”¹æ–‡ä»¶æƒé™</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">chmod</span> &lt;permissions&gt; &lt;file_name&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>ä¿®æ”¹æ–‡ä»¶æ‹¥æœ‰è€…</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">chown</span> &lt;user&gt;:&lt;group&gt; &lt;file_name&gt;<br></code></pre></td></tr></table></figure></li></ul><h2 id="5-ç½‘ç»œç®¡ç†"><a href="#5-ç½‘ç»œç®¡ç†" class="headerlink" title="5. ç½‘ç»œç®¡ç†"></a>5. ç½‘ç»œç®¡ç†</h2><ul><li><p><strong>æŸ¥çœ‹ç½‘ç»œæ¥å£é…ç½®</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ifconfig<br></code></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹ç½‘ç»œè¿æ¥</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">netstat -tuln<br></code></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹ç«¯å£å ç”¨æƒ…å†µ</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">lsof -i:&lt;port_number&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>ping å‘½ä»¤</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ping &lt;host_or_ip&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>ä½¿ç”¨ curl è·å–ç½‘é¡µå†…å®¹</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl &lt;url&gt;<br></code></pre></td></tr></table></figure></li></ul><h2 id="6-è¿›ç¨‹ç®¡ç†"><a href="#6-è¿›ç¨‹ç®¡ç†" class="headerlink" title="6. è¿›ç¨‹ç®¡ç†"></a>6. è¿›ç¨‹ç®¡ç†</h2><ul><li><p><strong>æŸ¥çœ‹å½“å‰è¿è¡Œçš„è¿›ç¨‹</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ps aux<br></code></pre></td></tr></table></figure></li><li><p><strong>æ€æ­»è¿›ç¨‹</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">kill</span> &lt;pid&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>å¼ºåˆ¶æ€æ­»è¿›ç¨‹</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">kill</span> -9 &lt;pid&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹è¿›ç¨‹æ ‘</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pstree<br></code></pre></td></tr></table></figure></li></ul><h2 id="7-åŒ…ç®¡ç†ï¼ˆåŸºäº-Debian-ç³»åˆ—ï¼‰"><a href="#7-åŒ…ç®¡ç†ï¼ˆåŸºäº-Debian-ç³»åˆ—ï¼‰" class="headerlink" title="7. åŒ…ç®¡ç†ï¼ˆåŸºäº Debian ç³»åˆ—ï¼‰"></a>7. åŒ…ç®¡ç†ï¼ˆåŸºäº Debian ç³»åˆ—ï¼‰</h2><ul><li><p><strong>æ›´æ–°åŒ…ç´¢å¼•</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt update<br></code></pre></td></tr></table></figure></li><li><p><strong>å®‰è£…è½¯ä»¶åŒ…</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt install &lt;package_name&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>åˆ é™¤è½¯ä»¶åŒ…</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt remove &lt;package_name&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹å·²å®‰è£…çš„è½¯ä»¶åŒ…</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">dpkg -l<br></code></pre></td></tr></table></figure></li><li><p><strong>å‡çº§è½¯ä»¶åŒ…</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt upgrade<br></code></pre></td></tr></table></figure></li></ul><h2 id="8-å‹ç¼©ä¸è§£å‹"><a href="#8-å‹ç¼©ä¸è§£å‹" class="headerlink" title="8. å‹ç¼©ä¸è§£å‹"></a>8. å‹ç¼©ä¸è§£å‹</h2><ul><li><p><strong>è§£å‹ <code>.tar.gz</code> æ–‡ä»¶</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">tar -zxvf &lt;file_name.tar.gz&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>è§£å‹ <code>.zip</code> æ–‡ä»¶</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">unzip &lt;file_name.zip&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>åˆ›å»º <code>.tar.gz</code> æ–‡ä»¶</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">tar -zcvf &lt;archive_name.tar.gz&gt; &lt;directory_or_files&gt;<br></code></pre></td></tr></table></figure></li></ul><h2 id="9-æŸ¥æ‰¾æ–‡ä»¶"><a href="#9-æŸ¥æ‰¾æ–‡ä»¶" class="headerlink" title="9. æŸ¥æ‰¾æ–‡ä»¶"></a>9. æŸ¥æ‰¾æ–‡ä»¶</h2><ul><li><p><strong>æŸ¥æ‰¾æ–‡ä»¶</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">find /path/to/search -name &lt;file_name&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>æŸ¥æ‰¾æ–‡ä»¶å†…å®¹</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">grep <span class="hljs-string">&quot;&lt;search_string&gt;&quot;</span> &lt;file_name&gt;<br></code></pre></td></tr></table></figure></li></ul><h2 id="10-æ—¥å¿—æŸ¥çœ‹"><a href="#10-æ—¥å¿—æŸ¥çœ‹" class="headerlink" title="10. æ—¥å¿—æŸ¥çœ‹"></a>10. æ—¥å¿—æŸ¥çœ‹</h2><ul><li><p><strong>æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">tail</span> -f /var/log/syslog<br></code></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹ç‰¹å®šæ—¥å¿—æ–‡ä»¶</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">tail</span> -f /var/log/auth.log<br></code></pre></td></tr></table></figure></li></ul><h2 id="11-ç³»ç»Ÿæ›´æ–°ä¸é‡å¯"><a href="#11-ç³»ç»Ÿæ›´æ–°ä¸é‡å¯" class="headerlink" title="11. ç³»ç»Ÿæ›´æ–°ä¸é‡å¯"></a>11. ç³»ç»Ÿæ›´æ–°ä¸é‡å¯</h2><ul><li><p><strong>æ›´æ–°ç³»ç»Ÿ</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt update &amp;&amp; <span class="hljs-built_in">sudo</span> apt upgrade<br></code></pre></td></tr></table></figure></li><li><p><strong>é‡å¯ç³»ç»Ÿ</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> reboot<br></code></pre></td></tr></table></figure></li><li><p><strong>å…³æœº</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> shutdown -h now<br></code></pre></td></tr></table></figure></li></ul><h2 id="12-å…¶ä»–å¸¸ç”¨å‘½ä»¤"><a href="#12-å…¶ä»–å¸¸ç”¨å‘½ä»¤" class="headerlink" title="12. å…¶ä»–å¸¸ç”¨å‘½ä»¤"></a>12. å…¶ä»–å¸¸ç”¨å‘½ä»¤</h2><ul><li><p><strong>æŸ¥çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µ</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">du</span> -sh &lt;directory_name&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹å½“å‰æ—¶é—´</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">date</span><br></code></pre></td></tr></table></figure></li><li><p><strong>æ˜¾ç¤ºå‘½ä»¤å†å²è®°å½•</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">history</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="13-å‚è€ƒæ–‡æ¡£"><a href="#13-å‚è€ƒæ–‡æ¡£" class="headerlink" title="13. å‚è€ƒæ–‡æ¡£"></a>13. å‚è€ƒæ–‡æ¡£</h2><ul><li><a href="https://www.runoob.com/linux/linux-command-manual.html">Linux å‘½ä»¤å¤§å…¨</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hexoå¸¸ç”¨å‘½ä»¤</title>
    <link href="/2025/02/19/hexo%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    <url>/2025/02/19/hexo%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<h1 id="Hexo-å¸¸ç”¨å‘½ä»¤"><a href="#Hexo-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="Hexo å¸¸ç”¨å‘½ä»¤"></a>Hexo å¸¸ç”¨å‘½ä»¤</h1><h2 id="1-å®‰è£…-Hexo"><a href="#1-å®‰è£…-Hexo" class="headerlink" title="1. å®‰è£… Hexo"></a>1. å®‰è£… Hexo</h2><ul><li><p><strong>å®‰è£… Hexo</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install hexo-cli -g<br></code></pre></td></tr></table></figure></li><li><p><strong>åˆå§‹åŒ– Hexo é¡¹ç›®</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo init &lt;project_name&gt;<br><span class="hljs-built_in">cd</span> &lt;project_name&gt;<br>npm install<br></code></pre></td></tr></table></figure></li></ul><h2 id="2-å¯åŠ¨å’Œç”Ÿæˆ-Hexo-åšå®¢"><a href="#2-å¯åŠ¨å’Œç”Ÿæˆ-Hexo-åšå®¢" class="headerlink" title="2. å¯åŠ¨å’Œç”Ÿæˆ Hexo åšå®¢"></a>2. å¯åŠ¨å’Œç”Ÿæˆ Hexo åšå®¢</h2><h3 id="å¯åŠ¨æœ¬åœ°å¼€å‘æœåŠ¡å™¨"><a href="#å¯åŠ¨æœ¬åœ°å¼€å‘æœåŠ¡å™¨" class="headerlink" title="å¯åŠ¨æœ¬åœ°å¼€å‘æœåŠ¡å™¨"></a>å¯åŠ¨æœ¬åœ°å¼€å‘æœåŠ¡å™¨</h3><ul><li><strong>å¯åŠ¨ Hexo æœ¬åœ°æœåŠ¡å™¨</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo s<br></code></pre></td></tr></table></figure>è¿™å°†å¯åŠ¨ä¸€ä¸ªæœ¬åœ°å¼€å‘æœåŠ¡å™¨ï¼Œé€šå¸¸é»˜è®¤è®¿é—®åœ°å€ä¸º <code>http://localhost:4000</code>ã€‚</li></ul><h3 id="ç”Ÿæˆå’Œéƒ¨ç½²åšå®¢"><a href="#ç”Ÿæˆå’Œéƒ¨ç½²åšå®¢" class="headerlink" title="ç”Ÿæˆå’Œéƒ¨ç½²åšå®¢"></a>ç”Ÿæˆå’Œéƒ¨ç½²åšå®¢</h3><ul><li><p><strong>æ¸…ç†å·²ç”Ÿæˆçš„æ–‡ä»¶</strong>ï¼ˆåˆ é™¤ <code>public</code> æ–‡ä»¶å¤¹å†…å®¹ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo clean<br></code></pre></td></tr></table></figure></li><li><p><strong>ç”Ÿæˆé™æ€æ–‡ä»¶</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo generate<br></code></pre></td></tr></table></figure></li><li><p><strong>éƒ¨ç½²åˆ° GitHub æˆ–å…¶ä»–å¹³å°</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo deploy<br></code></pre></td></tr></table></figure></li></ul><h2 id="3-åšå®¢å†…å®¹ç®¡ç†"><a href="#3-åšå®¢å†…å®¹ç®¡ç†" class="headerlink" title="3. åšå®¢å†…å®¹ç®¡ç†"></a>3. åšå®¢å†…å®¹ç®¡ç†</h2><h3 id="åˆ›å»ºæ–°æ–‡ç« "><a href="#åˆ›å»ºæ–°æ–‡ç« " class="headerlink" title="åˆ›å»ºæ–°æ–‡ç« "></a>åˆ›å»ºæ–°æ–‡ç« </h3><ul><li><strong>åˆ›å»ºä¸€ç¯‡æ–°æ–‡ç« </strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo new post <span class="hljs-string">&quot;æ–‡ç« æ ‡é¢˜&quot;</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="å‘å¸ƒã€è‰ç¨¿å’ŒæŸ¥çœ‹æ–‡ç« "><a href="#å‘å¸ƒã€è‰ç¨¿å’ŒæŸ¥çœ‹æ–‡ç« " class="headerlink" title="å‘å¸ƒã€è‰ç¨¿å’ŒæŸ¥çœ‹æ–‡ç« "></a>å‘å¸ƒã€è‰ç¨¿å’ŒæŸ¥çœ‹æ–‡ç« </h3><ul><li><p><strong>æŸ¥çœ‹å·²åˆ›å»ºçš„æ‰€æœ‰æ–‡ç« </strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo list<br></code></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹è‰ç¨¿æ–‡ç« </strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo list --draft<br></code></pre></td></tr></table></figure></li><li><p><strong>å‘å¸ƒè‰ç¨¿æ–‡ç« </strong>ï¼š<br>åœ¨æ–‡ç« çš„ Front-matter ä¸­å°† <code>draft</code> è®¾ç½®ä¸º <code>false</code>ï¼Œç„¶åé‡æ–°ç”Ÿæˆåšå®¢ã€‚</p></li></ul><h2 id="4-Hexo-é…ç½®æ–‡ä»¶"><a href="#4-Hexo-é…ç½®æ–‡ä»¶" class="headerlink" title="4. Hexo é…ç½®æ–‡ä»¶"></a>4. Hexo é…ç½®æ–‡ä»¶</h2><h3 id="ä¿®æ”¹-config-yml"><a href="#ä¿®æ”¹-config-yml" class="headerlink" title="ä¿®æ”¹ _config.yml"></a>ä¿®æ”¹ <code>_config.yml</code></h3><ul><li><strong>ä¿®æ”¹ Hexo é…ç½®æ–‡ä»¶</strong>ï¼šç¼–è¾‘ Hexo é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶æ¥é…ç½®åšå®¢åŸºæœ¬ä¿¡æ¯ï¼Œå¦‚ç«™ç‚¹æ ‡é¢˜ã€URL ç­‰ã€‚</li></ul><h3 id="ä¿®æ”¹ä¸»é¢˜é…ç½®"><a href="#ä¿®æ”¹ä¸»é¢˜é…ç½®" class="headerlink" title="ä¿®æ”¹ä¸»é¢˜é…ç½®"></a>ä¿®æ”¹ä¸»é¢˜é…ç½®</h3><ul><li><strong>ä¿®æ”¹ä¸»é¢˜é…ç½®</strong>ï¼šç¼–è¾‘ <code>themes/&lt;your_theme&gt;/config.yml</code> æ¥è°ƒæ•´ä¸»é¢˜æ ·å¼ã€é¢œè‰²å’Œå…¶ä»–è®¾ç½®ã€‚</li></ul><h2 id="5-æ’ä»¶ç®¡ç†"><a href="#5-æ’ä»¶ç®¡ç†" class="headerlink" title="5. æ’ä»¶ç®¡ç†"></a>5. æ’ä»¶ç®¡ç†</h2><h3 id="å®‰è£…æ’ä»¶"><a href="#å®‰è£…æ’ä»¶" class="headerlink" title="å®‰è£…æ’ä»¶"></a>å®‰è£…æ’ä»¶</h3><ul><li><strong>å®‰è£… Hexo æ’ä»¶</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install &lt;plugin_name&gt; --save<br></code></pre></td></tr></table></figure></li></ul><h3 id="å¯ç”¨æ’ä»¶"><a href="#å¯ç”¨æ’ä»¶" class="headerlink" title="å¯ç”¨æ’ä»¶"></a>å¯ç”¨æ’ä»¶</h3><ul><li><strong>å¯ç”¨æ’ä»¶</strong>ï¼šä¿®æ”¹ <code>_config.yml</code> æ–‡ä»¶ï¼Œæ·»åŠ æˆ–å¯ç”¨éœ€è¦çš„æ’ä»¶ã€‚</li></ul><h2 id="6-ä¸»é¢˜ç®¡ç†"><a href="#6-ä¸»é¢˜ç®¡ç†" class="headerlink" title="6. ä¸»é¢˜ç®¡ç†"></a>6. ä¸»é¢˜ç®¡ç†</h2><ul><li><p><strong>å®‰è£…ä¸»é¢˜</strong>ï¼šå°†ä¸»é¢˜æ–‡ä»¶æ”¾å…¥ <code>themes/</code> ç›®å½•ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> &lt;theme_url&gt; themes/&lt;theme_name&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>åˆ‡æ¢ä¸»é¢˜</strong>ï¼šä¿®æ”¹ <code>_config.yml</code> æ–‡ä»¶ä¸­çš„ <code>theme</code> é…ç½®é¡¹ï¼ŒæŒ‡å®šè¦ä½¿ç”¨çš„ä¸»é¢˜ã€‚</p></li></ul><h2 id="7-Hexo-æ¸…ç†å’Œä¼˜åŒ–"><a href="#7-Hexo-æ¸…ç†å’Œä¼˜åŒ–" class="headerlink" title="7. Hexo æ¸…ç†å’Œä¼˜åŒ–"></a>7. Hexo æ¸…ç†å’Œä¼˜åŒ–</h2><ul><li><p><strong>åˆ é™¤å·²ç”Ÿæˆçš„æ–‡ä»¶</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo clean<br></code></pre></td></tr></table></figure></li><li><p><strong>æ¸…ç†ç¼“å­˜</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo cache clean<br></code></pre></td></tr></table></figure></li></ul><h2 id="8-å¸¸ç”¨è°ƒè¯•å‘½ä»¤"><a href="#8-å¸¸ç”¨è°ƒè¯•å‘½ä»¤" class="headerlink" title="8. å¸¸ç”¨è°ƒè¯•å‘½ä»¤"></a>8. å¸¸ç”¨è°ƒè¯•å‘½ä»¤</h2><ul><li><p><strong>æŸ¥çœ‹ Hexo ç‰ˆæœ¬</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo -v<br></code></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹ Hexo é…ç½®ä¿¡æ¯</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo config<br></code></pre></td></tr></table></figure></li><li><p><strong>è°ƒè¯• Hexo é…ç½®</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo debug<br></code></pre></td></tr></table></figure></li></ul><h2 id="9-å‚è€ƒæ–‡æ¡£"><a href="#9-å‚è€ƒæ–‡æ¡£" class="headerlink" title="9. å‚è€ƒæ–‡æ¡£"></a>9. å‚è€ƒæ–‡æ¡£</h2><ul><li><a href="https://hexo.io/docs/">Hexo å®˜æ–¹æ–‡æ¡£</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>dockerå¸¸ç”¨å‘½ä»¤</title>
    <link href="/2025/02/19/docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    <url>/2025/02/19/docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<h1 id="Docker-å¸¸ç”¨å‘½ä»¤"><a href="#Docker-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="Docker å¸¸ç”¨å‘½ä»¤"></a>Docker å¸¸ç”¨å‘½ä»¤</h1><h2 id="1-å®‰è£…-Docker"><a href="#1-å®‰è£…-Docker" class="headerlink" title="1. å®‰è£… Docker"></a>1. å®‰è£… Docker</h2><ul><li><strong>å®‰è£… Docker</strong>ï¼š<ul><li>å‚ç…§ <a href="https://docs.docker.com/get-docker/">Docker å®˜æ–¹å®‰è£…æ–‡æ¡£</a> è¿›è¡Œå®‰è£…ã€‚</li></ul></li></ul><h2 id="2-Docker-å®¹å™¨ç®¡ç†"><a href="#2-Docker-å®¹å™¨ç®¡ç†" class="headerlink" title="2. Docker å®¹å™¨ç®¡ç†"></a>2. Docker å®¹å™¨ç®¡ç†</h2><h3 id="å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤å®¹å™¨"><a href="#å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤å®¹å™¨" class="headerlink" title="å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤å®¹å™¨"></a>å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤å®¹å™¨</h3><ul><li><p><strong>å¯åŠ¨å®¹å™¨</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker start &lt;container_id_or_name&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>åœæ­¢å®¹å™¨</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker stop &lt;container_id_or_name&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>é‡å¯å®¹å™¨</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker restart &lt;container_id_or_name&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>åˆ é™¤å®¹å™¨</strong>ï¼ˆåˆ é™¤å·²åœæ­¢çš„å®¹å™¨ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker <span class="hljs-built_in">rm</span> &lt;container_id_or_name&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ˆåŒ…æ‹¬åœæ­¢çš„å®¹å™¨ï¼‰</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker ps -a<br></code></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker ps<br></code></pre></td></tr></table></figure></li></ul><h3 id="è¿›å…¥å®¹å™¨"><a href="#è¿›å…¥å®¹å™¨" class="headerlink" title="è¿›å…¥å®¹å™¨"></a>è¿›å…¥å®¹å™¨</h3><ul><li><p><strong>è¿›å…¥å®¹å™¨ç»ˆç«¯</strong>ï¼ˆäº¤äº’æ¨¡å¼ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker <span class="hljs-built_in">exec</span> -it &lt;container_id_or_name&gt; bash<br></code></pre></td></tr></table></figure></li><li><p><strong>é€€å‡ºå®¹å™¨</strong>ï¼ˆé€€å‡ºå®¹å™¨çš„ç»ˆç«¯ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">exit</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="3-Docker-é•œåƒç®¡ç†"><a href="#3-Docker-é•œåƒç®¡ç†" class="headerlink" title="3. Docker é•œåƒç®¡ç†"></a>3. Docker é•œåƒç®¡ç†</h2><h3 id="é•œåƒæ“ä½œ"><a href="#é•œåƒæ“ä½œ" class="headerlink" title="é•œåƒæ“ä½œ"></a>é•œåƒæ“ä½œ</h3><ul><li><p><strong>æŸ¥çœ‹æœ¬åœ°é•œåƒ</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker images<br></code></pre></td></tr></table></figure></li><li><p><strong>æ‹‰å–é•œåƒ</strong>ï¼ˆä» Docker Hub æˆ–è‡ªå®šä¹‰ä»“åº“æ‹‰å–ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker pull &lt;image_name&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>åˆ é™¤é•œåƒ</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker rmi &lt;image_id_or_name&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>æ„å»ºé•œåƒ</strong>ï¼ˆæ ¹æ® Dockerfile æ„å»ºé•œåƒï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker build -t &lt;image_name&gt;:&lt;tag&gt; &lt;path_to_dockerfile&gt;<br></code></pre></td></tr></table></figure></li></ul><h2 id="4-Docker-ç½‘ç»œç®¡ç†"><a href="#4-Docker-ç½‘ç»œç®¡ç†" class="headerlink" title="4. Docker ç½‘ç»œç®¡ç†"></a>4. Docker ç½‘ç»œç®¡ç†</h2><ul><li><p><strong>æŸ¥çœ‹ Docker ç½‘ç»œ</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker network <span class="hljs-built_in">ls</span><br></code></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹ç‰¹å®šç½‘ç»œè¯¦æƒ…</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker network inspect &lt;network_name_or_id&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>åˆ›å»ºè‡ªå®šä¹‰ç½‘ç»œ</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker network create &lt;network_name&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>è¿æ¥å®¹å™¨åˆ°ç½‘ç»œ</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker network connect &lt;network_name&gt; &lt;container_id_or_name&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>ä»ç½‘ç»œæ–­å¼€å®¹å™¨</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker network disconnect &lt;network_name&gt; &lt;container_id_or_name&gt;<br></code></pre></td></tr></table></figure></li></ul><h2 id="5-Docker-å®¹å™¨æ—¥å¿—"><a href="#5-Docker-å®¹å™¨æ—¥å¿—" class="headerlink" title="5. Docker å®¹å™¨æ—¥å¿—"></a>5. Docker å®¹å™¨æ—¥å¿—</h2><ul><li><p><strong>æŸ¥çœ‹å®¹å™¨æ—¥å¿—</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker logs &lt;container_id_or_name&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>å®æ—¶æŸ¥çœ‹å®¹å™¨æ—¥å¿—</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker logs -f &lt;container_id_or_name&gt;<br></code></pre></td></tr></table></figure></li></ul><h2 id="6-Docker-Volume-ç®¡ç†"><a href="#6-Docker-Volume-ç®¡ç†" class="headerlink" title="6. Docker Volume ç®¡ç†"></a>6. Docker Volume ç®¡ç†</h2><h3 id="Volume-æ“ä½œ"><a href="#Volume-æ“ä½œ" class="headerlink" title="Volume æ“ä½œ"></a>Volume æ“ä½œ</h3><ul><li><p><strong>æŸ¥çœ‹æœ¬åœ°å·</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker volume <span class="hljs-built_in">ls</span><br></code></pre></td></tr></table></figure></li><li><p><strong>åˆ›å»ºå·</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker volume create &lt;volume_name&gt;<br></code></pre></td></tr></table></figure></li><li><p><strong>åˆ é™¤å·</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker volume <span class="hljs-built_in">rm</span> &lt;volume_name&gt;<br></code></pre></td></tr></table></figure></li></ul><h2 id="7-Docker-Compose"><a href="#7-Docker-Compose" class="headerlink" title="7. Docker Compose"></a>7. Docker Compose</h2><h3 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h3><ul><li><p><strong>å¯åŠ¨æœåŠ¡</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker-compose up<br></code></pre></td></tr></table></figure></li><li><p><strong>åå°å¯åŠ¨æœåŠ¡</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker-compose up -d<br></code></pre></td></tr></table></figure></li><li><p><strong>åœæ­¢æœåŠ¡</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker-compose down<br></code></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹æœåŠ¡æ—¥å¿—</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker-compose logs<br></code></pre></td></tr></table></figure></li></ul><h2 id="8-Docker-æ¸…ç†"><a href="#8-Docker-æ¸…ç†" class="headerlink" title="8. Docker æ¸…ç†"></a>8. Docker æ¸…ç†</h2><ul><li><p><strong>åˆ é™¤æ‰€æœ‰åœæ­¢çš„å®¹å™¨</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker container prune<br></code></pre></td></tr></table></figure></li><li><p><strong>åˆ é™¤æ‰€æœ‰æœªä½¿ç”¨çš„é•œåƒ</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker image prune<br></code></pre></td></tr></table></figure></li><li><p><strong>åˆ é™¤æ‰€æœ‰æœªä½¿ç”¨çš„å·</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker volume prune<br></code></pre></td></tr></table></figure></li><li><p><strong>åˆ é™¤æ‰€æœ‰æœªä½¿ç”¨çš„ç½‘ç»œ</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker network prune<br></code></pre></td></tr></table></figure></li><li><p><strong>æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨çš„èµ„æº</strong>ï¼ˆå®¹å™¨ã€ç½‘ç»œã€é•œåƒã€å·ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker system prune<br></code></pre></td></tr></table></figure></li></ul><h2 id="9-å…¶ä»–å¸¸ç”¨å‘½ä»¤"><a href="#9-å…¶ä»–å¸¸ç”¨å‘½ä»¤" class="headerlink" title="9. å…¶ä»–å¸¸ç”¨å‘½ä»¤"></a>9. å…¶ä»–å¸¸ç”¨å‘½ä»¤</h2><ul><li><p><strong>æŸ¥çœ‹ Docker ç‰ˆæœ¬</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker --version<br></code></pre></td></tr></table></figure></li><li><p><strong>æŸ¥çœ‹ Docker ä¿¡æ¯</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker info<br></code></pre></td></tr></table></figure></li></ul><h2 id="10-å‚è€ƒæ–‡æ¡£"><a href="#10-å‚è€ƒæ–‡æ¡£" class="headerlink" title="10. å‚è€ƒæ–‡æ¡£"></a>10. å‚è€ƒæ–‡æ¡£</h2><ul><li><a href="https://docs.docker.com/">Docker å®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://docs.docker.com/compose/">Docker Compose å®˜æ–¹æ–‡æ¡£</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Dockerå®¹å™¨æŠ€æœ¯è¯¦è§£</title>
    <link href="/2025/02/19/Docker%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF%E8%AF%A6%E8%A7%A3/"/>
    <url>/2025/02/19/Docker%E5%AE%B9%E5%99%A8%E6%8A%80%E6%9C%AF%E8%AF%A6%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<h1 id="Dockerå®¹å™¨æŠ€æœ¯è¯¦è§£"><a href="#Dockerå®¹å™¨æŠ€æœ¯è¯¦è§£" class="headerlink" title="Dockerå®¹å™¨æŠ€æœ¯è¯¦è§£"></a>Dockerå®¹å™¨æŠ€æœ¯è¯¦è§£</h1><p>Dockeræ˜¯åŸºäºGoè¯­è¨€å¼€å‘çš„å¼€æºåº”ç”¨å®¹å™¨å¼•æ“ï¼Œéµä»Apache Licence 2.0åè®®ï¼Œå¯ä»¥è®©å¼€å‘è€…æ‰“åŒ…åº”ç”¨ä»¥åŠåº”ç”¨çš„ä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œç„¶åå‘å¸ƒåˆ°å„ç§å‘è¡Œç‰ˆæœ¬çš„Linuxç³»ç»Ÿä¸Šã€‚</p><h3 id="Dockerç®€ä»‹"><a href="#Dockerç®€ä»‹" class="headerlink" title="Dockerç®€ä»‹"></a>Dockerç®€ä»‹</h3><p>è½¯ä»¶å¼€å‘ä¸­æœ€ä¸ºéº»çƒ¦çš„äº‹æƒ…å¯èƒ½å°±æ˜¯é…ç½®ç¯å¢ƒäº†ã€‚ç”±äºç”¨æˆ·ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿå…·æœ‰å¤šæ ·æ€§ï¼Œå³ä¾¿ä½¿ç”¨è·¨å¹³å°çš„å¼€å‘è¯­è¨€ï¼ˆå¦‚Javaå’ŒPythonï¼‰éƒ½ä¸èƒ½ä¿è¯ä»£ç èƒ½å¤Ÿåœ¨å„ç§å¹³å°ä¸‹éƒ½å¯ä»¥æ­£å¸¸çš„è¿è½¬ï¼Œè€Œä¸”åœ¨ä¸åŒçš„ç¯å¢ƒä¸‹æˆ‘ä»¬å®‰è£…çš„è½¯ä»¶éœ€è¦ä¾èµ–çš„è½¯ä»¶åŒ…ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚</p><p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬å®‰è£…è½¯ä»¶çš„æ—¶å€™å¯ä¸å¯ä»¥æŠŠè½¯ä»¶è¿è¡Œçš„ç¯å¢ƒä¸€å¹¶å®‰è£…ï¼Ÿæˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥æŠŠåŸå§‹ç¯å¢ƒä¸€æ¨¡ä¸€æ ·åœ°å¤åˆ¶è¿‡æ¥å‘¢ï¼Ÿ</p><p>è™šæ‹Ÿæœºï¼ˆvirtual machineï¼‰å°±æ˜¯å¸¦ç¯å¢ƒå®‰è£…çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œå®ƒå¯ä»¥åœ¨ä¸€ç§æ“ä½œç³»ç»Ÿé‡Œé¢è¿è¡Œå¦ä¸€ç§æ“ä½œç³»ç»Ÿï¼Œæ¯”å¦‚åœ¨Windowsç³»ç»Ÿé‡Œé¢è¿è¡ŒLinuxç³»ç»Ÿï¼Œåœ¨macOSä¸Šè¿è¡ŒWindowsï¼Œè€Œåº”ç”¨ç¨‹åºå¯¹æ­¤æ¯«æ— æ„ŸçŸ¥ã€‚ä½¿ç”¨è¿‡è™šæ‹Ÿæœºçš„äººéƒ½çŸ¥é“ï¼Œè™šæ‹Ÿæœºç”¨èµ·æ¥è·ŸçœŸå®ç³»ç»Ÿä¸€æ¨¡ä¸€æ ·ï¼Œè€Œå¯¹äºè™šæ‹Ÿæœºçš„å®¿ä¸»ç³»ç»Ÿæ¥è¯´ï¼Œè™šæ‹Ÿæœºå°±æ˜¯ä¸€ä¸ªæ™®é€šæ–‡ä»¶ï¼Œä¸éœ€è¦äº†å°±åˆ æ‰ï¼Œå¯¹å®¿ä¸»ç³»ç»Ÿæˆ–è€…å…¶ä»–çš„ç¨‹åºå¹¶æ²¡æœ‰å½±å“ã€‚ä½†æ˜¯è™šæ‹Ÿæœºé€šå¸¸ä¼šå ç”¨è¾ƒå¤šçš„ç³»ç»Ÿèµ„æºï¼Œå¯åŠ¨å’Œå…³é—­ä¹Ÿéå¸¸çš„ç¼“æ…¢ï¼Œæ€»ä¹‹ç”¨æˆ·ä½“éªŒå¹¶æ²¡æœ‰æƒ³è±¡ä¸­çš„é‚£ä¹ˆå¥½ã€‚</p><p>Dockerå±äºå¯¹Linuxå®¹å™¨æŠ€æœ¯ï¼ˆLXCï¼‰çš„ä¸€ç§å°è£…ï¼ˆåˆ©ç”¨äº†Linuxçš„namespaceå’ŒcgroupæŠ€æœ¯ï¼‰ï¼Œå®ƒæä¾›äº†ç®€å•æ˜“ç”¨çš„å®¹å™¨ä½¿ç”¨æ¥å£ï¼Œæ˜¯ç›®å‰æœ€æµè¡Œçš„ Linux å®¹å™¨è§£å†³æ–¹æ¡ˆã€‚Dockerå°†åº”ç”¨ç¨‹åºä¸è¯¥ç¨‹åºçš„ä¾èµ–æ‰“åŒ…åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ï¼Œè¿è¡Œè¿™ä¸ªæ–‡ä»¶ï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªè™šæ‹Ÿå®¹å™¨ã€‚ç¨‹åºåœ¨è¿™ä¸ªè™šæ‹Ÿå®¹å™¨é‡Œè¿è¡Œï¼Œå°±å¥½åƒåœ¨çœŸå®çš„ç‰©ç†æœºä¸Šè¿è¡Œä¸€æ ·ã€‚ä¸‹å›¾æ˜¯è™šæ‹Ÿæœºå’Œå®¹å™¨çš„å¯¹æ¯”ï¼Œå·¦è¾¹æ˜¯ä¼ ç»Ÿçš„è™šæ‹Ÿæœºï¼Œå³è¾¹æ˜¯Dockerã€‚</p><p><img src="/./res/docker_vs_vm.png"></p><p>ç›®å‰ï¼ŒDockerä¸»è¦ç”¨äºå‡ ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p><ol><li>æä¾›ä¸€æ¬¡æ€§çš„ç¯å¢ƒã€‚</li><li>æä¾›å¼¹æ€§çš„äº‘æœåŠ¡ï¼ˆåˆ©ç”¨Dockerå¾ˆå®¹æ˜“å®ç°æ‰©å®¹å’Œæ”¶ç¼©ï¼‰ã€‚</li><li>å®è·µå¾®æœåŠ¡æ¶æ„ï¼ˆéš”ç¦»çœŸå®ç¯å¢ƒåœ¨å®¹å™¨ä¸­è¿è¡Œå¤šä¸ªæœåŠ¡ï¼‰ã€‚</li></ol><h3 id="å®‰è£…Docker"><a href="#å®‰è£…Docker" class="headerlink" title="å®‰è£…Docker"></a>å®‰è£…Docker</h3><p>ä¸‹é¢ä»¥CentOSä¸ºä¾‹è®²è§£å¦‚ä½•å®‰è£…Dockerï¼Œä½¿ç”¨<a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/">Ubuntu</a>ã€<a href="https://docs.docker.com/docker-for-mac/install/">macOS</a>æˆ–<a href="https://docs.docker.com/docker-for-windows/install/">Windows</a>çš„ç”¨æˆ·å¯ä»¥é€šè¿‡ç‚¹å‡»å¯¹åº”çš„é“¾æ¥äº†è§£è¿™äº›å¹³å°ä¸‹å¦‚ä½•è¿›è¡Œå®‰è£…ã€‚</p><ol><li><p>ç¡®å®šæ“ä½œç³»ç»Ÿå†…æ ¸ç‰ˆæœ¬ï¼ˆCentOS 7è¦æ±‚64ä½ï¼Œå†…æ ¸ç‰ˆæœ¬3.10+ï¼›CentOS 6è¦æ±‚64ä½ï¼Œå†…æ ¸ç‰ˆæœ¬2.6+ï¼‰ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash"><span class="hljs-built_in">uname</span> -r<br></code></pre></td></tr></table></figure></li><li><p>æ›´æ–°ç³»ç»Ÿåº•å±‚çš„åº“æ–‡ä»¶ï¼ˆå»ºè®®ä¸€å®šè¦æ‰§è¡Œï¼Œå¦åˆ™åœ¨ä½¿ç”¨Dockeræ—¶å¯èƒ½ä¼šå‡ºç°è«åå…¶å¦™çš„é—®é¢˜ï¼‰ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash">yum update<br></code></pre></td></tr></table></figure></li><li><p>ç§»é™¤å¯èƒ½å­˜åœ¨çš„æ—§çš„Dockerç‰ˆæœ¬ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs Bash">yum list installed | grep docker<br>yum erase -y docker docker-common docker-engine<br></code></pre></td></tr></table></figure></li><li><p>å®‰è£…yumå·¥å…·åŒ…å’Œä¾èµ–é¡¹ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash">yum install -y yum-utils device-mapper-persistent-data lvm2<br></code></pre></td></tr></table></figure></li><li><p>é€šè¿‡yumå·¥å…·åŒ…æ·»åŠ yumæºï¼ˆå®‰è£…Docker-ceçš„æºï¼‰ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Bash">yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo<br></code></pre></td></tr></table></figure></li><li><p>åœ¨CentOSä¸‹ä½¿ç”¨yumå®‰è£…Docker-ceå¹¶å¯åŠ¨ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs Bash">yum -y install docker-ce<br>systemctl start docker<br></code></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹Dockerçš„ä¿¡æ¯å’Œç‰ˆæœ¬ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker version<br>docker info<br></code></pre></td></tr></table></figure></li></ol><p>æ¥ä¸‹æ¥å¯ä»¥é€šè¿‡ä¸‹è½½é•œåƒå’Œåˆ›å»ºå®¹å™¨æ¥çœ‹çœ‹Dockeræ˜¯å¦å¯ä»¥è¿è½¬èµ·æ¥ã€‚å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ä»Dockerçš„é•œåƒä»“åº“ä¸‹è½½åä¸ºhello-worldçš„é•œåƒæ–‡ä»¶ã€‚</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker pull hello-world<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹æ‰€æœ‰é•œåƒæ–‡ä»¶ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker images<br></code></pre></td></tr></table></figure><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">REPOSITORY</span>               TAG        IMAGE ID            CREATED             SIZE<br><span class="hljs-attribute">docker</span>.io/hello-world    latest     fce289e99eb9        <span class="hljs-number">7</span> months ago        <span class="hljs-number">1</span>.<span class="hljs-number">84</span> kB<br></code></pre></td></tr></table></figure><p>é€šè¿‡é•œåƒæ–‡ä»¶åˆ›å»ºå¹¶è¿è¡Œå®¹å™¨ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker container run --name mycontainer hello-world<br></code></pre></td></tr></table></figure><blockquote><p>è¯´æ˜ï¼šå…¶ä¸­<code>mycontainer</code>æ˜¯æˆ‘ä»¬ç»™å®¹å™¨èµ·çš„åå­—ï¼Œè·Ÿåœ¨<code>--name</code>å‚æ•°ä¹‹åï¼›<code>hello-world</code>å°±æ˜¯æˆ‘ä»¬åˆšæ‰ä¸‹è½½çš„é•œåƒæ–‡ä»¶ã€‚</p></blockquote><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">Hello <span class="hljs-built_in">from</span> Docker!<br>This message shows that your installation appears <span class="hljs-built_in">to</span> be working correctly.<br><br>To generate this message, Docker took <span class="hljs-keyword">the</span> following steps:<br> <span class="hljs-number">1.</span> The Docker client contacted <span class="hljs-keyword">the</span> Docker daemon.<br> <span class="hljs-number">2.</span> The Docker daemon pulled <span class="hljs-keyword">the</span> <span class="hljs-string">&quot;hello-world&quot;</span> image <span class="hljs-built_in">from</span> <span class="hljs-keyword">the</span> Docker Hub.<br>    (amd64)<br> <span class="hljs-number">3.</span> The Docker daemon created <span class="hljs-keyword">a</span> <span class="hljs-built_in">new</span> container <span class="hljs-built_in">from</span> that image which runs <span class="hljs-keyword">the</span><br>    executable that produces <span class="hljs-keyword">the</span> output you are currently reading.<br> <span class="hljs-number">4.</span> The Docker daemon streamed that output <span class="hljs-built_in">to</span> <span class="hljs-keyword">the</span> Docker client, which sent <span class="hljs-keyword">it</span><br>    <span class="hljs-built_in">to</span> your terminal.<br><br>To <span class="hljs-keyword">try</span> something more ambitious, you can run <span class="hljs-keyword">an</span> Ubuntu container <span class="hljs-keyword">with</span>:<br> $ docker run -<span class="hljs-keyword">it</span> ubuntu bash<br><br>Share images, automate workflows, <span class="hljs-keyword">and</span> more <span class="hljs-keyword">with</span> <span class="hljs-keyword">a</span> free Docker ID:<br> <span class="hljs-keyword">https</span>://hub.docker.com/<br><br>For more examples <span class="hljs-keyword">and</span> ideas, visit:<br> <span class="hljs-keyword">https</span>://docs.docker.com/<span class="hljs-built_in">get</span>-started/<br></code></pre></td></tr></table></figure><p>å¦‚æœè¦åˆ é™¤è¿™ä¸ªå®¹å™¨ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker container rm mycontainer<br></code></pre></td></tr></table></figure><p>åœ¨åˆ é™¤å®¹å™¨ä¹‹åï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åˆ é™¤åˆšæ‰ä¸‹è½½çš„é•œåƒæ–‡ä»¶ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker rmi hello-world<br></code></pre></td></tr></table></figure><blockquote><p>è¯´æ˜ï¼šå¦‚æœè¦åœ¨Ubuntuï¼ˆå†…æ ¸ç‰ˆæœ¬3.10+ï¼‰ä¸‹é¢å®‰è£…å’Œå¯åŠ¨Dockerï¼Œå¯ä»¥æŒ‰ç…§å¦‚ä¸‹çš„æ­¥éª¤è¿›è¡Œã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs Shell">apt update<br>apt install docker-ce<br>service docker start<br></code></pre></td></tr></table></figure><p>å›½å†…ç”¨æˆ·å¯ä»¥é€šè¿‡æ›´æ¢Ubuntuè½¯ä»¶ä¸‹è½½æºæ¥æå‡ä¸‹è½½é€Ÿåº¦ï¼Œå…·ä½“è¯·å‚ç…§æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™ä¸Šçš„<a href="https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/">ã€ŠUbuntué•œåƒä½¿ç”¨å¸®åŠ©ã€‹</a>ã€‚</p></blockquote><p>å®‰è£…Dockeråï¼Œç”±äºç›´æ¥è®¿é—®<a href="https://hub.docker.com/">dockerhub</a>ä¸‹è½½é•œåƒä¼šéå¸¸ç¼“æ…¢ï¼Œå»ºè®®å°†æœåŠ¡å™¨æ›´æ¢ä¸ºå›½å†…é•œåƒï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ <code>/etc/docker/daemon.json</code> æ–‡ä»¶æ¥åšåˆ°ã€‚ä¸€èˆ¬çš„äº‘æœåŠ¡å™¨ä¼šæœ‰è‡ªå·±ä¸“å±çš„é•œåƒï¼Œå°±ä¸éœ€è¦æ‰‹åŠ¨ä¿®æ”¹äº†ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs JavaScript">&#123;<br><span class="hljs-string">&quot;registry-mirrors&quot;</span>: [<br>        <span class="hljs-string">&quot;http://hub-mirror.c.163.com&quot;</span>,<br>        <span class="hljs-string">&quot;https://registry.docker-cn.com&quot;</span><br>    ]<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ä½¿ç”¨Docker"><a href="#ä½¿ç”¨Docker" class="headerlink" title="ä½¿ç”¨Docker"></a>ä½¿ç”¨Docker</h3><p>æƒ³è¦ç©è½¬Dockerï¼Œæœ€ç®€å•çš„åŠæ³•å°±æ˜¯é©¬ä¸Šç”¨Dockeråˆ›å»ºä¸€äº›è‡ªå·±å­¦ä¹ å’Œå·¥ä½œä¸­éœ€è¦ç”¨åˆ°çš„å®¹å™¨ï¼Œä¸‹é¢æˆ‘ä»¬å¸¦ç€å¤§å®¶ä¸€èµ·æ¥åˆ›å»ºè¿™äº›å®¹å™¨ã€‚</p><h4 id="è¿è¡ŒNginx"><a href="#è¿è¡ŒNginx" class="headerlink" title="è¿è¡ŒNginx"></a>è¿è¡ŒNginx</h4><p>Nginxæ˜¯é«˜æ€§èƒ½çš„WebæœåŠ¡å™¨ï¼ŒåŒæ—¶ä¹Ÿæ˜¯åšåå‘ä»£ç†æœåŠ¡å™¨çš„ä¸Šä½³é€‰æ‹©ã€‚ä½¿ç”¨Dockerå¯ä»¥éå¸¸ç®€å•çš„åˆ›å»ºä¸€ä¸ªè¿è¡ŒNginxçš„å®¹å™¨ï¼Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker container run -d -p 80:80 --rm --name mynginx nginx<br></code></pre></td></tr></table></figure><blockquote><p>è¯´æ˜ï¼šä¸Šé¢çš„å‚æ•°<code>-d</code>è¡¨ç¤ºå®¹å™¨åœ¨åå°è¿è¡Œï¼ˆä¸äº§ç”Ÿè¾“å‡ºåˆ°Shellï¼‰å¹¶æ˜¾ç¤ºå®¹å™¨çš„IDï¼›<code>-p</code>æ˜¯ç”¨æ¥æ˜ å°„å®¹å™¨çš„ç«¯å£åˆ°å®¿ä¸»æœºçš„ç«¯å£ï¼Œå†’å·å‰é¢æ˜¯å®¿ä¸»æœºçš„ç«¯å£ï¼Œå†’å·åé¢æ˜¯å®¹å™¨å†…éƒ¨ä½¿ç”¨çš„ç«¯å£ï¼›<code>--rm</code>è¡¨ç¤ºå®¹å™¨åœæ­¢åè‡ªåŠ¨åˆ é™¤å®¹å™¨ï¼Œä¾‹å¦‚æ‰§è¡Œå‘½ä»¤<code>docker container stop mynginx</code>åï¼Œå®¹å™¨å°±ä¸å¤å­˜åœ¨äº†ï¼›<code>--name</code>åé¢çš„mynginxæ˜¯è‡ªå®šä¹‰çš„å®¹å™¨åå­—ï¼›åœ¨åˆ›å»ºå®¹å™¨çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦ç”¨åˆ°nginxçš„é•œåƒæ–‡ä»¶ï¼Œé•œåƒæ–‡ä»¶çš„ä¸‹è½½æ˜¯è‡ªåŠ¨å®Œæˆçš„ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šç‰ˆæœ¬å·ï¼Œé»˜è®¤æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼ˆlatestï¼‰ã€‚</p></blockquote><p>å¦‚æœéœ€è¦å°†è‡ªå·±çš„Webé¡¹ç›®ï¼ˆé¡µé¢ï¼‰éƒ¨ç½²åˆ°Nginxä¸Šï¼Œå¯ä»¥ä½¿ç”¨å®¹å™¨æ‹·è´å‘½ä»¤å°†æŒ‡å®šè·¯å¾„ä¸‹æ‰€æœ‰çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹æ‹·è´åˆ°å®¹å™¨çš„æŒ‡å®šç›®å½•ä¸­ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker container cp /root/web/index.html mynginx:/usr/share/nginx/html<br></code></pre></td></tr></table></figure><p>å¦‚æœä¸æ„¿æ„æ‹·è´æ–‡ä»¶ä¹Ÿå¯ä»¥åœ¨åˆ›å»ºå®¹å™¨æ—¶é€šè¿‡æ•°æ®å·æ“ä½œ<code>--volume</code>å°†æŒ‡å®šçš„æ–‡ä»¶å¤¹æ˜ å°„åˆ°å®¹å™¨çš„æŸä¸ªç›®å½•ä¸­ï¼Œä¾‹å¦‚å°†Webé¡¹ç›®çš„æ–‡ä»¶å¤¹ç›´æ¥æ˜ å°„åˆ°<code>/usr/share/nginx/html</code>ç›®å½•ã€‚æˆ‘ä»¬å…ˆé€šè¿‡ä¸‹é¢çš„å‘½ä»¤è®©åˆšæ‰åˆ›å»ºçš„å®¹å™¨åœæ­¢è¿è¡Œã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker container stop mynginx<br></code></pre></td></tr></table></figure><p>ç„¶åç”¨ä¸‹é¢çš„å‘½ä»¤é‡æ–°åˆ›å»ºå®¹å™¨ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker container run -d -p 80:80 --rm --name mynginx --volume /root/docker/nginx/html:/usr/share/nginx/html nginx<br></code></pre></td></tr></table></figure><blockquote><p>è¯´æ˜ï¼šä¸Šé¢åˆ›å»ºå®¹å™¨å’Œæ‹·è´æ–‡ä»¶çš„å‘½ä»¤ä¸­ï¼Œ<code>container</code>æ˜¯å¯ä»¥çœç•¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´<code>docker container run</code>å’Œ<code>docker run</code>æ˜¯ä¸€æ ·çš„ï¼Œè€Œ<code>docker container cp</code>å’Œ<code>docker cp</code>æ˜¯ä¸€æ ·çš„ã€‚æ­¤å¤–ï¼Œå‘½ä»¤ä¸­çš„<code>--volume</code>ä¹Ÿå¯ä»¥ç¼©å†™ä¸º<code>-v</code>ï¼Œå°±å¦‚åŒ<code>-d</code>æ˜¯<code>--detach</code>çš„ç¼©å†™ï¼Œ<code>-p</code>æ˜¯<code>--publish</code>çš„ç¼©å†™ã€‚<code>$PWD</code>ä»£è¡¨å®¿ä¸»ç³»ç»Ÿå½“å‰æ–‡ä»¶å¤¹ï¼Œè¿™äº›å¯¹äºä½¿ç”¨è¿‡Unixæˆ–è€…Linuxç³»ç»Ÿçš„äººæ¥è¯´ï¼Œåº”è¯¥æ˜¯å¾ˆå®¹æ˜“ç†è§£çš„ã€‚</p></blockquote><p>è¦æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker ps<br></code></pre></td></tr></table></figure><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">CONTAINER</span> ID    IMAGE    COMMAND                  CREATED            STATUS             PORTS                 NAMES<br><span class="hljs-attribute">3c38d2476384</span>    nginx    <span class="hljs-string">&quot;nginx -g &#x27;daemon ...&quot;</span>   <span class="hljs-number">4</span> seconds ago      Up <span class="hljs-number">4</span> seconds       <span class="hljs-number">0.0.0.0:80</span>-&gt;<span class="hljs-number">80</span>/tcp    mynginx<br></code></pre></td></tr></table></figure><p>è¦å¯åŠ¨å’Œåœæ­¢å®¹å™¨ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker start mynginx<br>docker stop mynginx<br></code></pre></td></tr></table></figure><p>ç”±äºåœ¨åˆ›å»ºå®¹å™¨æ—¶ä½¿ç”¨äº†<code>--rm</code>é€‰é¡¹ï¼Œå®¹å™¨åœ¨åœæ­¢æ—¶ä¼šè¢«ç§»é™¤ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹æ‰€æœ‰å®¹å™¨æ—¶ï¼Œåº”è¯¥å·²ç»çœ‹ä¸åˆ°åˆšæ‰çš„<code>mynginx</code>å®¹å™¨äº†ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker container ls -a<br></code></pre></td></tr></table></figure><p>å¦‚æœåœ¨åˆ›å»ºå®¹å™¨æ—¶æ²¡æœ‰æŒ‡å®š<code>--rm</code>é€‰é¡¹ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥åˆ é™¤å®¹å™¨ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker rm mynginx<br></code></pre></td></tr></table></figure><p>è¦åˆ é™¤æ­£åœ¨è¿è¡Œä¸­çš„å®¹å™¨ï¼Œéœ€è¦ä½¿ç”¨<code>-f</code>é€‰é¡¹ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker rm -f mynginx<br></code></pre></td></tr></table></figure><h4 id="è¿è¡ŒMySQL"><a href="#è¿è¡ŒMySQL" class="headerlink" title="è¿è¡ŒMySQL"></a>è¿è¡ŒMySQL</h4><p>æˆ‘ä»¬å†æ¥å°è¯•ç”¨Dockerå®‰è£…ä¸€å°MySQLæœåŠ¡å™¨ï¼Œé¦–å…ˆå¯ä»¥å…ˆæ£€æŸ¥ä¸€ä¸‹æœ‰æ²¡æœ‰MySQLçš„é•œåƒæ–‡ä»¶ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker search mysql<br></code></pre></td></tr></table></figure><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs delphi"><span class="hljs-keyword">INDEX</span>        <span class="hljs-keyword">NAME</span>            DESCRIPTION        STARS        OFFICIAL        AUTOMATED<br>docker.io    docker.io/mysql MySQL <span class="hljs-keyword">is</span> a ...     <span class="hljs-number">8486</span>         [OK]<br>...<br></code></pre></td></tr></table></figure><blockquote><p>è¯´æ˜ï¼šä¸Šé¢æŸ¥è¯¢ç»“æœçš„åˆ—ä¾æ¬¡ä»£è¡¨ç´¢å¼•ã€é•œåƒåã€é•œåƒæè¿°ã€ç”¨æˆ·è¯„ä»·ã€æ˜¯å¦å®˜æ–¹é•œåƒã€è‡ªåŠ¨æ„å»ºã€‚</p></blockquote><p>ä¸‹è½½MySQLé•œåƒå¹¶æŒ‡å®šé•œåƒçš„ç‰ˆæœ¬å·ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker pull mysql:5.7<br></code></pre></td></tr></table></figure><p>å¦‚æœéœ€è¦æŸ¥çœ‹å·²ç»ä¸‹è½½çš„é•œåƒæ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker images<br></code></pre></td></tr></table></figure><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">REPOSITORY</span>          TAG                 IMAGE ID            CREATED             SIZE<br><span class="hljs-attribute">docker</span>.io/nginx     latest              e445ab08b2be        <span class="hljs-number">2</span> weeks ago         <span class="hljs-number">126</span> MB<br><span class="hljs-attribute">docker</span>.io/mysql     <span class="hljs-number">5</span>.<span class="hljs-number">7</span>                 f6509bac4980        <span class="hljs-number">3</span> weeks ago         <span class="hljs-number">373</span> MB<br></code></pre></td></tr></table></figure><p>åˆ›å»ºå¹¶è¿è¡ŒMySQLå®¹å™¨ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker run -d -p 3306:3306 --name mysql57 -v /root/docker/mysql/conf:/etc/mysql/mysql.conf.d -v /root/docker/mysql/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 mysql:5.7<br></code></pre></td></tr></table></figure><blockquote><p><strong>æ³¨æ„</strong>ï¼šä¸Šé¢åˆ›å»ºå®¹å™¨æ—¶æˆ‘ä»¬åˆä¸€æ¬¡ä½¿ç”¨äº†æ•°æ®å·æ“ä½œï¼Œé‚£æ˜¯å› ä¸ºé€šå¸¸å®¹å™¨æ˜¯éšæ—¶åˆ›å»ºéšæ—¶åˆ é™¤çš„ï¼Œè€Œæ•°æ®åº“ä¸­çš„æ•°æ®å´æ˜¯éœ€è¦ä¿ç•™ä¸‹æ¥çš„ã€‚</p></blockquote><p>ä¸Šé¢çš„ä¸¤ä¸ªæ•°æ®å·æ“ä½œä¸€ä¸ªæ˜¯æ˜ å°„äº†MySQLé…ç½®æ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹ï¼Œä¸€ä¸ªæ˜¯æ˜ å°„äº†MySQLæ•°æ®æ‰€åœ¨çš„æ–‡ä»¶å¤¹ï¼Œè¿™ä¸¤ä¸ªæ•°æ®å·æ“ä½œéå¸¸é‡è¦ã€‚æˆ‘ä»¬å¯ä»¥å°†MySQLçš„é…ç½®æ–‡ä»¶æ”¾åœ¨<code>$PWD/mysql/conf</code>ç›®å½•ä¸‹ï¼Œé…ç½®æ–‡ä»¶çš„å…·ä½“å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs INI"><span class="hljs-section">[mysqld]</span><br><span class="hljs-attr">pid-file</span>=/var/run/mysqld/mysqld.pid<br><span class="hljs-attr">socket</span>=/var/run/mysqld/mysqld.sock<br><span class="hljs-attr">datadir</span>=/var/lib/mysql<br><span class="hljs-attr">log-error</span>=/var/log/mysql/error.log<br><span class="hljs-attr">server-id</span>=<span class="hljs-number">1</span><br><span class="hljs-attr">log-bin</span>=/var/log/mysql/mysql-bin.log<br><span class="hljs-attr">expire_logs_days</span>=<span class="hljs-number">30</span><br><span class="hljs-attr">max_binlog_size</span>=<span class="hljs-number">256</span>M<br><span class="hljs-attr">symbolic-links</span>=<span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><p>å¦‚æœå®‰è£…äº†MySQL 8.xç‰ˆæœ¬ï¼ˆç›®å‰çš„æœ€æ–°ç‰ˆæœ¬ï¼‰ï¼Œåœ¨ä½¿ç”¨å®¢æˆ·ç«¯å·¥å…·è¿æ¥æœåŠ¡å™¨æ—¶å¯èƒ½ä¼šé‡åˆ°<code>error 2059: Authentication plugin &#39;caching_sha2_password&#39; cannot be loaded</code>çš„é—®é¢˜ï¼Œè¿™æ˜¯å› ä¸ºMySQL 8.xé»˜è®¤ä½¿ç”¨äº†åä¸ºâ€œcaching_sha2_passwordâ€çš„æœºåˆ¶å¯¹ç”¨æˆ·å£ä»¤è¿›è¡Œäº†æ›´å¥½çš„ä¿æŠ¤ï¼Œä½†æ˜¯å¦‚æœå®¢æˆ·ç«¯å·¥å…·ä¸æ”¯æŒæ–°çš„è®¤è¯æ–¹å¼ï¼Œè¿æ¥å°±ä¼šå¤±è´¥ã€‚è§£å†³è¿™ä¸ªé—®é¢˜æœ‰ä¸¤ç§æ–¹å¼ï¼šä¸€æ˜¯å‡çº§å®¢æˆ·ç«¯å·¥å…·æ¥æ”¯æŒMySQL 8.xçš„è®¤è¯æ–¹å¼ï¼›äºŒæ˜¯è¿›å…¥å®¹å™¨ï¼Œä¿®æ”¹MySQLçš„ç”¨æˆ·å£ä»¤è®¤è¯æ–¹å¼ã€‚ä¸‹é¢æ˜¯å…·ä½“çš„æ­¥éª¤ï¼Œæˆ‘ä»¬å…ˆç”¨<code>docker exec</code>å‘½ä»¤è¿›å…¥å®¹å™¨çš„äº¤äº’å¼ç¯å¢ƒï¼Œå‡è®¾è¿è¡ŒMySQL 8.xçš„å®¹å™¨åå­—å«<code>mysql8x</code>ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker exec -it mysql8x /bin/bash<br></code></pre></td></tr></table></figure><p>è¿›å…¥å®¹å™¨çš„äº¤äº’å¼Shellä¹‹åï¼Œå¯ä»¥é¦–å…ˆåˆ©ç”¨MySQLçš„å®¢æˆ·ç«¯å·¥å…·è¿æ¥MySQLæœåŠ¡å™¨ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs Shell">mysql -u root -p<br>Enter password:<br>Your MySQL connection id is 16<br>Server version: 8.0.12 MySQL Community Server - GPL<br>Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.<br>Oracle is a registered trademark of Oracle Corporation and/or its<br>affiliates. Other names may be trademarks of their respective<br>owners.<br>Type &#x27;help;&#x27; or &#x27;\h&#x27; for help. Type &#x27;\c&#x27; to clear the current input statement.<br><span class="hljs-meta prompt_">mysql&gt;</span><br></code></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥é€šè¿‡SQLæ¥ä¿®æ”¹ç”¨æˆ·å£ä»¤å°±å¯ä»¥äº†ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs SQL"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">user</span> <span class="hljs-string">&#x27;root&#x27;</span>@<span class="hljs-string">&#x27;%&#x27;</span> identified <span class="hljs-keyword">with</span> mysql_native_password <span class="hljs-keyword">by</span> <span class="hljs-string">&#x27;123456&#x27;</span> password expire never;<br></code></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œå¦‚æœæ„¿æ„ä½ ä¹Ÿå¯ä»¥æŸ¥çœ‹ä¸€ä¸‹ç”¨æˆ·è¡¨æ£€æŸ¥æ˜¯å¦ä¿®æ”¹æˆåŠŸã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs SQL">use mysql;<br><span class="hljs-keyword">select</span> <span class="hljs-keyword">user</span>, host, plugin, authentication_string <span class="hljs-keyword">from</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">where</span> <span class="hljs-keyword">user</span><span class="hljs-operator">=</span><span class="hljs-string">&#x27;root&#x27;</span>;<br><span class="hljs-operator">+</span><span class="hljs-comment">------+-----------+-----------------------+-------------------------------------------+</span><br><span class="hljs-operator">|</span> <span class="hljs-keyword">user</span> <span class="hljs-operator">|</span> host      <span class="hljs-operator">|</span> plugin                <span class="hljs-operator">|</span> authentication_string                     <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------+-----------+-----------------------+-------------------------------------------+</span><br><span class="hljs-operator">|</span> root <span class="hljs-operator">|</span> <span class="hljs-operator">%</span>         <span class="hljs-operator">|</span> mysql_native_password <span class="hljs-operator">|</span> <span class="hljs-operator">*</span><span class="hljs-number">6</span>BB4837EB74329105EE4568DDA7DC67ED2CA2AD9 <span class="hljs-operator">|</span><br><span class="hljs-operator">|</span> root <span class="hljs-operator">|</span> localhost <span class="hljs-operator">|</span> mysql_native_password <span class="hljs-operator">|</span> <span class="hljs-operator">*</span><span class="hljs-number">6</span>BB4837EB74329105EE4568DDA7DC67ED2CA2AD9 <span class="hljs-operator">|</span><br><span class="hljs-operator">+</span><span class="hljs-comment">------+-----------+-----------------------+-------------------------------------------+</span><br><span class="hljs-number">2</span> <span class="hljs-keyword">rows</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.00</span> sec)<br></code></pre></td></tr></table></figure><p>åœ¨å®Œæˆä¸Šé¢çš„æ­¥éª¤åï¼Œç°åœ¨å³ä¾¿ä¸æ›´æ–°å®¢æˆ·ç«¯å·¥å…·ä¹Ÿå¯ä»¥è¿æ¥MySQL 8.xäº†ã€‚</p><h4 id="è¿è¡ŒRedis"><a href="#è¿è¡ŒRedis" class="headerlink" title="è¿è¡ŒRedis"></a>è¿è¡ŒRedis</h4><p>æ¥ä¸‹æ¥æˆ‘ä»¬è¯•ä¸€è¯•è¿è¡Œå¤šä¸ªå®¹å™¨å¹¶è®©å¤šä¸ªå®¹å™¨ä¹‹é—´é€šè¿‡ç½‘ç»œé€šä¿¡ã€‚æˆ‘ä»¬åˆ›å»º4ä¸ªRediså®¹å™¨æ¥å®ç°ä¸€ä¸»ä¸‰ä»çš„ä¸»ä»å¤åˆ¶ç»“æ„ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker run -d -p 6379:6379 --name redis-master redis<br>docker run -d -p 6380:6379 --name redis-slave-1 --link redis-master:redis-master redis redis-server --replicaof redis-master 6379<br>docker run -d -p 6381:6379 --name redis-slave-2 --link redis-master:redis-master redis redis-server --replicaof redis-master 6379<br>docker run -d -p 6382:6379 --name redis-slave-3 --link redis-master:redis-master redis redis-server --replicaof redis-master 6379<br></code></pre></td></tr></table></figure><p>ä¸Šé¢çš„å‘½ä»¤ä¸­ï¼Œ<code>--link</code>å‚æ•°ç”¨äºç»™å®¹å™¨åˆ›å»ºç½‘ç»œåˆ«åï¼Œå› ä¸ºä¸‰å°ä»æœºï¼ˆslaveï¼‰éœ€è¦é€šè¿‡ç½‘ç»œè¿æ¥è‡ªå·±çš„ä¸»æœºï¼ˆmasterï¼‰ã€‚è™½ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>docker inspect --format &#39;&#123;&#123; .NetworkSettings.IPAddress &#125;&#125;&#39; &lt;container-ID&gt;</code>å‘½ä»¤æ¥æŸ¥çœ‹åˆ°å®¹å™¨çš„IPåœ°å€ï¼Œä½†æ˜¯ç”±äºå®¹å™¨çš„å³è£…å³ç”¨æ€§ï¼Œå®¹å™¨çš„IPåœ°å€æœ‰å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå¦‚æœç›´æ¥ä½¿ç”¨IPåœ°å€ï¼Œåœ¨å®¹å™¨é‡å¯åå°±å¯èƒ½ä¼šå› ä¸ºIPåœ°å€çš„å˜åŒ–å¯¼è‡´ä»æœºæ— æ³•è¿æ¥åˆ°ä¸»æœºã€‚ä½¿ç”¨<code>--link</code>å‚æ•°åˆ›å»ºç½‘ç»œåˆ«åå°±æ˜¯ä¸ºäº†åœ¨å¯åŠ¨RedisæœåŠ¡å™¨æ—¶åœ¨<code>redis-server</code>åé¢çš„<code>--replicaof</code>å‚æ•°åä½¿ç”¨è¿™ä¸ªåˆ«åè€Œä¸æ˜¯IPåœ°å€ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬è¿›å…¥åä¸º<code>redis-master</code>çš„å®¹å™¨ï¼Œçœ‹çœ‹ä¸»ä»å¤åˆ¶çš„é…ç½®æ˜¯å¦æˆåŠŸã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker exec -it redis-master /bin/bash<br></code></pre></td></tr></table></figure><p>é€šè¿‡<code>redis-cli</code>å¯åŠ¨å‘½ä»¤è¡Œå·¥å…·ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs Shell">redis-cli<br>127.0.0.1:6379&gt; info replication<br><span class="hljs-meta prompt_"># </span><span class="language-bash">Replication</span><br>role:master<br>connected_slaves:3<br>slave0:ip=172.17.0.4,port=6379,state=online,offset=1988,lag=0<br>slave1:ip=172.17.0.5,port=6379,state=online,offset=1988,lag=1<br>slave2:ip=172.17.0.6,port=6379,state=online,offset=1988,lag=1<br>master_replid:94703cfa03c3ddc7decc74ca5b8dd13cb8b113ea<br>master_replid2:0000000000000000000000000000000000000000<br>master_repl_offset:1988<br>second_repl_offset:-1<br>repl_backlog_active:1<br>repl_backlog_size:1048576<br>repl_backlog_first_byte_offset:1<br>repl_backlog_histlen:1988<br></code></pre></td></tr></table></figure><h4 id="è¿è¡ŒGitLab"><a href="#è¿è¡ŒGitLab" class="headerlink" title="è¿è¡ŒGitLab"></a>è¿è¡ŒGitLab</h4><p>GitLabæ˜¯ç”±GitLab Inc.å¼€å‘çš„Gitä»“åº“ç®¡ç†å·¥å…·ï¼Œå…·æœ‰wikiã€é—®é¢˜è·Ÿè¸ªã€æŒç»­é›†æˆç­‰ä¸€ç³»åˆ—çš„åŠŸèƒ½ï¼Œåˆ†ä¸ºç¤¾åŒºç‰ˆå’Œä¼ä¸šç‰ˆã€‚é€šè¿‡Dockeræä¾›çš„è™šæ‹ŸåŒ–å®¹å™¨ï¼Œæˆ‘ä»¬å¯ä»¥å®‰è£…ç¤¾åŒºç‰ˆçš„Dockerã€‚å› ä¸ºGitLabéœ€è¦ä½¿ç”¨SSHåè®®è¿›è¡Œå®‰å…¨è¿æ¥ï¼Œæˆ‘ä»¬è¦æš´éœ²å®¹å™¨çš„22ç«¯å£ï¼Œæ‰€ä»¥å¯ä»¥å…ˆå°†å®¿ä¸»æœºSSHè¿æ¥çš„22ç«¯å£ä¿®æ”¹ä¸ºå…¶ä»–ç«¯å£ï¼ˆå¦‚ï¼š12345ï¼‰ï¼Œç„¶åå†è¿›è¡Œåç»­çš„æ“ä½œã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">vim /etc/ssh/sshd_config<br></code></pre></td></tr></table></figure><p>å°†å…¶ä¸­å®šä¹‰ç«¯å£çš„é‚£è¡Œä»£ç å»æ‰æ³¨é‡Šå¹¶å°†ç«¯å£ä¿®æ”¹ä¸º12345ã€‚</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Port</span> <span class="hljs-number">12345</span><br></code></pre></td></tr></table></figure><p>é‡æ–°å¯åŠ¨<code>sshd</code>æœåŠ¡ã€‚ </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">systemctl restart sshd<br></code></pre></td></tr></table></figure><blockquote><p><strong>æç¤º</strong>ï¼šä¿®æ”¹ç«¯å£ååº”è¯¥ç¡®ä¿é˜²ç«å¢™ä¸Šä¹Ÿå¼€å¯å¯¹åº”çš„ç«¯å£ï¼Œå¦åˆ™æ— æ³•ä½¿ç”¨SSHè¿æ¥åˆ°LinuxæœåŠ¡å™¨ã€‚</p></blockquote><p>åˆ›å»ºéœ€è¦ç”¨äºæ•°æ®å·æ˜ å°„æ“ä½œçš„æ–‡ä»¶å¤¹ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">mkdir -p /root/gitlab/&#123;config,logs,data&#125;<br></code></pre></td></tr></table></figure><p>åŸºäº<code>gitlab/gitlab-ce</code>é•œåƒåˆ›å»ºå®¹å™¨ï¼Œå¹¶æš´éœ²80ç«¯å£ï¼ˆHTTPè¿æ¥ï¼‰å’Œ22ç«¯å£ï¼ˆSSHè¿æ¥ï¼‰ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker run -d -p 80:80 -p 22:22 --name gitlab -v /root/gitlab/config:/etc/gitlab -v /root/gitlab/logs:/var/log/gitlab -v /root/gitlab/data:/var/opt/gitlab gitlab/gitlab-ce<br></code></pre></td></tr></table></figure><blockquote><p>è¯´æ˜ï¼šGitLabçš„å¯åŠ¨æ¯”è¾ƒç¼“æ…¢ï¼Œåˆ›å»ºå¥½å®¹å™¨åå¯èƒ½éœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´æ‰èƒ½é€šè¿‡æµè§ˆå™¨æ¥è¿›è¡Œè®¿é—®ã€‚</p></blockquote><p>é¦–æ¬¡è¿›å…¥GitLabè®¿é—®ç•Œé¢ä¼šæç¤ºæˆ‘ä»¬ä¿®æ”¹ç®¡ç†å‘˜å¯†ç ï¼Œè®¾ç½®å¥½ç®¡ç†å‘˜å¯†ç åå°±å¯ä»¥åœ¨ç™»å½•ç•Œé¢è¾“å…¥ç”¨æˆ·å<code>root</code>å’Œåˆšæ‰è®¾ç½®çš„å¯†ç ç™»å½•åˆ°ç®¡ç†å‘˜æ§åˆ¶å°ï¼Œåœ¨ä½¿ç”¨ä¸Šè¿˜æ˜¯éå¸¸ç®€å•å’Œäººæ€§åŒ–çš„ã€‚</p><h3 id="æ„å»ºé•œåƒ"><a href="#æ„å»ºé•œåƒ" class="headerlink" title="æ„å»ºé•œåƒ"></a>æ„å»ºé•œåƒ</h3><p>é€šè¿‡ä¸Šé¢çš„è®²è§£ï¼Œæˆ‘ä»¬å·²ç»æŒæ¡äº†å¦‚ä½•é€šè¿‡å®˜æ–¹æä¾›çš„é•œåƒæ¥åˆ›å»ºå®¹å™¨ã€‚å½“ç„¶å¦‚æœæ„¿æ„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨é…ç½®å¥½çš„å®¹å™¨æ¥ç”Ÿæˆé•œåƒã€‚ç®€è€Œè¨€ä¹‹ï¼Œ<strong>Dockeré•œåƒæ˜¯ç”±æ–‡ä»¶ç³»ç»Ÿå åŠ è€Œæˆçš„ï¼Œç³»ç»Ÿçš„æœ€åº•å±‚æ˜¯bootfsï¼Œç›¸å½“äºå°±æ˜¯Linuxå†…æ ¸çš„å¼•å¯¼æ–‡ä»¶ç³»ç»Ÿï¼›æ¥ä¸‹æ¥ç¬¬äºŒå±‚æ˜¯rootfsï¼Œè¿™ä¸€å±‚å¯ä»¥æ˜¯ä¸€ç§æˆ–å¤šç§æ“ä½œç³»ç»Ÿï¼ˆå¦‚Debianæˆ–Ubuntuæ–‡ä»¶ç³»ç»Ÿï¼‰ï¼ŒDockerä¸­çš„rootfsæ˜¯åªè¯»çŠ¶æ€çš„ï¼›Dockeråˆ©ç”¨è”åˆæŒ‚è½½æŠ€æœ¯å°†å„å±‚æ–‡ä»¶ç³»ç»Ÿå åŠ åˆ°ä¸€èµ·ï¼Œæœ€ç»ˆçš„æ–‡ä»¶ç³»ç»Ÿä¼šåŒ…å«æœ‰åº•å±‚çš„æ–‡ä»¶å’Œç›®å½•ï¼Œè¿™æ ·çš„æ–‡ä»¶ç³»ç»Ÿå°±æ˜¯ä¸€ä¸ªé•œåƒ</strong>ã€‚</p><p>ä¹‹å‰æˆ‘ä»¬è®²è¿‡äº†å¦‚ä½•æŸ¥æ‰¾ã€åˆ—å‡ºé•œåƒå’Œæ‹‰å–ï¼ˆä¸‹è½½ï¼‰é•œåƒï¼Œæ¥ä¸‹æ¥çœ‹çœ‹æ„å»ºé•œåƒçš„ä¸¤ç§æ–¹å¼ï¼š</p><ol><li>ä½¿ç”¨<code>docker commit</code>å‘½ä»¤ã€‚ï¼ˆä¸æ¨èï¼‰</li><li>ä½¿ç”¨<code>docker build</code>å‘½ä»¤å’ŒDockerfileæ–‡ä»¶ã€‚</li></ol><h4 id="ä½¿ç”¨commitå‘½ä»¤æ„å»ºé•œåƒ"><a href="#ä½¿ç”¨commitå‘½ä»¤æ„å»ºé•œåƒ" class="headerlink" title="ä½¿ç”¨commitå‘½ä»¤æ„å»ºé•œåƒ"></a>ä½¿ç”¨commitå‘½ä»¤æ„å»ºé•œåƒ</h4><p>ä¸ºäº†æ¼”ç¤ºå¦‚ä½•æ„å»ºé•œåƒï¼Œæˆ‘ä»¬å…ˆä½¿ç”¨Ubuntué•œåƒæ¥å®šåˆ¶ä¸€ä¸ªå®¹å™¨ï¼Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker run --name myubuntu -it ubuntu /bin/bash<br></code></pre></td></tr></table></figure><p>åœ¨å®¹å™¨ä¸­æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤æ¥å®‰è£…ApacheæœåŠ¡å™¨å¹¶é€€å‡ºå®¹å™¨ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs Shell">apt -y upgrade<br>apt -y install apache2<br>exit<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬å°†è¿™ä¸ªå®¹å™¨ä½œä¸ºä¸€ä¸ªå®šåˆ¶çš„WebæœåŠ¡å™¨ä¿å­˜èµ·æ¥ï¼Œå½“éœ€è¦è¿™æ ·ä¸€å°WebæœåŠ¡å™¨çš„æ—¶å€™ï¼Œå°±æ²¡æœ‰å¿…è¦é‡æ–°åˆ›å»ºå®¹å™¨å¹¶å®‰è£…Apacheäº†ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹å®¹å™¨çš„IDã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker container ls -a<br></code></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css">docker <span class="hljs-attribute">container</span> ls -<span class="hljs-selector-tag">a</span><br><span class="hljs-attribute">CONTAINER</span> ID    <span class="hljs-selector-tag">IMAGE</span>    COMMAND        CREATED        STATUS        PORTS    NAMES<br><span class="hljs-number">014</span>bdb321612    ubuntu   &quot;/bin/bash&quot;    <span class="hljs-number">5</span> minutes ago  Exited (<span class="hljs-number">0</span>)             myubuntu<br></code></pre></td></tr></table></figure><p>æäº¤å®šåˆ¶çš„å®¹å™¨ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker commit 014bdb321612 jackfrued/mywebserver<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹é•œåƒæ–‡ä»¶ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker images<br></code></pre></td></tr></table></figure><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">REPOSITORY</span>              TAG       IMAGE ID        CREATED             SIZE<br><span class="hljs-attribute">jackfrued</span>/mywebserver   latest    <span class="hljs-number">795</span>b294d265a    <span class="hljs-number">14</span> seconds ago      <span class="hljs-number">189</span> MB<br></code></pre></td></tr></table></figure><p>ç”Ÿæˆé•œåƒæ–‡ä»¶ä»¥åï¼Œåé¢å°±å¯ä»¥åˆ©ç”¨åˆšæ‰åˆ›å»ºçš„é•œåƒæ–‡ä»¶æ¥åˆ›å»ºæ–°çš„å®¹å™¨ã€‚</p><h4 id="ä½¿ç”¨Dockerfileæ„å»ºé•œåƒ"><a href="#ä½¿ç”¨Dockerfileæ„å»ºé•œåƒ" class="headerlink" title="ä½¿ç”¨Dockerfileæ„å»ºé•œåƒ"></a>ä½¿ç”¨Dockerfileæ„å»ºé•œåƒ</h4><p>Dockerfileä½¿ç”¨DSLï¼ˆDomain Specific Languageï¼‰æ¥æ„å»ºä¸€ä¸ªDockeré•œåƒï¼Œåªè¦ç¼–è¾‘å¥½äº†Dockerfileæ–‡ä»¶ï¼Œå°±å¯ä»¥ä½¿ç”¨<code>docker build</code>å‘½ä»¤æ¥æ„å»ºä¸€ä¸ªæ–°çš„é•œåƒã€‚</p><p>æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªåä¸ºmyappçš„æ–‡ä»¶å¤¹æ¥ä¿å­˜é¡¹ç›®ä»£ç å’ŒDockerfileçš„æ–‡ä»¶ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs Shell">[ECS-root temp]# tree myapp<br>myapp<br>â”œâ”€â”€ api<br>â”‚   â”œâ”€â”€ app.py<br>â”‚   â”œâ”€â”€ requirements.txt<br>â”‚   â””â”€â”€ start.sh<br>â””â”€â”€ Dockerfile<br></code></pre></td></tr></table></figure><p>å…¶ä¸­apiæ˜¯Flaské¡¹ç›®çš„æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­åŒ…æ‹¬äº†é¡¹ç›®ä»£ç ã€ä¾èµ–é¡¹ä»¥åŠå¯åŠ¨è„šæœ¬ç­‰æ–‡ä»¶ï¼Œå…·ä½“å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><code>app.py</code>æ–‡ä»¶ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask<br><span class="hljs-keyword">from</span> flask_restful <span class="hljs-keyword">import</span> Resource, Api<br><span class="hljs-keyword">from</span> flask_cors <span class="hljs-keyword">import</span> CORS<br><br>app = Flask(__name__)<br>CORS(app, resources=&#123;<span class="hljs-string">r&#x27;/api/*&#x27;</span>: &#123;<span class="hljs-string">&#x27;origins&#x27;</span>: <span class="hljs-string">&#x27;*&#x27;</span>&#125;&#125;)<br>api = Api(app)<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Product</span>(<span class="hljs-title class_ inherited__">Resource</span>):<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">self</span>):<br>        products = [<span class="hljs-string">&#x27;Ice Cream&#x27;</span>, <span class="hljs-string">&#x27;Chocolate&#x27;</span>, <span class="hljs-string">&#x27;Coca Cola&#x27;</span>, <span class="hljs-string">&#x27;Hamburger&#x27;</span>]<br>        <span class="hljs-keyword">return</span> &#123;<span class="hljs-string">&#x27;products&#x27;</span>: products&#125;<br><br><br>api.add_resource(Product, <span class="hljs-string">&#x27;/api/products&#x27;</span>)<br></code></pre></td></tr></table></figure><p><code>requirements.txt</code>æ–‡ä»¶ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs INI">flask<br>flask-restful<br>flask-cors<br>gunicorn<br></code></pre></td></tr></table></figure><p><code>start.sh</code>æ–‡ä»¶ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs Shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br>exec gunicorn -w 4 -b 0.0.0.0:8000 app:app<br></code></pre></td></tr></table></figure><blockquote><p><strong>æç¤º</strong>ï¼šéœ€è¦ç»™start.shæ–‡ä»¶ä»¥æ‰§è¡Œæƒé™ï¼Œå¯ä»¥ä½¿ç”¨<code>chmod 755 start.sh</code>å‘½ä»¤æ¥åšåˆ°ã€‚</p></blockquote><p>Dockerfileæ–‡ä»¶ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs Dockerfile"><span class="hljs-comment"># æŒ‡å®šåŸºç¡€é•œåƒ</span><br><span class="hljs-keyword">FROM</span> python:<span class="hljs-number">3.7</span><br><span class="hljs-comment"># æŒ‡å®šé•œåƒçš„ç»´æŠ¤è€…</span><br><span class="hljs-keyword">MAINTAINER</span> jackfrued <span class="hljs-string">&quot;jackfrued@126.com&quot;</span><br><span class="hljs-comment"># å°†æŒ‡å®šæ–‡ä»¶æ·»åŠ åˆ°å®¹å™¨ä¸­æŒ‡å®šçš„ä½ç½®</span><br><span class="hljs-keyword">ADD</span><span class="language-bash"> api/* /root/api/</span><br><span class="hljs-comment"># è®¾ç½®å·¥ä½œç›®å½•</span><br><span class="hljs-keyword">WORKDIR</span><span class="language-bash"> /root/api</span><br><span class="hljs-comment"># æ‰§è¡Œå‘½ä»¤(å®‰è£…Flaské¡¹ç›®çš„ä¾èµ–é¡¹)</span><br><span class="hljs-keyword">RUN</span><span class="language-bash"> pip install -r requirements.txt -i https://pypi.doubanio.com/simple/</span><br><span class="hljs-comment"># å®¹å™¨å¯åŠ¨æ—¶è¦æ‰§è¡Œçš„å‘½ä»¤</span><br><span class="hljs-keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="hljs-string">&quot;./start.sh&quot;</span>]</span><br><span class="hljs-comment"># æš´éœ²ç«¯å£</span><br><span class="hljs-keyword">EXPOSE</span> <span class="hljs-number">8000</span><br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬æ¥è§£é‡Šä¸€ä¸‹ä¸Šé¢çš„Dockerfileæ–‡ä»¶ã€‚Dockerfileæ–‡ä»¶é€šè¿‡ç‰¹æ®Šçš„æŒ‡ä»¤æ¥æŒ‡å®šåŸºç¡€é•œåƒï¼ˆFROMæŒ‡ä»¤ï¼‰ã€åˆ›å»ºå®¹å™¨åéœ€è¦æŒ‡å®šçš„å‘½ä»¤ï¼ˆRUNæŒ‡ä»¤ï¼‰ä»¥åŠéœ€è¦æš´éœ²çš„ç«¯å£ï¼ˆEXPOSEï¼‰ç­‰ä¿¡æ¯ã€‚æˆ‘ä»¬ç¨åä¼šä¸“é—¨ä¸ºå¤§å®¶ä»‹ç»è¿™äº›Dockfileä¸­çš„æŒ‡ä»¤ã€‚</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>docker build</code>å‘½ä»¤æ¥åˆ›å»ºé•œåƒï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker build -t &quot;jackfrued/myapp&quot; .<br></code></pre></td></tr></table></figure><blockquote><p>æç¤ºï¼šä¸Šé¢çš„å‘½ä»¤æœ€åé¢çš„<code>.</code> åƒä¸‡ä¸è¦æ¼æ‰äº†å“¦ï¼Œå®ƒè¡¨ç¤ºä»å½“å‰è·¯å¾„ä¸‹å¯»æ‰¾Dockerfileã€‚</p></blockquote><p>é€šè¿‡ä¸‹é¢çš„å‘½ä»¤å¯ä»¥æŸ¥çœ‹åˆ›å»ºå¥½çš„é•œåƒã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker images<br></code></pre></td></tr></table></figure><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">REPOSITORY</span>                   TAG                 IMAGE ID            CREATED             SIZE<br><span class="hljs-attribute">jackfrued</span>/myapp              latest              <span class="hljs-number">6</span>d6f026a7896        <span class="hljs-number">5</span> seconds ago       <span class="hljs-number">930</span> MB<br></code></pre></td></tr></table></figure><p>å¦‚æœæƒ³çŸ¥é“é•œåƒæ–‡ä»¶æ˜¯å¦‚ä½•åˆ›å»ºå‡ºæ¥çš„ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker history jackfrued/myapp<br></code></pre></td></tr></table></figure><figure class="highlight leaf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs leaf">IMAGE               CREATED             CREATED BY                                      SIZE                COMMENT<br>6d6f026a7896        31 seconds ago      /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  EXPOSE 8000/tcp              0 B                 <br>3f7739173a79        31 seconds ago      /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  ENTRYPOINT [&quot;./start.sh&quot;]    0 B                 <br>321e6bf09bf1        32 seconds ago      /bin/sh -c pip install -r requirements.txt...   13 MB               <br>2f9bf2c89ac7        37 seconds ago      /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span> WORKDIR /root/api             0 B                 <br>86119afbe1f8        37 seconds ago      /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span> ADD multi:4b76f9c9dfaee8...   870 B               <br>08d465e90d4d        3 hours ago         /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  MAINTAINER jackfrued &quot;j...   0 B                 <br>fbf9f709ca9f        12 days ago         /bin/sh -c <span class="hljs-punctuation">#</span><span class="hljs-params">(<span class="hljs-variable">nop</span>)</span>  CMD [&quot;python3&quot;]              0 B <br></code></pre></td></tr></table></figure><p>ä½¿ç”¨è¯¥é•œåƒæ¥åˆ›å»ºå®¹å™¨è¿è¡ŒWebæœåŠ¡å™¨ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker run -d -p 8000:8000 --name myapp jackfrued/myapp<br></code></pre></td></tr></table></figure><p>å¦‚æœå¸Œæœ›å°†ä¸Šé¢åˆ›å»ºçš„é•œåƒæ–‡ä»¶æ”¾åˆ°dockerhubä»“åº“ä¸­ï¼Œå¯ä»¥æŒ‰ç…§å¦‚ä¸‹æ‰€ç¤ºçš„æ­¥éª¤è¿›è¡Œæ“ä½œã€‚</p><p>é€šè¿‡ä¸‹é¢çš„å‘½ä»¤ç™»å½•åˆ°dockerhubã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker login<br></code></pre></td></tr></table></figure><p>è¾“å…¥ç”¨æˆ·åå’Œå£ä»¤è¿›è¡Œç™»å½•ã€‚</p><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vbnet">Login <span class="hljs-keyword">with</span> your Docker ID <span class="hljs-keyword">to</span> push <span class="hljs-built_in">and</span> pull images <span class="hljs-keyword">from</span> Docker Hub. <span class="hljs-keyword">If</span> you don<span class="hljs-comment">&#x27;t have a Docker ID, head over to https://hub.docker.com to create one.</span><br><span class="hljs-symbol">Username:</span> jackfrued<br><span class="hljs-symbol">Password:</span> <br>Login Succeeded<br></code></pre></td></tr></table></figure><p>é€šè¿‡ä¸‹é¢çš„å‘½ä»¤å°†é•œåƒæ¨åˆ°ä»“åº“ä¸­ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker push jackfrued/webserver<br></code></pre></td></tr></table></figure><p><img src="/./res/dockerhub-repo.png"></p><h4 id="DockerfileæŒ‡ä»¤"><a href="#DockerfileæŒ‡ä»¤" class="headerlink" title="DockerfileæŒ‡ä»¤"></a>DockerfileæŒ‡ä»¤</h4><p>æƒ³äº†è§£Dockerfileçš„æŒ‡ä»¤å¯ä»¥æŸ¥çœ‹å®˜æ–¹æä¾›çš„<a href="https://docs.docker.com/engine/reference/builder/">å‚è€ƒæ‰‹å†Œ</a>ï¼Œä¸‹é¢æˆ‘ä»¬ä¸ºå¤§å®¶ä»‹ç»ä¸€äº›å¸¸ç”¨çš„æŒ‡ä»¤ã€‚</p><ol><li><p><strong>FROM</strong>ï¼šè®¾ç½®åŸºç¡€é•œåƒï¼Œå¿…é¡»æ˜¯Dockerfileä¸­çš„ç¬¬ä¸€æ¡æŒ‡ä»¤ã€‚</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Dockerfile"><span class="hljs-keyword">FROM</span> &lt;é•œåƒå&gt; [AS &lt;åˆ«å&gt;]<br></code></pre></td></tr></table></figure><p>æˆ–</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Dockerfile"><span class="hljs-keyword">FROM</span> &lt;é•œåƒå&gt;[:&lt;æ ‡ç­¾&gt;] [AS &lt;åˆ«å&gt;]<br></code></pre></td></tr></table></figure></li><li><p><strong>RUN</strong>ï¼šæŒ‡å®šæ„å»ºé•œåƒæ—¶è¦æ‰§è¡Œçš„å‘½ä»¤ã€‚</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Dockerfile"><span class="hljs-keyword">RUN</span><span class="language-bash"> &lt;å‘½ä»¤&gt; [å‚æ•°1], [å‚æ•°2], ... </span><br></code></pre></td></tr></table></figure><p>æˆ–</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Dockerfile"><span class="hljs-keyword">RUN</span><span class="language-bash"> [<span class="hljs-string">&quot;å¯æ‰§è¡Œæ–‡ä»¶&quot;</span>, <span class="hljs-string">&quot;å‚æ•°1&quot;</span>, <span class="hljs-string">&quot;å‚æ•°2&quot;</span>, ...]</span><br></code></pre></td></tr></table></figure></li><li><p><strong>CMD</strong>ï¼šæŒ‡å®šæ„å»ºé•œåƒåè¦æ‰§è¡Œçš„å‘½ä»¤ã€‚</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Dockerfile"><span class="hljs-keyword">CMD</span><span class="language-bash"> &lt;å‘½ä»¤&gt; [å‚æ•°1], [å‚æ•°2], ...</span><br></code></pre></td></tr></table></figure><p>æˆ–</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Dockerfile"><span class="hljs-keyword">CMD</span><span class="language-bash"> [<span class="hljs-string">&quot;å¯æ‰§è¡Œæ–‡ä»¶&quot;</span>, <span class="hljs-string">&quot;å‚æ•°1&quot;</span>, <span class="hljs-string">&quot;å‚æ•°2&quot;</span>, ...]</span><br></code></pre></td></tr></table></figure><blockquote><p>è¯´æ˜ï¼šDockerä¸åŒäºè™šæ‹Ÿæœºï¼Œå®¹å™¨æœ¬èº«å°±æ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œå®¹å™¨ä¸­çš„åº”ç”¨åº”è¯¥ä½äºå‰å°è¿è¡Œã€‚CMDå‘½ä»¤ç›¸å½“äºå°±æ˜¯ç”¨æ¥æŒ‡å®šå®¹å™¨ä¸»è¿›ç¨‹ï¼ˆåˆ›å»ºå®¹å™¨åè¦åœ¨å‰å°æ‰§è¡Œçš„ç¨‹åºï¼‰çš„ï¼Œå¦‚æœä¸»è¿›ç¨‹ç»“æŸäº†ï¼Œå®¹å™¨ä¹Ÿå°±åœæ­¢è¿è¡Œäº†ã€‚æ‰€ä»¥åœ¨å®¹å™¨ä¸­å¯åŠ¨Nginxä¸èƒ½ä½¿ç”¨<code>service nginx start</code>æˆ–æ˜¯<code>systemctl start nginx</code>è€Œæ˜¯è¦é€šè¿‡<code>CMD [&quot;nginx&quot;, &quot;-g&quot;, &quot;daemon off;&quot;]</code>è®©å®ƒåœ¨å‰å°è¿è¡Œã€‚</p></blockquote></li><li><p><strong>ENTRYPOINT</strong>ï¼šå’ŒCMDç±»ä¼¼ï¼Œä¹Ÿå¯ä»¥æ‰§è¡Œå‘½ä»¤ï¼Œä½†<code>docker run</code>å‘½ä»¤è¡Œä¸­æŒ‡å®šçš„ä»»ä½•å‚æ•°éƒ½ä¼šè¢«å½“åšå‚æ•°å†æ¬¡ä¼ ç»™ENTRYPOINTæŒ‡ä»¤ä¸­çš„å‘½ä»¤ï¼Œè¿™å°±ä½¿å¾—æˆ‘ä»¬å¯ä»¥æ„å»ºä¸€ä¸ªé•œåƒï¼Œå®ƒæ—¢å¯ä»¥è¿è¡Œä¸€ä¸ªé»˜è®¤çš„å‘½ä»¤ï¼Œä¹Ÿæ”¯æŒé€šè¿‡<code>docker run</code>å‘½ä»¤è¡Œä¸ºè¯¥å‘½ä»¤æŒ‡å®šå¯è¦†ç›–çš„å‚æ•°é€‰é¡¹ã€‚</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Dockerfile"><span class="hljs-keyword">ENTRYPOINT</span><span class="language-bash"> &lt;å‘½ä»¤&gt; [å‚æ•°1], [å‚æ•°2], ...</span><br></code></pre></td></tr></table></figure><p>æˆ–</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Dockerfile"><span class="hljs-keyword">ENTRYPOINT</span><span class="language-bash"> [<span class="hljs-string">&quot;å¯æ‰§è¡Œæ–‡ä»¶&quot;</span>, <span class="hljs-string">&quot;å‚æ•°1&quot;</span>, <span class="hljs-string">&quot;å‚æ•°2&quot;</span>, ...]</span><br></code></pre></td></tr></table></figure></li><li><p><strong>WORKDIR</strong>ï¼šåœ¨é€šè¿‡é•œåƒåˆ›å»ºæ–°å®¹å™¨æ—¶ï¼Œåœ¨å®¹å™¨å†…éƒ¨åˆ›å»ºä¸€ä¸ªå·¥ä½œç›®å½•ï¼ŒENTRYPOINTå’ŒCMDæŒ‡å®šçš„ç¨‹åºä¼šåœ¨è¿™ä¸ªç›®å½•ä¸‹æ‰§è¡Œã€‚åœ¨ä½¿ç”¨<code>docker run</code>å‘½ä»¤æ—¶å¯ä»¥é€šè¿‡<code>-w</code>å‚æ•°æ¥è¦†ç›–ç”±WORKDIRæŒ‡å®šçš„å·¥ä½œç›®å½•ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Dockerfile"><span class="hljs-keyword">WORKDIR</span><span class="language-bash"> /opt/webapp</span><br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker run -w /usr/share/webapp ...<br></code></pre></td></tr></table></figure></li><li><p><strong>ENV</strong>ï¼šåœ¨åˆ›å»ºé•œåƒæ—¶è®¾ç½®ç¯å¢ƒå˜é‡ã€‚åœ¨ä½¿ç”¨<code>docker run</code>å‘½ä»¤æ—¶ï¼Œå¯ä»¥é€šè¿‡<code>-e</code>å‚æ•°æ¥ä¿®æ”¹ç¯å¢ƒå˜é‡çš„è®¾ç½®ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Dockerfile"><span class="hljs-keyword">ENV</span> DEFAULT_PORT=<span class="hljs-number">8080</span><br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker run -e &quot;DEFAULT_PORT=8000&quot; ...<br></code></pre></td></tr></table></figure></li><li><p><strong>USER</strong>ï¼šæŒ‡å®šé•œåƒä¼šä»¥ä»€ä¹ˆç”¨æˆ·èº«ä»½å»è¿è¡Œã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Dockerfile"><span class="hljs-keyword">USER</span> nginx<br></code></pre></td></tr></table></figure></li><li><p><strong>VOLUME</strong>ï¼šåœ¨åˆ›å»ºå®¹å™¨æ—¶æ·»åŠ ä¸€ä¸ªæ•°æ®å·çš„æŒ‚è½½ç‚¹ã€‚é€šè¿‡æ•°æ®å·æ“ä½œå¯ä»¥å®ç°å®¹å™¨é—´æ•°æ®çš„å…±äº«å’Œé‡ç”¨ï¼Œå¯¹å·æ‰€ä½œçš„ä¿®æ”¹å¯ä»¥é©¬ä¸Šç”Ÿæ•ˆè€Œä¸éœ€è¦é‡æ–°å¯åŠ¨å®¹å™¨ï¼Œæˆ‘ä»¬ä¹‹å‰åˆ›å»ºå®¹å™¨æ—¶ä½¿ç”¨<code>--volume</code>å‚æ•°å°±æ˜¯ä¸ºäº†å®ç°æ•°æ®å·çš„æ˜ å°„æ“ä½œã€‚</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Dockerfile"><span class="hljs-keyword">VOLUME</span><span class="language-bash"> [<span class="hljs-string">&quot;/è·¯å¾„1&quot;</span>, <span class="hljs-string">&quot;/è·¯å¾„2/å­è·¯å¾„2.1/&quot;</span>, ...]</span><br></code></pre></td></tr></table></figure></li><li><p><strong>ADD</strong>ï¼šå°†æ„å»ºç›®å½•ä¸‹çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹å¤åˆ¶åˆ°é•œåƒä¸­ï¼Œå¦‚æœæ˜¯å‹ç¼©æ–‡ä»¶å’Œå½’æ¡£æ–‡ä»¶ï¼ŒADDå‘½ä»¤ä¼šå¯¹è¿™äº›æ–‡ä»¶è¿›è¡Œè§£å‹ç¼©è§£å½’æ¡£çš„æ“ä½œã€‚</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Dockerfile"><span class="hljs-keyword">ADD</span><span class="language-bash"> [--<span class="hljs-built_in">chown</span>=&lt;ç”¨æˆ·&gt;:&lt;ç”¨æˆ·ç»„&gt;] &lt;æºæ–‡ä»¶&gt; &lt;ç›®æ ‡æ–‡ä»¶&gt;</span><br></code></pre></td></tr></table></figure></li><li><p><strong>COPY</strong>ï¼šéå¸¸ç±»ä¼¼äºADDï¼Œä½†ä¸ä¼šä¸»åŠ¨å¯¹æ–‡ä»¶è¿›è¡Œæå–æ“ä½œã€‚</p></li><li><p><strong>LABEL</strong>ï¼šä¸ºDockeré•œåƒæ·»åŠ ä¸€äº›å…ƒæ•°æ®ï¼Œåœ¨ä½¿ç”¨<code>docker inspect</code>å‘½ä»¤æ—¶ä¼šçœ‹åˆ°è¿™äº›å…ƒæ•°æ®ã€‚</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Dockerfile"><span class="hljs-keyword">LABEL</span><span class="language-bash"> version=<span class="hljs-string">&quot;1.0.0&quot;</span> location=<span class="hljs-string">&quot;Chengdu&quot;</span></span><br></code></pre></td></tr></table></figure></li><li><p><strong>ONBUILD</strong>ï¼šä¸ºé•œåƒæ·»åŠ è§¦å‘å™¨ï¼Œå½“ä¸€ä¸ªé•œåƒè¢«ç”¨ä½œå…¶ä»–é•œåƒçš„åŸºç¡€é•œåƒï¼Œè§¦å‘å™¨å°†ä¼šè¢«æ‰§è¡Œã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs Dockerfile"><span class="hljs-keyword">ONBUILD</span> <span class="hljs-keyword">ADD</span><span class="language-bash"> . /app/src</span><br><span class="hljs-keyword">ONBUILD</span> <span class="hljs-keyword">RUN</span><span class="language-bash"> <span class="hljs-built_in">cd</span> /app/src &amp;&amp; make</span><br></code></pre></td></tr></table></figure></li></ol><h3 id="å¤šå®¹å™¨ç®¡ç†"><a href="#å¤šå®¹å™¨ç®¡ç†" class="headerlink" title="å¤šå®¹å™¨ç®¡ç†"></a>å¤šå®¹å™¨ç®¡ç†</h3><p>æˆ‘ä»¬çš„é¡¹ç›®å¯èƒ½ä¼šä½¿ç”¨äº†å¤šä¸ªå®¹å™¨ï¼Œå®¹å™¨å¤šäº†ä¹‹åç®¡ç†å®¹å™¨çš„å·¥ä½œå°±ä¼šå˜å¾—éº»çƒ¦ã€‚å¦‚æœè¦å¯¹å¤šä¸ªå®¹å™¨è¿›è¡Œè‡ªåŠ¨é…ç½®ä½¿å¾—å®¹å™¨å¯ä»¥ç›¸äº’åä½œç”šè‡³å®ç°å¤æ‚çš„è°ƒåº¦ï¼Œè¿™å°±éœ€è¦è¿›è¡Œå®¹å™¨ç¼–æ’ã€‚DockeråŸç”Ÿå¯¹å®¹å™¨ç¼–æ’çš„æ”¯æŒéå¸¸å¼±ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ç¤¾åŒºæä¾›çš„å·¥å…·æ¥å®ç°å®¹å™¨ç¼–æ’ã€‚</p><h4 id="Docker-Compose"><a href="#Docker-Compose" class="headerlink" title="Docker Compose"></a>Docker Compose</h4><p>å¯ä»¥é€šè¿‡å®‰è£…Docker Composeå·¥å…·æ¥å®ç°åŸºäºYAMLæ–‡ä»¶çš„å®¹å™¨ç¼–æ’ï¼ŒYAMLæ–‡ä»¶ä¼šå®šä¹‰ä¸€ç³»åˆ—çš„å®¹å™¨ä»¥åŠå®¹å™¨è¿è¡Œæ—¶çš„å±æ€§ï¼ŒDocker Composeä¼šæ ¹æ®è¿™äº›é…ç½®æ¥ç®¡ç†å®¹å™¨ã€‚</p><ol><li><p>å®‰è£…Docker Composeã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs Shell">curl -L &quot;https://github.com/docker/compose/releases/download/1.25.4/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-compose<br>chmod +x /usr/local/bin/docker-compose<br></code></pre></td></tr></table></figure><blockquote><p>è¯´æ˜ï¼šå¦‚æœæ²¡æœ‰curlå·¥å…·ï¼Œåœ¨CentOSä¸‹å¯ä»¥å…ˆé€šè¿‡åŒ…ç®¡ç†å·¥å…·yumå®‰è£…curlå†æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ã€‚</p></blockquote><p>å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨Pythonçš„åŒ…ç®¡ç†å·¥å…·pipæ¥å®‰è£…Docker Composeï¼Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">pip3 install -U docker-compose<br></code></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨Docker Composeã€‚</p><p>æˆ‘ä»¬åœ¨åˆšæ‰çš„Flaské¡¹ç›®ä¸­å¼•å…¥ç¼“å­˜ï¼Œç„¶åå†åˆ©ç”¨Flaskæä¾›çš„æ•°æ®æ¥å£ä¸ºå‰ç«¯é¡µé¢æä¾›æ•°æ®ï¼Œä½¿ç”¨Vue.jsè¿›è¡Œé¡µé¢æ¸²æŸ“å¹¶å°†é™æ€é¡µé¢éƒ¨ç½²åœ¨NginxæœåŠ¡å™¨ä¸Šã€‚é¡¹ç›®æ–‡ä»¶å¤¹ç»“æ„å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs Shell">[ECS-root ~]# tree temp<br>temp<br>â”œâ”€â”€ docker-compose.yml<br>â”œâ”€â”€ html<br>â”‚   â””â”€â”€ index.html<br>â””â”€â”€ myapp<br>    â”œâ”€â”€ api<br>    â”‚   â”œâ”€â”€ app.py<br>    â”‚   â”œâ”€â”€ requirements.txt<br>    â”‚   â””â”€â”€ start.sh<br>    â””â”€â”€ Dockerfile<br></code></pre></td></tr></table></figure><p>ä¿®æ”¹åçš„app.pyæ–‡ä»¶ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs Python"><span class="hljs-keyword">from</span> pickle <span class="hljs-keyword">import</span> dumps, loads<br><br><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask<br><span class="hljs-keyword">from</span> flask_restful <span class="hljs-keyword">import</span> Resource, Api<br><span class="hljs-keyword">from</span> flask_cors <span class="hljs-keyword">import</span> CORS<br><span class="hljs-keyword">from</span> redis <span class="hljs-keyword">import</span> Redis<br><br>app = Flask(__name__)<br>CORS(app, resources=&#123;<span class="hljs-string">r&#x27;/api/*&#x27;</span>: &#123;<span class="hljs-string">&#x27;origins&#x27;</span>: <span class="hljs-string">&#x27;*&#x27;</span>&#125;&#125;)<br>api = Api(app)<br>redis = Redis(host=<span class="hljs-string">&#x27;redis-master&#x27;</span>, port=<span class="hljs-number">6379</span>)<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Product</span>(<span class="hljs-title class_ inherited__">Resource</span>):<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">self</span>):<br>        data = redis.get(<span class="hljs-string">&#x27;products&#x27;</span>)<br>        <span class="hljs-keyword">if</span> data:<br>            products = loads(data)<br>        <span class="hljs-keyword">else</span>:<br>            products = [<span class="hljs-string">&#x27;Ice Cream&#x27;</span>, <span class="hljs-string">&#x27;Chocolate&#x27;</span>, <span class="hljs-string">&#x27;Coca Cola&#x27;</span>, <span class="hljs-string">&#x27;Hamburger&#x27;</span>]<br>            redis.<span class="hljs-built_in">set</span>(<span class="hljs-string">&#x27;products&#x27;</span>, dumps(products))<br>        <span class="hljs-keyword">return</span> &#123;<span class="hljs-string">&#x27;products&#x27;</span>: products&#125;<br><br><br>api.add_resource(Product, <span class="hljs-string">&#x27;/api/products&#x27;</span>)<br></code></pre></td></tr></table></figure><p>htmlæ–‡ä»¶å¤¹ç”¨æ¥ä¿å­˜é™æ€é¡µé¢ï¼Œç¨åæˆ‘ä»¬ä¼šé€šä¸€ä¸ªè¿è¡ŒNginxçš„å®¹å™¨æ¥å‘æµè§ˆå™¨æä¾›é™æ€é¡µé¢ã€‚index.htmlæ–‡ä»¶çš„å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs HTML"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>é¦–é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>äº§å“åˆ—è¡¨<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;product in products&quot;</span>&gt;</span>&#123;&#123; product &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.bootcss.com/vue/2.6.10/vue.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>, </span><br><span class="language-javascript">            <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                <span class="hljs-attr">products</span>: []</span><br><span class="language-javascript">            &#125;,</span><br><span class="language-javascript">            <span class="hljs-title function_">created</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">                <span class="hljs-title function_">fetch</span>(<span class="hljs-string">&#x27;http://1.2.3.4:8000/api/products&#x27;</span>)</span><br><span class="language-javascript">                    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">resp</span> =&gt;</span> resp.<span class="hljs-title function_">json</span>())</span><br><span class="language-javascript">                    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">json</span> =&gt;</span> &#123;<span class="hljs-variable language_">this</span>.<span class="hljs-property">products</span> = json.<span class="hljs-property">products</span>&#125;)</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;)</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦é€šè¿‡docker-compose.ymlæ–‡ä»¶æ¥åˆ›å»ºä¸‰ä¸ªå®¹å™¨å¹¶æŒ‡æ˜å®¹å™¨ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs YAML"><span class="hljs-attr">version:</span> <span class="hljs-string">&#x27;3&#x27;</span><br><span class="hljs-attr">services:</span><br>  <span class="hljs-attr">api-server:</span><br>    <span class="hljs-attr">build:</span> <span class="hljs-string">./myapp</span><br>    <span class="hljs-attr">ports:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;8000:8000&#x27;</span><br>    <span class="hljs-attr">links:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">redis-master</span><br>  <span class="hljs-attr">web-server:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">nginx</span><br>    <span class="hljs-attr">ports:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;80:80&#x27;</span><br>    <span class="hljs-attr">volumes:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">./html:/usr/share/nginx/html</span><br>  <span class="hljs-attr">redis-master:</span><br>    <span class="hljs-attr">image:</span> <span class="hljs-string">redis</span><br>    <span class="hljs-attr">expose:</span><br>      <span class="hljs-bullet">-</span> <span class="hljs-string">&#x27;6379&#x27;</span><br></code></pre></td></tr></table></figure><p>æœ‰äº†è¿™ä¸ªYAMLæ–‡ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨<code>docker-compose</code>å‘½ä»¤æ¥åˆ›å»ºå®¹å™¨è¿è¡Œé¡¹ç›®ï¼Œå…¶å‘½ä»¤å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs Shell">[ECS-root temp]# docker-compose up<br>Creating network &quot;temp_default&quot; with the default driver<br>Creating temp_web-server_1   ... done<br>Creating temp_redis-master_1 ... done<br>Creating temp_api-server_1   ... done<br>Attaching to temp_redis-master_1, temp_web-server_1, temp_api-server_1<br>redis-master_1  | 1:C 05 Dec 2019 11:57:26.828 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo<br>redis-master_1  | 1:C 05 Dec 2019 11:57:26.828 # Redis version=5.0.6, bits=64, commit=00000000, modified=0, pid=1, just started<br>redis-master_1  | 1:C 05 Dec 2019 11:57:26.828 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf<br>redis-master_1  | 1:M 05 Dec 2019 11:57:26.830 * Running mode=standalone, port=6379.<br>redis-master_1  | 1:M 05 Dec 2019 11:57:26.831 # WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.<br>redis-master_1  | 1:M 05 Dec 2019 11:57:26.831 # Server initialized<br>redis-master_1  | 1:M 05 Dec 2019 11:57:26.831 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add &#x27;vm.overcommit_memory = 1&#x27; to /etc/sysctl.conf and then reboot or run the command &#x27;sysctl vm.overcommit_memory=1&#x27; for this to take effect.<br>redis-master_1  | 1:M 05 Dec 2019 11:57:26.831 # WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command &#x27;echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled&#x27; as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.<br>redis-master_1  | 1:M 05 Dec 2019 11:57:26.831 * Ready to accept connections<br>api-server_1    | [2019-12-05 11:57:27 +0000] [1] [INFO] Starting gunicorn 20.0.4<br>api-server_1    | [2019-12-05 11:57:27 +0000] [1] [INFO] Listening at: http://0.0.0.0:8000 (1)<br>api-server_1    | [2019-12-05 11:57:27 +0000] [1] [INFO] Using worker: sync<br>api-server_1    | [2019-12-05 11:57:27 +0000] [8] [INFO] Booting worker with pid: 8<br>api-server_1    | [2019-12-05 11:57:27 +0000] [9] [INFO] Booting worker with pid: 9<br>api-server_1    | [2019-12-05 11:57:27 +0000] [10] [INFO] Booting worker with pid: 10<br>api-server_1    | [2019-12-05 11:57:27 +0000] [11] [INFO] Booting worker with pid: 11<br></code></pre></td></tr></table></figure><p> è¦åœæ­¢å®¹å™¨çš„è¿è¡Œï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ã€‚</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs Shell">docker-compose down<br></code></pre></td></tr></table></figure></li></ol><h4 id="Kubernetesï¼ˆK8Sï¼‰"><a href="#Kubernetesï¼ˆK8Sï¼‰" class="headerlink" title="Kubernetesï¼ˆK8Sï¼‰"></a>Kubernetesï¼ˆK8Sï¼‰</h4><p>å®é™…çš„ç”Ÿäº§ç¯å¢ƒä¸­å¸¸å¸¸éœ€è¦éƒ¨ç½²å’Œç®¡ç†å¤šä¸ªååŒå·¥ä½œçš„å®¹å™¨ï¼Œdocker composeè§£å†³äº†å¤šå®¹å™¨åˆ›å»ºå’Œç®¡ç†çš„é—®é¢˜ï¼Œä½†æ˜¯å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬è¿˜éœ€è¦Kubernetesï¼ˆä»¥ä¸‹éƒ½ç®€ç§°ä¸ºK8Sï¼‰æ¥æä¾›ä¸€ä¸ªè·¨ä¸»æœºé›†ç¾¤çš„å®¹å™¨è°ƒåº¦å¹³å°ã€‚K8Så¯ä»¥è¿›è¡Œè‡ªåŠ¨åŒ–å®¹å™¨çš„éƒ¨ç½²ã€æ‰©å±•å’Œæ“ä½œï¼Œä»è€Œæä¾›ä»¥å®¹å™¨ä¸ºä¸­å¿ƒçš„åŸºç¡€æ¶æ„ã€‚è¯¥é¡¹ç›®æ˜¯è°·æ­Œåœ¨2014å¹´å¯åŠ¨çš„é¡¹ç›®ï¼Œå»ºç«‹åœ¨è°·æ­Œå…¬å¸åä½™å¹´è¿ç»´ç»éªŒçš„åŸºç¡€ä¹‹ä¸Šï¼Œè€Œä¸”è°·æ­Œè‡ªå·±çš„åº”ç”¨ä¹Ÿæ˜¯è¿è¡Œåœ¨å®¹å™¨ä¸Šçš„ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
